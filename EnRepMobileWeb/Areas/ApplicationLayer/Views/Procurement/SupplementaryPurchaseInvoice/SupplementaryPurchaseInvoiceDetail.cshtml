@model EnRepMobileWeb.MODELS.ApplicationLayer.Procurement.SupplementaryPurchaseInvoice.SuppPI_ListModel
@using EnRepMobileWeb.Resources;
@using EnRepMobileWeb.MODELS.Common;
@using System.Data
<title>@ViewBag.title</title>
@if (Session["UserId"] == null)
{
    Response.Redirect("~/Login");
}
@{
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}
<script src="~/Content/Css/jquery/dist/jquery.min.js"></script>
<script src="~/Content/Css/build/js/sweetalert2.all.min.js"></script>

<script src="~/Content/Scripts/ApplicationLayer/Procurement/SupplementaryPurchaseInvoice/SuppPurchaseInvoiceJs.js"></script>
@*/*start Add by Hina on 06-02-2024 to chk Financial year exist or not*/*@
@{
    if (TempData["Message"] != null)
    {
        if (TempData["Message"] == "Financial Year not Exist")
        {
            <script type="text/javascript">
                swal("", $("#FinancialYearDoesNotExistTransactionCanNotBeDone").text(), "warning");
            </script>
        }

    }
    if (TempData["Message1"] != null)
    {
        if (TempData["Message1"] == "TransNotAllow")
        {
            <script type="text/javascript">
                swal("", $("#NomodificationisallowedinpreviousFYdocument").text(), "warning");
            </script>
        }

    }
}
@*/*End to chk Financial year exist or not*/*@
@{var Disable = true;
    var subitmDisable = "";
    var Disable_status = "Disable";
    var Disable_status_R = "Enable";
    /*------------------Attatchmnet Start----------------*/
    ViewBag.Disable = false;
    /*------------------Attatchmnet End---------------*/
    var disablePrintbtn = "";
}
@{
    // var disablePrintbtn = "";
    //var Disable = true;
    if (Model.TransType == "Update")
    {
        var v = Model.DocumentStatus;
        if (v == "D")
        {
            if (Model.Command == "Edit")
            {
                Disable = false;
            }
            else
            {
                Disable = true;
            }
        }
    }
    else
    {
        if (Model.Command == "Refresh")
        {
            Disable = true;
        }
        else
        {
            Disable = false;
        }
    }
    if (Model.DocumentStatus == "A")
    {
        Disable = true;
    }
    if (Model.DocumentStatus == "C" || Model.Inv_Nos == null || ((Model.DocumentStatus == "D" || Model.DocumentStatus == "A") && Model.Command == "Edit"))
    {
        disablePrintbtn = "disabled style=filter:grayscale(100%)";
    }
    if (Model.BtnName == "BtnEdit" && Model.Command == "Edit" && Model.DocumentStatus == "D" && Model.DocumentMenuId == "105101147")
    {
        <script type="text/javascript">
            $(document).ready(function () {
                GetAllGLID();
            });

        </script>
    }
}
@if (Model.TransType == "Update")
{
    var v = Model.DocumentStatus;
    if (v == "D")
    {
        if (Model.Command == "Edit")
        {
            Disable_status = "Enable";
            Disable_status_R = "Enable";
        }
        else
        {
            Disable_status = "Disable";
            Disable_status_R = "Enable";
        }
    }
}
else
{
    if (Model.Command == "Refresh")
    {
        Disable_status = "Enable";
        Disable_status_R = "Enable";
    }
    else
    {
        Disable_status = "Enable";
        Disable_status_R = "Enable";
    }
}

<script type="text/javascript">

    function setHiddenFieldValue(par) {
        if (par === "P") {
            $('#ForDisableOCDlt').val('Disable');
            $('#ForOCInvstatus').val('Disable');
        } else {
           //$('#ForDisableOCDlt').val('Enabled');
            $('#ForOCInvstatus').val('@Disable_status_R');
            $('#ForDisableOCDlt').val('@Disable_status');
        }
        OnClickOtherChargeBtnWithSupp();
    }

</script>
@{
    if (Model.Message != null)
    {
        if (Model.Message == "Save")
        {
            <script type="text/javascript">
                swal("", $("#savemsg").text(), "success");
            </script>
        }
        if (Model.Message == "Deleted")
        {
            <script type="text/javascript">
                swal("", $("#deletemsg").text(), "success");
            </script>
        }
        if (Model.Message == "Approved")
        {
            <script type="text/javascript">
                swal("", $("#approvemsg").text(), "success");
            </script>
        }
        if (Model.Message == "Cancelled")
        {
            <script type="text/javascript">
                swal("", $("#cancelmsg").text(), "success");
            </script>
        }
        if (Model.Message == "Used")
        {
            <script type="text/javascript">
                swal("", $("#RFQHasBnPrcsdCanNotBeMdfd").text(), "warning");
            </script>
        }
        if (Model.Message == "PaymentsHasBeenAdjustedAgainstThisInvoiceItCanNotBeModified")
        {
            <script type="text/javascript">
                swal("", $("#PaymentsHasBeenAdjustedAgainstThisInvoiceItCanNotBeModified").text(), "warning");
            </script>
        }
        if (Model.Message == "InvoiceCannotbeModified")
        {
            <script type="text/javascript">
                swal("", $("#SourceDocumentHasBeenModifiedCanNotProceed").text(), "warning");
            </script>
        }
        Model.Message = null;
    }
}
@{
    string ValDigit = "0.";
    var VD = Convert.ToInt32(Session["ValDigit"].ToString());
    for (var i = 0; i < VD; i++)
    {
        ValDigit += "0";
    }
    string RateDigit = "0.";
    var RD = Convert.ToInt32(Session["RateDigit"].ToString());
    for (var i = 0; i < RD; i++)
    {
        RateDigit += "0";
    }
}

@using (Html.BeginForm("ActionSuppPIDetails", "SupplementaryPurchaseInvoice", new { area = "ApplicationLayer" }, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken(){
        @*<input type="hidden" id="txtdisable" value="Y" />*@
        <div class="row">
            <input type="hidden" id="DocumentMenuId" value="@ViewBag.DocumentMenuId" />
            <!-- Forward Information-->
            <div id="Forward_Pop" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/PartialForward.cshtml")
                </div>
            </div>
            <!-- Mail Information -->
            <div id="MailInfo" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:600px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_MailInfomation.cshtml")
                </div>
            </div>
            <!-- Multiple Mail Information -->
            <div id="MultipleMailInfo" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_MultipleMailInfo.cshtml")
                </div>
            </div>
            <!-- Mail View -->
            <div id="MailView" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_MailView.cshtml")
                </div>
            </div>
            <!-- Log View -->
            <div id="LogView" class="modal fade" role="dialog">
                <div id="IdLogView" class="modal-dialog" style="max-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_LogView.cshtml")
                </div>
            </div>
            <!-- Workflow Information-->
            <div id="WorkflowInformation" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:700px;">
                    <div class="price_item_detail">
                        <!-- Modal content-->
                        @Html.Partial("~/Areas/Common/Views/_WorkFlow.cshtml")
                    </div>
                </div>
            </div>
            <!-- Other Charges Calculator-->
            <div id="OtherChargesCalculator" class="modal fade" role="dialog">
                <div class="modal-dialog" id="OtherChargesCalculatorPopUp" style=" max-width:1200px;">
                    <!-- Modal content-->
                    @*@Html.Partial("~/Areas/Common/Views/Cmn_OtherCharge.cshtml")*@
                    <div class="TaxCalculatorPop">
                        @Html.Partial("~/Areas/Common/Views/Cmn_OtherChargeWithSupp.cshtml")
                    </div>
                </div>
            </div>
            <!-- ItemCalculate-->
            @*<div id="ItemCalculate" class="modal fade" role="dialog">
                <input type="hidden" id="hd_tax_id" />
                <div class="modal-dialog" style=" max-width:800px;">*@
            <div id="ItemCalculate" class="modal fade show" style="display: none;" aria-modal="true" role="dialog">
                <input type="hidden" id="hd_tax_id">
                <div class="modal-dialog" style="max-width:800px;">
                    <div class="TaxCalculatorPop">
                        <!-- Modal content-->
                        @Html.Partial("~/Areas/Common/Views/Cmn_TaxCalculation.cshtml")
                    </div>
                </div>
            </div>
            <!-- Address Information Start-->
            <div id="AddressInfo" class="modal fade" role="dialog">
                <div id="address" class="modal-dialog" style=" max-width:1100px;">
                    <!-- Modal content-->
                    <input type="hidden" id="hd_bill_id" />
                    <input type="hidden" id="hd_add_type" />
                    <input type="hidden" id="hd_TxtBillingAddr" />
                    <input type="hidden" id="hd_bill_add_id" />
                    <div id="tbodyAddressBodyNew">
                        @*@Html.HiddenFor(model => model.Pending_SourceDocument, new { @id = "Pending_SourceDocumentLink" })*@
                    </div>
                </div>
            </div>
            <!-- Address Information End-->
            <!-- Item Information -->
            <div id="ItemInfo" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/_ItemInfomation.cshtml")
                </div>
            </div>
            <!-- Supplier Information -->
            <div id="SupplierInformation" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="price_item_detail">
                        <!-- Modal content-->
                        @Html.Partial("~/Areas/Common/Views/_SupplierInformation.cshtml")
                    </div>
                </div>
            </div>
            <!-- TDS Calculate-->

            <div id="TDSCalculate" class="modal fade" role="dialog">
                <div class="modal-dialog" style=" max-width:1000px;" id="PopUp_TDSCalculate">
                </div>
                <table hidden="hidden" id="Hdn_TDS_CalculatorTbl">
                    <tbody>
                        @if (ViewBag.ItemTDSDetailsPrev != null)
                        {
                            var RowSno = 0;
                            foreach (DataRow dr in ViewBag.ItemTDSDetailsPrev.Rows)
                            {
                                RowSno = RowSno + 1;
                                <tr>
                                    <td id="td_TDS_Name">@dr["tds_name"]</td>
                                    <td id="td_TDS_NameID">@dr["tds_id"]</td>
                                    <td id="td_TDS_Percentage">@Convert.ToDecimal(dr["tds_rate"]).ToString("0.00")%</td>
                                    <td id="td_TDS_Level">@dr["tds_level"]</td>
                                    <td id="td_TDS_ApplyOn">@dr["tds_apply_Name"]</td>
                                    <td id="td_TDS_Amount">@dr["tds_val"]</td>
                                    <td id="td_TDS_ApplyOnID">@dr["tds_apply_on"]</td>
                                    <td id="td_TDS_BaseAmt">@dr["tds_base_amt"]</td>
                                    <td id="td_TDS_AccId">@dr["tds_acc_id"]</td>
                                    <td id="td_TDS_AssValApplyOn">@dr["tds_ass_apply_on"]</td>


                                </tr>
                            }
                        }
                    </tbody>
                </table>
                <table hidden="hidden" id="Hdn_TDS_CalculatorTblRevised">
                    <tbody>

                        @if (ViewBag.ItemTDSDetails != null)
                        {
                            var RowSno = 0;
                            foreach (DataRow dr in ViewBag.ItemTDSDetails.Rows)
                            {
                                RowSno = RowSno + 1;
                                <tr>
                                    <td id="td_TDS_Name">@dr["tds_name"]</td>
                                    <td id="td_TDS_NameID">@dr["tds_id"]</td>
                                    <td id="td_TDS_Percentage">@Convert.ToDecimal(dr["tds_rate"]).ToString("0.00")%</td>
                                    <td id="td_TDS_Level">@dr["tds_level"]</td>
                                    <td id="td_TDS_ApplyOn">@dr["tds_apply_Name"]</td>
                                    <td id="td_TDS_Amount">@dr["tds_val"]</td>
                                    <td id="td_TDS_ApplyOnID">@dr["tds_apply_on"]</td>
                                    <td id="td_TDS_BaseAmt">@dr["tds_base_amt"]</td>
                                    <td id="td_TDS_AccId">@dr["tds_acc_id"]</td>
                                    <td id="td_TDS_AssValApplyOn">@dr["tds_ass_apply_on"]</td>
                                    <td id="td_TDS_RevisedAmt">0</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
                <table hidden="hidden" id="Hdn_OC_TDS_CalculatorTbl">
                    <tbody>
                        @if (ViewBag.ItemOC_TDSDetails != null)
                        {
                            var RowSno = 0;
                            foreach (DataRow dr in ViewBag.ItemOC_TDSDetails.Rows)
                            {
                                RowSno = RowSno + 1;
                                <tr>
                                    <td id="td_TDS_Name">@dr["tds_name"]</td>
                                    <td id="td_TDS_NameID">@dr["tds_id"]</td>
                                    <td id="td_TDS_Percentage">@Convert.ToDecimal(dr["tds_rate"]).ToString("0.00")%</td>
                                    <td id="td_TDS_Level">@dr["tds_level"]</td>
                                    <td id="td_TDS_ApplyOn">@dr["tds_apply_Name"]</td>
                                    <td id="td_TDS_Amount">@dr["tds_val"]</td>
                                    <td id="td_TDS_ApplyOnID">@dr["tds_apply_on"]</td>
                                    <td id="td_TDS_BaseAmt">@dr["tds_base_amt"]</td>
                                    <td id="td_TDS_AccId">@dr["tds_acc_id"]</td>
                                    <td id="td_TDS_OC_Id">@dr["tds_oc_id"]</td>
                                    <td id="td_TDS_Supp_Id">@dr["tds_supp_id"]</td>
                                    <td id="td_TDS_AssValApplyOn">@dr["tds_ass_apply_on"]</td>
                                    <td id="td_TDS_temp"></td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
                <input hidden id="hdn_tds_on" />
                @Html.HiddenFor(m => m.Tds_details, new { @id = "hdn_tds_details" })
                @Html.HiddenFor(m => m.Oc_tds_details, new { @id = "hdn_oc_tds_details" })
            </div>
            <!-- TDS Calculate-->
            <!-- Variance Detail-->
            <div id="VarianceDetail" class="modal fade" role="dialog">
                <div class="modal-dialog" id="VarianceDetailPopUp" style=" max-width:1100px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/_VarianceDetail.cshtml")
                </div>
            </div>
            <!-- Reason Remarksl-->
            <div id="ReasonRemarks" class="modal fade" role="dialog">
                <div class="modal-dialog" id="" style=" max-width:600px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_ReasonRemarks.cshtml")
                </div>
            </div>
            <div id="SubItem" class="modal fade" role="dialog">
                <div class="modal-dialog" id="SubItemPopUp" style=" max-width:600px;">
                    <!-- Modal content-->
                    @{
                        SubItemPopupDt mdl = new SubItemPopupDt();
                    }
                    @Html.Partial("~/Areas/Common/Views/Cmn_PartialSubItemDetail.cshtml", mdl)
                </div>
                <table id="hdn_Sub_ItemDetailTbl" hidden>
                    <tbody>
                        @if (ViewBag.SubItemDetails != null)
                        {
                            foreach (System.Data.DataRow dr in ViewBag.SubItemDetails.Rows)
                            {
                                <tr>
                                    <td><input type="text" id="ItemId" value='@dr["item_id"]'></td>
                                    <td><input type="text" id="subItemId" value='@dr["sub_item_id"]'></td>
                                    <td><input type="text" id="subItemName" value='@dr["sub_item_name"]'></td>
                                    <td><input type="text" id="subItemQty" value='@dr["Qty"]'></td>
                                    <td><input type="text" id="subItemSrcDocNo" value='@dr["src_doc_number"]'></td>
                                    <td><input type="text" id="subItemSrcDocDate" value='@dr["src_doc_date"]'></td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
                @Html.HiddenFor(model => model.ItemDetails, new { @id = "hdItemDetailList" })
                @Html.HiddenFor(model => model.dt_SubItemDetails, new { @id = "SubItemDetailsDt" })
                @Html.HiddenFor(model => model.TaxDetail, new { @id = "hdItemTaxDetail" })
                @Html.HiddenFor(model => model.OC_TaxDetail, new { @id = "hdOC_ItemTaxDetail" })
                @Html.HiddenFor(model => model.OCDetail, new { @id = "hdItemOCDetail" })
                @Html.HiddenFor(model => model.vouDetail, new { @id = "hdItemvouDetail" })
                @if ((Model.doc_status == "D" || Model.doc_status == "F" || string.IsNullOrEmpty(Model.doc_status) == true))
                {
                    if (Disable)
                    {
                        //ViewBag.Disable = "disabled";
                        <input id="DisableSubItem" value="Y" hidden />
                    }
                    else
                    {
                        <input id="DisableSubItem" value="N" hidden />
                    }
                    ViewBag.Disable = "disabled";
                    <input id="DisableSubItem" value="Y" hidden />
                }
                else
                {
                    ViewBag.Disable = "disabled";
                    <input id="DisableSubItem" value="Y" hidden />
                }
            </div>
            <!-- Sub Item Stock Detail Start-->
            <div id="SubItemStock" class="modal fade" role="dialog">
                <div class="modal-dialog" id="SubItemStockPopUp" style=" max-width:600px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_PartialSubItemStkDetail.cshtml")
                </div>
            </div>
            <!-- Sub Item Stock Detail End-->
            <!-- Cost Center Detail -->
            <div id="CostCenterDetail" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class=" height30VH" id="CostCenterDetailPopup">
                    </div>
                    @Html.HiddenFor(model => model.CC_DetailList, new { @id = "hdn_CC_DetailList" })
                </div>
                <div>
                    <table class="table table-striped margin5" hidden="hidden" id="tbladdhdn">
                        <tbody id="tbody_tblhdn">
                            @if (ViewBag.CostCenterData != null)
                            {
                                foreach (System.Data.DataRow Row in ViewBag.CostCenterData.Rows)
                                {
                                    <tr>
                                        <td id="hdntbl_GlAccountId">@Row["acc_id"].ToString()</td>
                                        <td id="hdntbl_CCtype">@Row["cc_name"].ToString()</td>
                                        <td id="hdntbl_CCtype_Id">@Row["cc_id"].ToString()</td>
                                        <td id="hdntbl_CC_Name">@Row["cc_val_name"].ToString()</td>
                                        <td id="hdntbl_CCName_Id">@Row["cc_val_id"].ToString()</td>
                                        <td id="hdntbl_CstAmt">@Row["cc_amt"].ToString()</td>
                                        <td id="hdntbl_vou_sr_no">@Row["vou_sr_no"].ToString()</td>
                                        <td id="hdntbl_gl_sr_no">@Row["gl_sr_no"].ToString()</td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Cost Center Detail End-->
            @Html.HiddenFor(model => model.CC_DetailList, new { @id = "hdn_CC_DetailList" })
            @Html.HiddenFor(model => model.Title, new { @id = "hdn_title" })
            @Html.HiddenFor(model => model.TransType, new { @id = "hdn_TransType" })
            @Html.HiddenFor(m => m.FilterData1, new { @id = "FilterData1", value = Model.FilterData1 })
            @Html.HiddenFor(model => model.curr_id, new { @id = "curr_id" })
            @Html.HiddenFor(model => model.conv_rate, new { @id = "conv_rate" })
            @if (Disable == true)// && (Model.DocumentStatus != "D" && Model.DocumentStatus != ""))
            {
                <input type="hidden" id="txtdisable" value="Y" />
            }
            else
            {
                <input type="hidden" id="txtdisable" value="N" />
            }
            @if (ViewBag.GLAccount != null)
            {
                foreach (System.Data.DataRow Row in ViewBag.GLAccount.Rows)
                {
                    if (Row["gl_type"].ToString() == "Itm")
                    {
                        <input type="hidden" id="hdnAccID" value="@Row["acc_id"].ToString()" />
                    }
                }
            }
            else
            {
                <input type="hidden" id="hdnAccID" />
            }
            <div class="col-md-12 col-sm-12 ">
                <div class="x_panel mar_pad1 ">
                    <div class="x_content mar_pad1">
                        <h2 class="col-md-5 col-sm-12 heading_left_padding ">@ViewBag.MenuPageName</h2>
                        <div id="wizard" class="form_wizard wizard_horizontal col-md-3 col-sm-12 work_flow">
                            @Html.Partial("~/Areas/Common/Views/_PartialWorkflowBar.cshtml")
                            @Html.HiddenFor(model => model.WFBarStatus, new { @id = "WFBarStatus" })
                            @Html.HiddenFor(model => model.WFStatus, new { @id = "WFStatus" })
                            @Html.HiddenFor(model => model.Create_id, new { @id = "Create_ID" })
                            @Html.HiddenFor(model => model.AppStatus, new { @id = "AppStatus" })
                            @Html.HiddenFor(model => model.WF_Status, new { @id = "WF_Status1" })
                            @Html.HiddenFor(model => model.BatchCommand, new { @id = "hdn_BatchCommand" })
                        </div>
                        <div id="" class="col-md-4 col-sm-12 work_flow heading_right_padding">
                            @{
                                var btnName = Model.BtnName;
                                switch (btnName)
                                {
                                    case "BtnAddNew":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" disabled style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="AddNew" onclick="RemoveSessionData()"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit" onclick="EnableEditkBtn()"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147004")
                                                    {
                                                        <li>
                                                            <button class="delete"
                                                                    title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" type="submit" onclick="return  InsertSPIDetails();" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="forward"
                                                            title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="approve"
                                                        title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147005")
                                                    {
                                                        <li>
                                                            <button class="print"
                                                                    title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="email_tool"
                                                        title="@Resource.Email" disabled style="filter: grayscale(100%)" type="button" value="Mail" name="Command" id="Btn_Mail" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false"></button>
                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" disabled style="filter: grayscale(100%)" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnEdit":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" disabled style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147002")
                                                    {
                                                        <li>

                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147004")
                                                    {
                                                        <li>
                                                            @if (Model.DocumentStatus == "D")
                                                            {
                                                                <button class="delete"
                                                                        title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            }
                                                            else
                                                            {
                                                                if (Model.Command == "Edit")
                                                                {
                                                                    <button class="delete"
                                                                            title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                                }
                                                                else
                                                                {
                                                                    <button class="delete"
                                                                            title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                                }
                                                            }
                                                            @Html.HiddenFor(m => m.SuppPI_DeleteCommand, new { @id = "HdDeleteCommand" })
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                @if (Model.Command == "Edit" && Model.DocumentStatus == "D")
                                                {
                                                    <button class="save"
                                                            onclick="return InsertSPIDetails()" title="@Resource.Save" type="submit" id="btn_save" name="Command" value="Save"></button>
                                                }
                                                else
                                                {
                                                    <button class="save"
                                                            title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                                }
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    @if (Model.DocumentStatus == "A")
                                                    {
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    }
                                                    else
                                                    {
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    }
                                                </li>
                                            }
                                            <li>
                                                @if (Model.DocumentStatus == "A" || Model.DocumentStatus == "D")
                                                {
                                                    <button class="approve"
                                                            title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                }
                                                else
                                                {
                                                    if (Model.Command == "Edit")
                                                    {
                                                        <button class="approve"
                                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                    }
                                                    else
                                                    {
                                                        <button class="approve"
                                                                title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                    }
                                                }
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    @if (Model.DocumentStatus == "A")
                                                    {
                                                        <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                                    }
                                                    else
                                                    {
                                                        <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                                    }
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147005")
                                                    {
                                                        <li>
                                                            @if (Model.DocumentStatus == "A")
                                                            {
                                                                <button class="print"
                                                                        title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                            }
                                                            else
                                                            {
                                                                <button class="print"
                                                                        title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                            }
                                                        </li>
                                                    }
                                                }
                                            }
                                            @if (Model.Create_id == Model.UserID || ViewBag.Approve_id == Model.UserID)
                                            {
                                                if (Model.DocumentStatus == "A" || Model.DocumentStatus == "C")
                                                {
                                                    <li>
                                                        <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" disabled style="filter: grayscale(100%)" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnRefresh":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147004")
                                                    {
                                                        <li>
                                                            <button class="delete"
                                                                    title="@Resource.Delete" onclick="return functionConfirm(this)" style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        </li>
                                                        @Html.HiddenFor(m => m.SuppPI_DeleteCommand, new { @id = "HdDeleteCommand" })
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" onclick="return  InsertSPIDetails();" style="filter: grayscale(100%)" disabled type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="forward"
                                                            title="@Resource.Forward" style="filter: grayscale(100%)" disabled type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="approve"
                                                        title="@Resource.Approve" style="filter: grayscale(100%)" disabled type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>

                                                    <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" style="filter: grayscale(100%)" disabled type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147005")
                                                    {
                                                        <li>
                                                            <button class="print" title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            @if (Model.Create_id == Model.UserID || ViewBag.Approve_id == Model.UserID)
                                            {
                                                if (Model.DocumentStatus == "A" || Model.DocumentStatus == "C")
                                                {
                                                    <li>
                                                        <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnDelete":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147004")
                                                    {
                                                        <li>
                                                            <button class="delete"
                                                                    title="@Resource.Delete" onclick="return functionConfirm(this)" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        </li>
                                                        @Html.HiddenFor(m => m.SuppPI_DeleteCommand, new { @id = "HdDeleteCommand" })
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" onclick="return InsertSPIDetails()" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="forward"
                                                            title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="approve"
                                                        title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147005")
                                                    {
                                                        <li>
                                                            <button class="print" title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="email_tool"
                                                        title="@Resource.Email" disabled style="filter: grayscale(100%)" type="button" value="Mail" name="Command" id="Btn_Mail" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false"></button>
                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "Refresh":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147004")
                                                    {

                                                        <li>
                                                            <button class="delete"
                                                                    title="@Resource.Delete" onclick="return functionConfirm(this)" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        </li>
                                                        @Html.HiddenFor(m => m.SuppPI_DeleteCommand, new { @id = "HdDeleteCommand" })
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" onclick="return InsertSPIDetails()" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="forward"
                                                            title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="approve"
                                                        title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147005")
                                                    {
                                                        <li>
                                                            <button class="print" title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            @if (Model.Create_id == Model.UserID || ViewBag.Approve_id == Model.UserID)
                                            {
                                                if (Model.DocumentStatus == "A" || Model.DocumentStatus == "C")
                                                {
                                                    <li>
                                                        <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnToDetailPage":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147002")
                                                    {
                                                        if (Model.DocumentStatus == "D" || Model.DocumentStatus == "A")
                                                        {
                                                            <li>
                                                                <button class="edit"
                                                                        title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                            </li>
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="edit" disabled style="filter: grayscale(100%)"
                                                                        title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                            </li>
                                                        }
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147004")
                                                    {
                                                        if (Model.DocumentStatus == "D")
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                        }
                                                        @Html.HiddenFor(m => m.SuppPI_DeleteCommand, new { @id = "HdDeleteCommand" })
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" onclick="return InsertSPIDetails()" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    @if (Model.DocumentStatus == "D" || Model.DocumentStatus == "F")
                                                    {
                                                        if (ViewBag.ForwardEnbl == "Y")
                                                        {
                                                            //if (ViewBag.Message == "Financial Year not Exist")
                                                            /*Above Commented and modify by Hina sharma on 05-05-2025 to check Existing with previous year transaction*/

                                                            if (ViewBag.Message == "TransNotAllow")
                                                            {
                                                                <button class="forward"
                                                                        title="@Resource.Forward" type="button" id="Btn_Forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                            }
                                                            else
                                                            {
                                                                <button class="forward"
                                                                        title="@Resource.Forward" type="button" id="Btn_Forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <button class="forward"
                                                                    title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    }
                                                </li>
                                            }
                                            <li>
                                                @if (Model.DocumentStatus == "D" || Model.DocumentStatus == "F")
                                                {
                                                    if (ViewBag.Approve == "Y")
                                                    {
                                                        if (ViewBag.AppLevel.Rows.Count > 0)
                                                        {
                                                            //if (ViewBag.Message == "Financial Year not Exist")
                                                            /*Above Commented and modify by Hina sharma on 05-05-2025 to check Existing with previous year transaction*/

                                                            if (ViewBag.Message == "TransNotAllow")
                                                            {
                                                                <button class="approve"
                                                                        title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" id="Btn_Approve" name="Command" value="Approve"></button>
                                                            }
                                                            else
                                                            {
                                                                <button class="approve"
                                                                        title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="Btn_Approve" name="Command" value="Approve"></button>
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <button class="approve"
                                                                    title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <button class="approve"
                                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Approve" name="Command" value="Approve"></button>
                                                    }
                                                }
                                                else
                                                {
                                                    <button class="approve"
                                                            title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                }
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="Btn_Workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false" name="Command" value="Workflow"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147005")
                                                    {
                                                        <li>
                                                            <button class="print"
                                                                    title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            @if (Model.Create_id == Model.UserID || ViewBag.Approve_id == Model.UserID)
                                            {
                                                if (Model.DocumentStatus == "A" || Model.DocumentStatus == "C")
                                                {
                                                    <li>
                                                        <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnSave":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147004")
                                                    {
                                                        if (Model.DocumentStatus == "A")
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" disabled style="filter: grayscale(100%)" name="Command" value="Delete"></button>
                                                            </li>
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                        }
                                                        @Html.HiddenFor(m => m.SuppPI_DeleteCommand, new { @id = "HdDeleteCommand" })
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" onclick="return InsertSPIDetails()" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>

                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    @if (Model.DocumentStatus == "D")
                                                    {
                                                        if (ViewBag.ForwardEnbl == "Y")
                                                        {
                                                            <button class="forward"
                                                                    title="@Resource.Forward" type="button" id="Btn_Forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                        }
                                                        else
                                                        {
                                                            <button class="forward"
                                                                    title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    }
                                                </li>
                                            }
                                            <li>
                                                @if (Model.DocumentStatus == "D" || Model.DocumentStatus == "F")
                                                {
                                                    if (ViewBag.Approve == "Y")
                                                    {
                                                        if (ViewBag.AppLevel.Rows.Count > 0)
                                                        {
                                                            <button class="approve"
                                                                    title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="Btn_Approve" name="Command" value="Approve"></button>
                                                        }
                                                        else
                                                        {
                                                            <button class="approve"
                                                                    title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <button class="approve"
                                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Approve" name="Command" value="Approve"></button>
                                                    }
                                                }
                                                else
                                                {
                                                    <button class="approve"
                                                            title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                }
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="Btn_Workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false" name="Command" value="Workflow"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147005")
                                                    {
                                                        <li>
                                                            <button class="print"
                                                                    title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="email_tool"
                                                        title="@Resource.Email" disabled style="filter: grayscale(100%)" type="button" value="Mail" name="Command" id="Btn_Mail" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false"></button>
                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnApprove":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105101147004")
                                                    {
                                                        <li>
                                                            <button class="delete"
                                                                    title="@Resource.Delete" disabled style="filter: grayscale(100%)" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" onclick="return InsertSPIDetails()" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                if (Model.DocumentStatus == "A")
                                                {
                                                    <li>
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    </li>
                                                }
                                                else
                                                {
                                                    <li>
                                                        <button class="forward"
                                                                title="@Resource.Forward" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    </li>
                                                }
                                            }
                                            @if (Model.DocumentStatus == "A")
                                            {
                                                <li>
                                                    <button class="approve"
                                                            title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                </li>
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="approve"
                                                            title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                </li>
                                            }
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" disabled style="filter: grayscale(100%)" type="submit" id="btn_workflow" name="Command" value="Workflow"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105101147005")
                                                    {
                                                        <li>
                                                            <button class="print"
                                                                    title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print" disabled></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="email_tool"
                                                        title="@Resource.Email" disabled style="filter: grayscale(100%)" type="button" value="Mail" name="Command" id="Btn_Mail" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false"></button>
                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                }

                            }
                        </div>
                        <div class="clearfix"></div>
                        <div class="x_title pad_mar ">
                            <div class="col-md-12 col-sm-12 icon_tool ">
                                <!--<span>Collapsible / Accordion </span>-->
                                <div class="approved_by">
                                    <ul>
                                        <li><span>@Resource.CreatedBy<br><b>@Html.DisplayFor(model => model.CreatedBy)</b></span></li>
                                        <li><span>@Resource.Createdon<br><b>@Html.DisplayFor(model => model.Createdon)</b></span></li>
                                        <li><span>@Resource.ApprovedBy<br><b>@Html.DisplayFor(model => model.ApprovedBy)</b></span></li>
                                        <li><span>@Resource.ApprovedOn<br><b>@Html.DisplayFor(model => model.ApprovedOn)</b></span></li>
                                        <li><span>@Resource.AmendedBy<br><b>@Html.DisplayFor(model => model.AmendedBy)</b></span></li>
                                        <li><span>@Resource.AmendedOn<br><b>@Html.DisplayFor(model => model.AmendedOn)</b></span></li>
                                        <li><span>@Resource.Status<br><b>@Html.DisplayFor(model => model.Status_name)</b></span></li>
                                        <li><b>@Html.HiddenFor(model => model.doc_status, new { @id = "hfPIStatus" })</b></li>
                                    </ul>
                                    @if (Disable)
                                    {
                                        <input id="ForDisableOCDlt" value="Disable" hidden />
                                    }
                                    else
                                    {
                                        <input id="ForDisableOCDlt" value="Enable" hidden />
                                    }
                                </div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12 ">
                <div class="x_panel mar_pad1 ">
                    <div class="x_content mar_pad1">
                        <article class="panel-group bs-accordion" id="accordion" role="tablist" aria-multiselectable="true">
                            <section class="panel panel-default">
                                <div class="panel-heading" role="tab" id="headingOne">
                                    <h4 class="panel-title">  <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne"> @Resource.InvoiceDetail<span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a></h4>
                                </div>
                                <div id="collapseOne" class="panel-collapse in collapse show" role="tabpanel" aria-labelledby="headingOne" style="">
                                    <div class="panel-body">
                                        <div class="col-md-12 pr-0">
                                            <p class="po col-md-9 col-sm-12">
                                                <label class="col-form-label label-align" style="padding-right:10px;">Invoice Type</label>
                                                @if (Disable)
                                                {
                                                    <span>@Resource.Domestic</span> @Html.RadioButtonFor(model => model.OrderType, "D", new { @id = "Domestic", @checked = "checked", onclick = "GetInvoiceTypeSupplier()", Disabled = "Disable" })
                                                    <span>@Resource.Import</span> @Html.RadioButtonFor(model => model.OrderType, "I", new { @id = "Import", onclick = "GetInvoiceTypeSupplier()", Disabled = "Disable" })
                                                }
                                                else
                                                {
                                                    <span>@Resource.Domestic</span> @Html.RadioButtonFor(model => model.OrderType, "D", new { @id = "Domestic", @checked = "checked", onclick = "GetInvoiceTypeSupplier()", Disabled = "Disable" })
                                                    <span>@Resource.Import</span> @Html.RadioButtonFor(model => model.OrderType, "I", new { @id = "Import", onclick = "GetInvoiceTypeSupplier()", Disabled = "Disable" })
                                                }
                                                @Html.HiddenFor(model => model.OrderType, new { @id = "HdnSuppType" })
                                            </p>
                                            <div class="col-md-3 col-sm-12 no-padding float-right">
                                                <div class="custom-control custom-switch col-md-7 col-sm-12">
                                                    @Html.CheckBoxFor(model => model.RCMApplicable, new { @class = "custom-control-input  margin-switch", @id = "RCMApplicable", onclick = "CheckRCMApplicable()", @disabled = "disabled" })
                                                    <label class="custom-control-label " for=""> @Resource.RCM @Resource.Applicable</label>
                                                </div>
                                                <div class="col-md-5 col-sm-12 no-padding">
                                                    <div class="custom-control custom-switch margin5">
                                                        @*<input class="js-switch" data-val="true" data-val-required="" id="Cancelled" name="CancelFlag" type="checkbox" value="true" data-switchery="true" disabled=@Disable>*@
                                                        @if ((Model.DocumentStatus == "A") && Model.Command == "Edit")
                                                        {
                                                            @Html.CheckBoxFor(model => model.CancelFlag, new { @class = "js-switch", @id = "Cancelled", onchange = "CheckedCancelled()" })
                                                        }
                                                        else
                                                        {
                                                            @Html.CheckBoxFor(model => model.CancelFlag, new { @class = "js-switch", @id = "Cancelled", @disabled = "disabled" })
                                                        }
                                                        @Resource.Cancelled
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-55 col-sm-12 ">
                                            <label class="col-form-label label-align">@Resource.Supplementary  @Resource.InvoiceNumber</label>
                                            @Html.TextBoxFor(model => model.Inv_Nos, new { @readonly = "readonly", @id = "InvoiceNumber", @maxlength = "20", @class = "form-control", @placeholder = "InvoiceNumber" })
                                            @Html.HiddenFor(model => model.Inv_Nos, new { @id = "HdnDocNo_ForAttach" })
                                        </div>
                                        <div class="col-md-55 col-sm-12 pl-0">
                                            <label class="col-form-label label-align">@Resource.Supplementary @Resource.InvoiceDate<span class="required">*</span></label>
                                            @Html.TextBoxFor(model => model.SuppPI_inv_dt, "{0:yyyy-MM-dd}", new { @class = "form-control", @readonly = "readonly", @id = "SuppPIInv_date", type = "date" })
                                            @Html.HiddenFor(model => model.SuppPI_inv_dt, new { @id = "SuppInv_date" })
                                        </div>
                                        <div class="col-md-55 col-sm-12 pl-0">
                                            <label class="col-form-label label-align">@Resource.SupplierName <span class="required">*</span></label>
                                            @if (Disable)
                                            {
                                                @Html.DropDownListFor(model => model.SuppPI_SuppID, new SelectList(Model.SupplierNameList, "supp_id", "supp_name"), new { @class = "form-control", id = "SupplierName", disabled = "disabled" })
                                            }
                                            else
                                            {
                                                if (Model.SuppPI_SuppID == null)
                                                {
                                                    @Html.DropDownListFor(model => model.SuppPI_SuppID, new SelectList(Model.SupplierNameList, "supp_id", "supp_name"), new { @class = "form-control", id = "SupplierName", onchange = "OnChangeSupplier(this, document.getElementById('HdnSuppType').value)" })
                                                }
                                                else
                                                {
                                                    @Html.DropDownListFor(model => model.SuppPI_SuppID, new SelectList(Model.SupplierNameList, "supp_id", "supp_name"), new { @class = "form-control", id = "SupplierName", disabled = "disabled" })

                                                }
                                            }
                                            <input type="hidden" id="SuppNameList" value='@Url.Action("GetAutoCompleteSearchSuppList", "SupplementaryPurchaseInvoice")' />
                                            @Html.HiddenFor(model => model.SuppPI_SuppID, new { @id = "Hdn_PInvSuppId" })
                                            @Html.HiddenFor(model => model.SuppPI_SuppName, new { @id = "Hdn_PInvSuppName" })
                                            @Html.HiddenFor(model => model.Supp_Acc_Id, new { @id = "supp_acc_id" })
                                            @Html.HiddenFor(model => model.Hd_GstType, new { @id = "Hd_GstType" })
                                            @Html.HiddenFor(model => model.Hd_GstCat, new { @id = "Hd_GstCat" })
                                            @Html.HiddenFor(model => model.SuppTdsApplicable, new { @id = "Hd_tdsapplicable" })
                                            <span id="SpanSuppNameErrorMsg" class="error_message"></span>
                                        </div>
                                        <div class="col-md-55 col-sm-12 pl-0">
                                            <div class="col-md-11 col-sm-12 no-padding">
                                                <label class="col-form-label label-align">
                                                    @Resource.Address <span class="required" id="Rqrdaddr" style="display:none;">*</span>
                                                </label>
                                                @Html.TextAreaFor(model => model.Address, new { @id = "Address", @class = "form-control remarksmessage", @maxlength = "100", @name = "message", @placeholder = @Resource.Address, @readonly = "readonly" })
                                                @Html.ValidationMessageFor(model => model.Address, String.Empty, new { @style = "color:red;!important", @id = "SpanSuppAddrErrorMsg" })

                                                @Html.HiddenFor(model => model.bill_add_id, new { @id = "bill_add_id" })
                                                @Html.HiddenFor(model => model.Ship_Gst_number, new { @id = "ship_add_gstNo" })
                                                @Html.HiddenFor(model => model.Ship_StateCode, new { @id = "Ship_StateCode" })
                                                <input hidden id="hdbs_curr" />
                                            </div>

                                            <div class="col-sm-1 margin28 i_Icon">
                                                <button type="button" id="AddInfoBtnIcon" class="calculator" onclick="OnClickbillingAddressIconBtn(event);" data-toggle="modal" data-target="#AddressInfo" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.AddressInformation">  </button>
                                            </div>
                                        </div>
                                        <div class="clear"></div>
                                        <div class="col-md-55 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.BillNumber <span class="required">*</span></label>
                                            @if (Disable)
                                            {
                                                @Html.TextBoxFor(model => model.bill_no, new { @id = "Bill_No", @maxlength = "20", @class = "form-control", @placeholder = "Bill Number", @type = "TextBox", disabled = "disabled" })
                                            }
                                            else
                                            {

                                                if (Model.bill_no == null)
                                                {
                                                    @Html.TextBoxFor(model => model.bill_no, new { @id = "Bill_No", @maxlength = "20", @class = "form-control", @placeholder = "Bill Number", @type = "TextBox", @onkeyup = "OnchangeBillNumber()", @onchange = "OnchangeBillNumber()" })
                                                }
                                                else
                                                {
                                                    @Html.TextBoxFor(model => model.bill_no, new { @id = "Bill_No", @maxlength = "20", @class = "form-control", @placeholder = "Bill Number", @type = "TextBox", disabled = "disabled" })

                                                }
                                            }
                                            <span id="SpanBillNoErrorMsg" class="error_message"></span>
                                            <input id="hdnbillno" name="hdnbillno" type="hidden">
                                        </div>
                                        <div class="col-md-55 col-sm-12 pl-0">
                                            <label class="col-form-label label-align">@Resource.BillDate <span class="required">*</span></label>
                                            @if (Disable)
                                            {
                                                @Html.TextBoxFor(model => model.bill_date, new { @id = "Bill_Date", @maxlength = "20", @class = "form-control", @placeholder = "Bill Date", @type = "date", disabled = "disabled" })
                                            }
                                            else
                                            {
                                                if (Model.bill_date == null)
                                                {
                                                    @Html.TextBoxFor(model => model.bill_date, new { @id = "Bill_Date", @maxlength = "20", @class = "form-control", @placeholder = "Bill Date", @type = "date", @max = DateTime.Now.ToString("yyyy-MM-dd"), @onchange = "OnchangeBill_Date()" })
                                                }
                                                else
                                                {
                                                    @Html.TextBoxFor(model => model.bill_date, new { @id = "Bill_Date", @maxlength = "20", @class = "form-control", @placeholder = "Bill Date", @type = "date", @max = DateTime.Now.ToString("yyyy-MM-dd"), disabled = "disabled", @onkeyup = "OnchangeBill_Date()", @onchange = "OnchangeBill_Date()" })
                                                }
                                            }
                                            @Html.HiddenFor(model => model.bill_date, new { @id = "hdnbilldt" })
                                            <span id="SpanBillDateErrorMsg" class="error_message"></span>
                                        </div>

                                        <div class="col-md-55 col-sm-12 pl-0">
                                            <label class="col-form-label label-align">@Resource.Currency</label>
                                            @Html.DropDownListFor(model => model.SuppCurrency, new SelectList(Model.currancyLists, "curr_id", "curr_name"), new { @class = "form-control", @id = "ddlCurrency", @disabled = "disabled" })
                                            @Html.HiddenFor(m => m.SuppCurrency, new { @id = "Hdn_ddlCurrency" })

                                        </div>
                                        <div class="col-md-55 col-sm-12 pl-0">
                                            <label class="col-form-label label-align">@Resource.ExchangeRate</label>
                                            @Html.TextBoxFor(model => model.ExRate, new { @id = "conv_rate_tb", @maxlength = "5", @class = "form-control num_right", @readonly = "readonly", @placeholder = "0000.00", Disable })
                                        </div>
                                        <div class="col-md-55 col-sm-12 pl-0">
                                            <label class="col-form-label label-align">@Resource.EInvoice @Resource.Number</label>
                                            @if (Disable)
                                            {
                                                @Html.TextBoxFor(model => model.EInvoive, new { @id = "EInvoiceNo", @maxlength = "100", @class = "form-control num_right", @placeholder = @Resource.EInvoice + " " + @Resource.Number, @disabled = "disabled", @readonly = "readonly" })
                                            }
                                            else
                                            {

                                                @Html.TextBoxFor(model => model.EInvoive, new { @id = "EInvoiceNo", @maxlength = "100", @class = "form-control num_right", @placeholder = @Resource.EInvoice + " " + @Resource.Number })
                                            }
                                        </div>
                                        <div class="col-md-55 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.EWB @Resource.Number</label>
                                            @if (Disable)
                                            {
                                                @Html.TextBoxFor(model => model.EWBNNumber, new { @id = "EWBNNumber", @maxlength = "50", @class = "form-control num_right", @placeholder = @Resource.EWB + " " + @Resource.Number, @disabled = "disabled", @readonly = "readonly" })
                                            }
                                            else
                                            {
                                                @Html.TextBoxFor(model => model.EWBNNumber, new { @id = "EWBNNumber", @maxlength = "50", @class = "form-control num_right", @placeholder = @Resource.EWB + " " + @Resource.Number, })
                                            }



                                        </div>
                                        <div class="col-md-55 col-sm-12 pl-0">
                                            <label class="col-form-label label-align" title="Base Unit Of Measure">@Resource.remarks</label>
                                            @if (Disable)
                                            {
                                                @Html.TextBoxFor(model => model.remarks, new { @id = "remarks", @maxlength = "200", @class = "form-control num_right", @placeholder = @Resource.remarks, @disabled = "disabled" })
                                            }
                                            else
                                            {
                                                @Html.TextBoxFor(model => model.remarks, new { @id = "remarks", @maxlength = "200", @class = "form-control num_right", @placeholder = @Resource.remarks })
                                            }
                                        </div>
                                        <div class="col-md-12 col-sm-12">
                                            <div class="col-md-12 col-sm-12 border mt-3 pb-2">
                                                <div class="col-md-2 col-sm-12 pl-0">
                                                    <label class="col-form-label label-align">@Resource.InvoiceNumber<span class="required">*</span></label>
                                                    @if (Disable)
                                                    {
                                                        @Html.DropDownListFor(model => model.Purchaseinv_no, new SelectList(Model.PurchaseInvoiceList, "Invdt", "InvNo", "InvNo"), new { @class = "form-control", id = "ddlPurchaseinv_no", disabled = "disabled" })
                                                    }
                                                    else
                                                    {
                                                        if (Model.Purchaseinv_no == null)
                                                        {
                                                            @Html.DropDownListFor(model => model.Purchaseinv_no, new SelectList(Model.PurchaseInvoiceList, "Invdt", "InvNo", "InvNo"), new { @class = "form-control", id = "ddlPurchaseinv_no", onchange = "ddlPurchaseinv_noSelect(this, document.getElementById('HdnSuppType').value)" })
                                                        }
                                                        else
                                                        {

                                                            @Html.DropDownListFor(model => model.Purchaseinv_no, new SelectList(Model.PurchaseInvoiceList, "Invdt", "InvNo", "InvNo"), new { @class = "form-control", id = "ddlPurchaseinv_no", disabled = "disabled" })
                                                        }
                                                    }
                                                    <input type="hidden" id="Purchaseinv_noList" value='@Url.Action("GetAutoCompleteSearchSuppList", "SupplementaryPurchaseInvoice")' />
                                                    <input type="hidden" id="PuchaseInvoiceList" />
                                                    @Html.HiddenFor(model => model.Purchaseinv_no, new { @id = "Hdn_PInvNo" })
                                                    <span id="SpanPInvoiceErrorMsg" class="error_message"></span>
                                                </div>

                                                <div class="col-md-2 col-sm-12 pl-0">

                                                    <label class="col-form-label label-align">@Resource.InvoiceDate</label>
                                                    @Html.TextBoxFor(model => model.Inv_Dt1, new
                                               {
                                                   @id = "Inv_date",
                                                   @class = "form-control",
                                                   @readonly = "readonly",
                                                   Type = "date"
                                               })
                                                    <input hidden="hidden" value="@Model.Inv_Dt1" />
                                                </div>
                                                <div class="col-md-2 col-sm-12 pl-0">
                                                    <label class="col-form-label label-align">@Resource.GRNNumber</label>
                                                    @Html.TextBoxFor(model => model.GRNNumber, new { @id = "GoodReceiptNoteNo", @class = "form-control ", @readonly = "readonly" })
                                                </div>
                                                <div class="col-md-2 col-sm-12 pl-0">
                                                    <label class="col-form-label label-align">@Resource.GRNDate</label>
                                                    @*@Html.TextBoxFor(model => model.GRNDate, new { @id = "GRN_Date", @class = "form-control", @readonly = "readonly", Type = "date" })*@

                                                    @Html.TextBoxFor(model => model.GRNDate, new
                                               {
                                                   @id = "GRN_Date",
                                                   @class = "form-control",
                                                   @readonly = "readonly",
                                                   Type = "date"
                                               })
                                                </div>
                                                <div class="col-md-2 col-sm-12 pl-0">
                                                    <label class="col-form-label label-align">@Resource.BillNumber</label>
                                                    @Html.TextBoxFor(model => model.PurchaseInv_bill_no, new { @id = "PIBill_No", @class = "form-control", @readonly = "readonly" })
                                                    <span id="SpanBillNoErrorMsg" class="error_message"></span>
                                                    <input id="hdnbillno" name="hdnbillno" type="hidden" value="">
                                                </div>
                                                <div class="col-md-2 col-sm-12 pl-0">
                                                    <div class="col-md-10 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align">@Resource.BillDate</label>
                                                        @Html.TextBoxFor(model => model.PurchaseInv_bill_dt, new { @id = "PIBill_Date", @class = "form-control", @readonly = "readonly", Type = "date" })
                                                        <span id="SpanBillDateErrorMsg" class="error_message"></span>
                                                        <input id="hdnbilldt" name="hdnbilldt" type="hidden" value="">
                                                    </div>
                                                    <div class="col-md-2 col-sm-12 margin25 pl-0" id="AddQt">

                                                        @if (!Disable && Model.BtnName == "BtnAddNew")
                                                        {
                                                            <div class="plus_icon1">
                                                                <i class="fa fa-plus" onclick="AddItemDetail()" title="@Resource.PopulateItemDetail"></i>
                                                            </div>
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="clear"></div>
                                        <div class="card-box table-responsive dy_table">
                                            <div class="col-md-12">
                                                <div class="price_item_detail">
                                                    <div class="tableFixHead height30VH">
                                                        <h2>@Resource.ItemDetail</h2>
                                                        <table id="POInvItmDetailsTbl" class="mt-3  table table-bordered width3200 itmfrz">
                                                            <thead>
                                                                <tr class="headings">
                                                                    <th width="2%">@Resource.SrNo</th>
                                                                    <th width="9%" class="itmStick">@Resource.Item <br /> @Resource.Name</th>
                                                                    <th width="2%" title="@Resource.UnitOfMeasure">@Resource.UOM</th>
                                                                    <th width="4%">@Resource.Invoice <br /> @Resource.Quantity</th>
                                                                    <th width="3%">@Resource.Rate</th>
                                                                    <th width="3%">@Resource.Value <br /> @Resource.InSpecific</th>
                                                                    <th width="4%">@Resource.Value  <br /> @Resource.InBase</th>
                                                                    <th width="4%">@Resource.Difference @Resource.Value</th>
                                                                    <th width="2%">@Resource.TaxExempted</th>
                                                                    @if (ViewBag.GstApplicable == "Y")
                                                                    {
                                                                        <th width="2%">@Resource.Manual @Resource.GST</th>
                                                                        <th width="2%">@Resource.ClaimITC</th>
                                                                    }
                                                                    <th width="4%">@Resource.Tax <br /> @Resource.Amount</th>
                                                                    <th width="4%">@Resource.Difference @Resource.Tax @Resource.Amount</th>
                                                                    <th width="4%"> @Resource.Tax <br />  @Resource.Recoverable</th>
                                                                    <th width="4%"> @Resource.Difference @Resource.Tax @Resource.Recoverable </th>
                                                                    <th width="6%"> @Resource.TaxAmountNonRecoverable</th>
                                                                    <th width="6%"> @Resource.Difference @Resource.TaxAmountNonRecoverable</th>
                                                                    <th width="4%">@Resource.Other <br /> @Resource.Charges</th>
                                                                    <th width="4%">@Resource.Difference @Resource.Other <br /> @Resource.Charges</th>
                                                                    <th width="5%">@Resource.Other  @Resource.Charges <br />  @Resource.ThirdParty1</th>
                                                                    <th width="5%">@Resource.Difference  @Resource.Other <br /> @Resource.Charges @Resource.ThirdParty1</th>
                                                                    <th width="4%">@Resource.NetValue <br /> @Resource.InBase</th>
                                                                    <th width="5%">@Resource.Difference @Resource.NetValue <br /> @Resource.InBase</th>
                                                                    <th width="4%">@Resource.LandedCostPerPiece</th>
                                                                    <th width="6%">@Resource.Difference  <br /> @Resource.LandedCostPerPiece</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @if ((Model.DocumentStatus != "D") || Disable)
                                                                {
                                                                    var dataTable = ViewBag.ItemDetails as System.Data.DataTable;
                                                                    var filteredPairs = new List<(System.Data.DataRow RRow, System.Data.DataRow PRow)>();
                                                                    var rowIdx = 0;



                                                                    if (dataTable != null)
                                                                    {
                                                                        foreach (System.Data.DataRow Row in ViewBag.ItemDetails.Rows)
                                                                        {
                                                                            //var subitmDisable = "";
                                                                            if (Row["sub_item"].ToString() != "Y")
                                                                            {
                                                                                subitmDisable = "disabled";
                                                                            }
                                                                        }
                                                                        var grouped = dataTable.AsEnumerable()
                                                                        .Select(row => new
                                                                        {
                                                                            BaseId = row["item_id"].ToString().TrimEnd('P', 'R'),
                                                                            Row = row,
                                                                            Suffix = row["item_id"].ToString().Last().ToString()
                                                                        })
                                                                        .GroupBy(x => x.BaseId)
                                                                        .Where(g => g.Any(x => x.Suffix == "R") && g.Any(x => x.Suffix == "P"))
                                                                        .ToList();

                                                                        foreach (var group in grouped)
                                                                        {
                                                                            var rRow = group.FirstOrDefault(x => x.Suffix == "R")?.Row;
                                                                            var pRow = group.FirstOrDefault(x => x.Suffix == "P")?.Row;

                                                                            if (rRow != null && pRow != null)
                                                                            {
                                                                                filteredPairs.Add((rRow, pRow));
                                                                            }
                                                                        }
                                                                    }

                                                                    //var
                                                                    rowIdx = 0;

                                                                    foreach (var pair in filteredPairs)
                                                                    {
                                                                        var R = pair.RRow;
                                                                        var P = pair.PRow;
                                                                        rowIdx++;
                                                                        <tr class="@(rowIdx % 2 == 0 ? "even" : "odd")">
                                                                            <td class="sr_padding" id="srno" rowspan="2" valign="middle" style="vertical-align:middle">@rowIdx</td>
                                                                            <td hidden rowspan="2" valign="middle" style="vertical-align:middle">
                                                                                <input id="TxtGrnNo" class="form-control" autocomplete="off" type="text" value="@R["GRNNo"].ToString()" name="GrnNo" placeholder="GRN No" disabled>
                                                                            </td>
                                                                            <td hidden rowspan="2" valign="middle" style="vertical-align:middle">
                                                                                <input id="TxtGrnDate" class="form-control" autocomplete="off" type="text" value="grdate" name="GrnNo" placeholder="GRN Date" disabled>
                                                                                <input type="hidden" id="hfGRNDate" value="@R["GRNdt"].ToString()" />
                                                                            </td>
                                                                            <td rowspan="2" valign="middle" class='ItmNameBreak itmStick tditemfrz' style="vertical-align:middle">
                                                                                <div class=" col-sm-10 no-padding">
                                                                                    <input id="TxtItemName" class="form-control time" autocomplete="off" type="text" name="" value="@R["item_name"].ToString()" disabled>
                                                                                </div>
                                                                                <div class="col-sm-2 no-padding">
                                                                                    <div class="col-sm-5 i_Icon">
                                                                                        <button type="button" class="calculator item_pop" onclick="OnClickIconBtn(event);" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.ItemInformation">  </button>
                                                                                    </div>
                                                                                    <div class="col-sm-7"><button type="button" id="SupplierInformation" class="calculator" onclick="OnClickSupplierInfoIconBtn(event);" data-toggle="modal" data-target="#SupplierInformation" data-backdrop="static" data-keyboard="false"> <i class="fa fa-user" aria-hidden="true" title="@Resource.SupplierInformation}"></i> </button></div>
                                                                                </div>
                                                                            </td>
                                                                            <td rowspan="2" valign="middle" style="vertical-align:middle">
                                                                                <input id="TxtUOM" class="form-control" autocomplete="off" type="text" name="UOM" value="@R["uom_alias"].ToString()" onblur="this.placeholder='UOM'" disabled>
                                                                                <input type="hidden" id="hfUOMID" value="@R["uom_id"].ToString()" />
                                                                                <input id="ItemHsnCode" value="@R["HSN_code"].ToString()" type="hidden" />
                                                                                <input id="ItemtaxTmplt" value="@R["uom_id"].ToString()" type="hidden" />
                                                                                <input type="hidden" id="hdnItemType" value="@R["uom_id"].ToString()" />
                                                                                <input type="hidden" id="ForDisable" value="Disable" />
                                                                                <input type="hidden" id="hdnSrno" value="@R" />
                                                                            </td>

                                                                            <td rowspan="2" valign="middle" style="vertical-align:middle">
                                                                                <div class="col-sm-9 num_right no-padding">
                                                                                    <input id="TxtReceivedQuantity" class="form-control num_right" autocomplete="off" type="text" name="ReceivedQuantity" value="@R["inv_qty"]" placeholder="0000.00" disabled>
                                                                                </div>
                                                                                <div class=" col-sm-3 no-padding">
                                                                                    <div class="col-sm-7 i_Icon" id="div_SubItemReceivedQty">
                                                                                        <button type="button" id="SubItemReceivedQty" @subitmDisable class="calculator subItmImg" onclick="return SubItemDetailsPopUp('Quantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                                    </div>
                                                                                </div>
                                                                                <span id="TxtReceivedQuantity_Error" class="error-message is-visible"></span>
                                                                            </td>
                                                                            <td>
                                                                                <div class="lpo_form">
                                                                                    <input id="@($"TxtRate{rowIdx}")" class="form-control num_right" type="text" name="Rate" placeholder="0000.00" value="@R["item_rate"]" maxlength="10" autocomplete="off" disabled>
                                                                                    @*<input id=TxtRate@rowIdx class="form-control num_right" type="text" name="Rate" placeholder="0000.00" value="@R["item_rate"]" maxlength="10" autocomplete="off" disabled>*@
                                                                                    <span id="@($"TxtRate_Error{rowIdx}")" class="error-message is-visible"></span>
                                                                                    <input type="hidden" id="hfItemID" value="@R["item_id"]" />
                                                                                    <input type="hidden" id="hfItemID_SubItems" value="@R["item_id"]" />
                                                                                    <input type="hidden" id="hdn_item_gl_acc" value="@R["item_acc_id"]" />
                                                                                    <input hidden type="text" id="sub_item" value="" />
                                                                                    <input hidden type="text" id="item_disc_val" value="0" />
                                                                                    <input type="hidden" id="hfSNo" value="@rowIdx" />
                                                                                    <input type="hidden" id="hfDataFor" value="R" />
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemGrossValue" class="form-control num_right" autocomplete="off" type="text" name="GrossValue" value="@R["item_gr_val_sp"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemGrossValueInBase" class="form-control num_right" autocomplete="off" type="text" name="GrossValueInBase" value="@R["item_gr_val_bs"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemDiffValue" class="form-control num_right" autocomplete="off" type="text" name="TxtItemDiffValue" value="@R["item_gr_val_bs_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <div class="custom-control custom-switch sample_issue">
                                                                                    @if (R["tax_expted"].ToString() == "Y")
                                                                                    {
                                                                                        <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="TaxExempted">
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="checkbox" disabled class="custom-control-input margin-switch" id="TaxExempted">
                                                                                    }
                                                                                    <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                </div>
                                                                            </td>
                                                                            @if (ViewBag.GstApplicable == "Y")
                                                                            {
                                                                                <td class="qt_to">
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        @if (R["manual_gst"].ToString() == "Y")
                                                                                        {
                                                                                            <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="ManualGST">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="checkbox" disabled class="custom-control-input margin-switch" id="ManualGST">
                                                                                        }
                                                                                        <label class="custom-control-label" disabled style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                                <td class="qt_to">
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        @if (R["claim_itc"].ToString() == "Y")
                                                                                        {
                                                                                            <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="ClaimITC">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="checkbox" disabled class="custom-control-input margin-switch" id="ClaimITC">
                                                                                        }
                                                                                        <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                            }
                                                                            <td>
                                                                                <div class=" col-sm-10 num_right no-padding">
                                                                                    <input id="Txtitem_tax_amt" class="form-control num_right" autocomplete="off" type="text" value="@R["item_tax_amt"]" name="item_tax_amt" placeholder="0000.00" disabled>
                                                                                </div>
                                                                                <div class=" col-sm-2 num_right no-padding">
                                                                                    <button type="button" class="calculator item_pop" id="BtnTxtCalculation" data-toggle="modal" onclick="OnClickTaxCalBtn(event, 'R')" data-target="#ItemCalculate" data-backdrop="static" data-keyboard="false"><i class="fa fa-calculator" aria-hidden="true" title=""></i></button>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemTaxDiffValue" class="form-control num_right" autocomplete="off" type="text" name="TxtItemTaxDiffValue" value="@R["item_tax_amt_diff"]" placeholder="0000.00" disabled>
                                                                            </td>


                                                                            <td>
                                                                                <input id="TxtItemTaxRec" class="form-control num_right" autocomplete="off" type="text" name="" value="@R["item_tax_recov"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemTaxRecDiff" class="form-control num_right" autocomplete="off" type="text" name="" value="@R["item_tax_recov_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemTaxNonRec" class="form-control num_right" autocomplete="off" type="text" name="" value="@R["item_tax_nrecov"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemTaxNonRecDiff" class="form-control num_right" autocomplete="off" type="text" name="" value="@R["item_tax_nrecov_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtOtherCharge" class="form-control num_right" autocomplete="off" type="text" value="@R["item_oc_amt_self"]" name="OtherCharge" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtOtherChargeDiffValue" class="form-control num_right" autocomplete="off" type="text" name="TxtOtherChargeDiffValue" value="@R["item_oc_amt_self_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtOtherChargeTP" class="form-control num_right" autocomplete="off" type="text" value="@R["item_oc_amt_tp"]" name="TxtOtherChargeTP" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td hidden style="display:none;"></td>
                                                                            <td>
                                                                                <input id="TxtOtherChargeTPDiff" class="form-control num_right" autocomplete="off" type="text" value="@R["item_oc_amt_tp_diff"]" name="" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtNetValueInBase" class="form-control num_right" autocomplete="off" type="text" value="@R["item_net_val_bs"]" name="NetValueInBase" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtNetDiffValueInBase" class="form-control num_right" autocomplete="off" type="text" value="@R["item_net_val_bs_diff"]" name="TxtNetDiffValueInBase" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtLandedCostPerPc" class="form-control num_right" autocomplete="off" type="text" name="TxtLandedCostPerPc" value="@R["item_landed_cost"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtLandedCostPerPcDiffValue" class="form-control num_right" autocomplete="off" type="text" name="TxtLandedCostPerPcDiffValue" value="@R["item_landed_cost_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                        </tr>
                                                                        @*<tr id="R1">*@
                                                                        <tr id="@($"R{rowIdx}")">
                                                                            <td>
                                                                                <div class="lpo_form">

                                                                                    <input id="@($"TxtRatePrev{rowIdx}")" class="form-control num_right" autocomplete="" type="text" name="RatePrev" placeholder="0000.00" value="@P["item_rate"]" disabled>
                                                                                    <span id="TxtRatePrev_Error" class="error-message is-visible"></span>
                                                                                    <input hidden type="text" id="item_disc_valPrev" value="0" />
                                                                                    <input type="hidden" id="hfSNo" value="@rowIdx" />
                                                                                    <input type="hidden" id="hfItemID" value="@P["item_id"]" />
                                                                                    <input type="hidden" id="hfDataFor" value="P" />
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemGrossValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemGrossValuePrev" value="@P["item_gr_val_sp"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemGrossValueInBasePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemGrossValueInBasePrev" value="@P["item_gr_val_bs"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemDiffValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemDiffValuePrev" value="@P["item_gr_val_bs_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <div class="custom-control custom-switch sample_issue">
                                                                                    @if (P["tax_expted"].ToString() == "Y")
                                                                                    {
                                                                                        <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="TaxExempted">
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="checkbox" disabled class="custom-control-input margin-switch" id="TaxExempted">
                                                                                    }
                                                                                    <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                </div>
                                                                            </td>
                                                                            @if (ViewBag.GstApplicable == "Y")
                                                                            {
                                                                                <td class="qt_to">
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        @if (P["manual_gst"].ToString() == "Y")
                                                                                        {
                                                                                            <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="ManualGST">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="checkbox" disabled class="custom-control-input margin-switch" id="ManualGST">
                                                                                        }
                                                                                        <label class="custom-control-label" disabled style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                                <td class="qt_to">
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        @if (P["claim_itc"].ToString() == "Y")
                                                                                        {
                                                                                            <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="ClaimITC">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="checkbox" disabled class="custom-control-input margin-switch" id="ClaimITC">
                                                                                        }
                                                                                        <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                            }
                                                                            <td class="qt_to">
                                                                                <div class=" col-sm-10 num_right no-padding">
                                                                                    <input id="Txtitem_tax_amtPrev" class="form-control num_right" autocomplete="off" type="text" value="@P["item_tax_amt"]" name="Txtitem_tax_amtPrev" placeholder="0000.00" disabled>
                                                                                </div>
                                                                                <div class=" col-sm-2 num_right no-padding">
                                                                                    <button type="button" class="calculator item_pop" id="BtnTxtCalculationPrev" data-toggle="modal" onclick="OnClickTaxCalBtn(event,'P')" data-target="#ItemCalculate" data-backdrop="static" data-keyboard="false"><i class="fa fa-calculator" aria-hidden="true" title=""></i></button>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemTaxDiffValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemTaxDiffValue" value="@P["item_tax_amt_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>

                                                                                <input id="TxtItemTaxRecPrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemTaxRecPrev" value="@P["item_tax_recov"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemTaxRecDiffPrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemTaxRecDiffPrev" value="@P["item_tax_recov_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemTaxNonRecPrev" class="form-control num_right" autocomplete="off" type="text" name="" value="@P["item_tax_nrecov"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtItemTaxNonRecDiffPrev" class="form-control num_right" autocomplete="off" type="text" name="" value="@P["item_tax_nrecov_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtOtherChargePrev" class="form-control num_right" autocomplete="off" type="text"
                                                                                       value="@P["item_oc_amt_self"]" name="TxtOtherChargePrev" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtOtherChargeDiffValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtOtherChargeDiffValue" value="@P["item_oc_amt_self_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtOtherChargeTPPrev" class="form-control num_right" autocomplete="off" type="text" value="@P["item_oc_amt_tp"]" name="TxtOtherChargePrev" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtOtherChargeTPPrevDiff" class="form-control num_right" autocomplete="off" type="text" value="0.00" name="TxtOtherChargePrev" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td hidden>
                                                                                <input id="TxtNetValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtNetValuePrev" placeholder="0000.00" disabled="" value="@P["item_net_val_bs"]">
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtNetValueInBasePrev" class="form-control num_right" autocomplete="off" type="text" value="@P["item_net_val_bs"]" name="TxtNetValueInBasePrev" placeholder="0000.00" disabled>
                                                                            </td>

                                                                            <td>
                                                                                <input id="TxtNetValueInBasePrevDiff" class="form-control num_right" autocomplete="off" type="text" value="@P["item_net_val_bs_diff"]" name="NetValueInBase" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtNetLandedPrev" class="form-control num_right" autocomplete="off" type="text" name="TxtNetLanded" value="@P["item_landed_cost"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                            <td>
                                                                                <input id="TxtNetLandedDiffValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtNetLandedDiffValue" value="@P["item_landed_cost_diff"]" placeholder="0000.00" disabled>
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (ViewBag.ItemDetails != null)
                                                                    {
                                                                        var rowIdx = 0;

                                                                        foreach (System.Data.DataRow Row in ViewBag.ItemDetails.Rows)
                                                                        {
                                                                            //var subitmDisable = "";
                                                                            if (Row["sub_item"].ToString() != "Y")
                                                                            {
                                                                                subitmDisable = "disabled";
                                                                            }
                                                                        }
                                                                        var dataTable = ViewBag.ItemDetails as System.Data.DataTable;
                                                                        var filteredPairs = new List
                                                                        <(System.Data.DataRow RRow, System.Data.DataRow PRow)>
                                                                            ();

                                                                        if (dataTable != null)
                                                                        {
                                                                            var grouped = dataTable.AsEnumerable()
                                                                            .Select(row => new
                                                                            {
                                                                                BaseId = row["item_id"].ToString().TrimEnd('P', 'R'),
                                                                                Row = row,
                                                                                Suffix = row["item_id"].ToString().Last().ToString()
                                                                            })
                                                                            .GroupBy(x => x.BaseId)
                                                                            .Where(g => g.Any(x => x.Suffix == "R") && g.Any(x => x.Suffix == "P"))
                                                                            .ToList();

                                                                            foreach (var group in grouped)
                                                                            {
                                                                                var rRow = group.FirstOrDefault(x => x.Suffix == "R")?.Row;
                                                                                var pRow = group.FirstOrDefault(x => x.Suffix == "P")?.Row;

                                                                                if (rRow != null && pRow != null)
                                                                                {
                                                                                    filteredPairs.Add((rRow, pRow));
                                                                                }
                                                                            }
                                                                        }

                                                                        //var rowIdx = 0;
                                                                        rowIdx = 0;

                                                                        foreach (var pair in filteredPairs)
                                                                        {
                                                                            var R = pair.RRow;
                                                                            var P = pair.PRow;
                                                                            rowIdx++;
                                                                            <tr class="@(rowIdx % 2 == 0 ? "even" : "odd")">
                                                                                <td class="sr_padding" id="srno" rowspan="2" valign="middle" style="vertical-align:middle">@rowIdx</td>
                                                                                <td hidden rowspan="2" valign="middle" style="vertical-align:middle">
                                                                                    <input id="TxtGrnNo" class="form-control" autocomplete="off" type="text" value="@R["GRNNo"].ToString()" name="GrnNo" placeholder="GRN No" disabled>
                                                                                </td>
                                                                                <td hidden rowspan="2" valign="middle" style="vertical-align:middle">
                                                                                    <input id="TxtGrnDate" class="form-control" autocomplete="off" type="text" value="grdate" name="GrnNo" placeholder="GRN Date" disabled>
                                                                                    <input type="hidden" id="hfGRNDate" value="@R["GRNdt"].ToString()" />
                                                                                </td>
                                                                                <td rowspan="2" valign="middle" class='ItmNameBreak itmStick tditemfrz' style="vertical-align:middle">
                                                                                    <div class=" col-sm-10 no-padding">
                                                                                        <input id="TxtItemName" class="form-control time" autocomplete="off" type="text" name="" value="@R["item_name"].ToString()" disabled>
                                                                                    </div>
                                                                                    <div class="col-sm-2 no-padding">
                                                                                        <div class="col-sm-5 i_Icon">
                                                                                            <button type="button" class="calculator item_pop" onclick="OnClickIconBtn(event);" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.ItemInformation">  </button>
                                                                                        </div>
                                                                                        <div class="col-sm-7"><button type="button" id="SupplierInformation" class="calculator" onclick="OnClickSupplierInfoIconBtn(event);" data-toggle="modal" data-target="#SupplierInformation" data-backdrop="static" data-keyboard="false"> <i class="fa fa-user" aria-hidden="true" title="@Resource.SupplierInformation}"></i> </button></div>
                                                                                    </div>
                                                                                </td>
                                                                                <td rowspan="2" valign="middle" style="vertical-align:middle">
                                                                                    <input id="TxtUOM" class="form-control" autocomplete="off" type="text" name="UOM" value="@R["uom_alias"].ToString()" onblur="this.placeholder='UOM'" disabled>
                                                                                    <input type="hidden" id="hfUOMID" value="@R["uom_id"].ToString()" />
                                                                                    <input id="ItemHsnCode" value="@R["HSN_code"].ToString()" type="hidden" />
                                                                                    <input id="ItemtaxTmplt" value="@R["uom_id"].ToString()" type="hidden" />
                                                                                    <input type="hidden" id="hdnItemType" value="@R["uom_id"].ToString()" />

                                                                                    <input type="hidden" id="hdnSrno" value="@R" />
                                                                                </td>

                                                                                <td rowspan="2" valign="middle" style="vertical-align:middle">
                                                                                    <div class="col-sm-8 num_right no-padding">
                                                                                        <input id="TxtReceivedQuantity" class="form-control num_right" autocomplete="off" type="text" name="ReceivedQuantity" value="@R["inv_qty"]" placeholder="0000.00" disabled>
                                                                                    </div>
                                                                                    <div class=" col-sm-4 no-padding">
                                                                                        <div class="col-sm-7 i_Icon" id="div_SubItemReceivedQty">
                                                                                            <button type="button" id="SubItemReceivedQty" @subitmDisable class="calculator subItmImg" onclick="return SubItemDetailsPopUp('Quantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                                        </div>
                                                                                    </div>
                                                                                    <span id="TxtReceivedQuantity_Error" class="error-message is-visible"></span>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="lpo_form">
                                                                                        <input id="@($"TxtRate{rowIdx}")" class="form-control num_right" onchange="OnChangeConsumbleItemPrice(event)" onkeypress="return QtyRateValueonly(this,event);" type="text" name="Rate" placeholder="0000.00" value="@R["item_rate"]" maxlength="10" autocomplete="off">

                                                                                        <span id="@($"TxtRate_Error{rowIdx}")" class="error-message is-visible"></span>
                                                                                        <input type="hidden" id="hfItemID" value="@R["item_id"]" />
                                                                                        <input type="hidden" id="hfItemID_SubItems" value="@R["item_id"]" />
                                                                                        <input type="hidden" id="hdn_item_gl_acc" value="@R["item_acc_id"]" />
                                                                                        <input hidden type="text" id="sub_item" value="" />
                                                                                        <input hidden type="text" id="item_disc_val" value="0" />
                                                                                        <input type="hidden" id="hfSNo" value="@rowIdx" />
                                                                                        <input type="hidden" id="hfDataFor" value="R" />
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemGrossValue" class="form-control num_right" autocomplete="off" type="text" name="GrossValue" value="@R["item_gr_val_sp"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemGrossValueInBase" class="form-control num_right" autocomplete="off" type="text" name="GrossValueInBase" value="@R["item_gr_val_bs"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemDiffValue" class="form-control num_right" autocomplete="off" type="text" name="TxtItemDiffValue" value="@R["item_gr_val_bs_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        @if (R["tax_expted"].ToString() == "Y")
                                                                                        {
                                                                                            <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="TaxExempted">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="checkbox" disabled class="custom-control-input margin-switch" id="TaxExempted">
                                                                                        }
                                                                                        <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                                @if (ViewBag.GstApplicable == "Y")
                                                                                {
                                                                                    <td class="qt_to">
                                                                                        <div class="custom-control custom-switch sample_issue">
                                                                                            @if (R["manual_gst"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="ManualGST">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" disabled class="custom-control-input margin-switch" id="ManualGST">
                                                                                            }
                                                                                            <label class="custom-control-label" disabled style="padding: 3px 0px;"> </label>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td class="qt_to">
                                                                                        <div class="custom-control custom-switch sample_issue">
                                                                                            @if (R["claim_itc"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="ClaimITC">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" disabled class="custom-control-input margin-switch" id="ClaimITC">
                                                                                            }
                                                                                            <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                        </div>
                                                                                    </td>
                                                                                }
                                                                                <td>
                                                                                    <div class=" col-sm-10 num_right no-padding">
                                                                                        <input id="Txtitem_tax_amt" class="form-control num_right" autocomplete="off" type="text" value="@R["item_tax_amt"]" name="item_tax_amt" placeholder="0000.00" disabled>
                                                                                    </div>
                                                                                    <div class=" col-sm-2 num_right no-padding">
                                                                                        <button type="button" class="calculator item_pop" id="BtnTxtCalculation" data-toggle="modal" onclick="OnClickTaxCalBtn(event, 'R')" data-target="#ItemCalculate" data-backdrop="static" data-keyboard="false"><i class="fa fa-calculator" aria-hidden="true" title=""></i></button>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemTaxDiffValue" class="form-control num_right" autocomplete="off" type="text" name="TxtItemTaxDiffValue" value="@R["item_tax_amt_diff"]" placeholder="0000.00" disabled>
                                                                                </td>


                                                                                <td>
                                                                                    <input id="TxtItemTaxRec" class="form-control num_right" autocomplete="off" type="text" name="" value="@R["item_tax_recov"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemTaxRecDiff" class="form-control num_right" autocomplete="off" type="text" name="" value="@R["item_tax_recov_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemTaxNonRec" class="form-control num_right" autocomplete="off" type="text" name="" value="@R["item_tax_nrecov"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemTaxNonRecDiff" class="form-control num_right" autocomplete="off" type="text" name="" value="@R["item_tax_nrecov_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtOtherCharge" class="form-control num_right" autocomplete="off" type="text" value="@R["item_oc_amt_self"]" name="OtherCharge" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtOtherChargeDiffValue" class="form-control num_right" autocomplete="off" type="text" name="TxtOtherChargeDiffValue" value="@R["item_oc_amt_self_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtOtherChargeTP" class="form-control num_right" autocomplete="off" type="text" value="@R["item_oc_amt_tp"]" name="TxtOtherChargeTP" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtOtherChargeTPDiff" class="form-control num_right" autocomplete="off" type="text" value="@R["item_oc_amt_tp_diff"]" name="TxtOtherChargeTP" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td hidden style="display:none;"></td>
                                                                                <td>
                                                                                    <input id="TxtNetValueInBase" class="form-control num_right" autocomplete="off" type="text" value="@R["item_net_val_bs"]" name="NetValueInBase" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtNetDiffValueInBase" class="form-control num_right" autocomplete="off" type="text" value="@R["item_net_val_bs_diff"]" name="TxtNetDiffValueInBase" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtLandedCostPerPc" class="form-control num_right" autocomplete="off" type="text" name="TxtLandedCostPerPc" value="@R["item_landed_cost"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtLandedCostPerPcDiffValue" class="form-control num_right" autocomplete="off" type="text" name="TxtLandedCostPerPcDiffValue" value="@R["item_landed_cost_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                            </tr>
                                                                            <tr id="@($"R{rowIdx}")">
                                                                                <td>
                                                                                    <div class="lpo_form">

                                                                                        <input id="@($"TxtRatePrev{rowIdx}")" class="form-control num_right" autocomplete="" type="text" name="RatePrev" placeholder="0000.00" value="@P["item_rate"]" disabled>
                                                                                        <span id="TxtRatePrev_Error" class="error-message is-visible"></span>
                                                                                        <input hidden type="text" id="item_disc_valPrev" value="0" />
                                                                                        <input type="hidden" id="hfSNo" value="@rowIdx" />
                                                                                        <input type="hidden" id="hfItemID" value="@P["item_id"]" />
                                                                                        <input type="hidden" id="hfDataFor" value="P" />
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemGrossValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemGrossValuePrev" value="@P["item_gr_val_sp"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemGrossValueInBasePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemGrossValueInBasePrev" value="@P["item_gr_val_bs"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemDiffValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemDiffValuePrev" value="@P["item_gr_val_bs_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        @if (P["tax_expted"].ToString() == "Y")
                                                                                        {
                                                                                            <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="TaxExempted">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input type="checkbox" disabled class="custom-control-input margin-switch" id="TaxExempted">
                                                                                        }
                                                                                        <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                                @if (ViewBag.GstApplicable == "Y")
                                                                                {
                                                                                    <td class="qt_to">
                                                                                        <div class="custom-control custom-switch sample_issue">
                                                                                            @if (P["manual_gst"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="ManualGST">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" disabled class="custom-control-input margin-switch" id="ManualGST">
                                                                                            }
                                                                                            <label class="custom-control-label" disabled style="padding: 3px 0px;"> </label>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td class="qt_to">
                                                                                        <div class="custom-control custom-switch sample_issue">
                                                                                            @if (P["claim_itc"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" disabled checked class="custom-control-input margin-switch" id="ClaimITC">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" disabled class="custom-control-input margin-switch" id="ClaimITC">
                                                                                            }
                                                                                            <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                        </div>
                                                                                    </td>
                                                                                }
                                                                                <td class="qt_to">
                                                                                    <div class=" col-sm-10 num_right no-padding">
                                                                                        <input id="Txtitem_tax_amtPrev" class="form-control num_right" autocomplete="off" type="text" value="@P["item_tax_amt"]" name="Txtitem_tax_amtPrev" placeholder="0000.00" disabled>
                                                                                    </div>
                                                                                    <div class=" col-sm-2 num_right no-padding">
                                                                                        <button type="button" class="calculator item_pop" id="BtnTxtCalculationPrev" data-toggle="modal" onclick="OnClickTaxCalBtn(event,'P')" data-target="#ItemCalculate" data-backdrop="static" data-keyboard="false"><i class="fa fa-calculator" aria-hidden="true" title=""></i></button>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemTaxDiffValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemTaxDiffValue" value="@P["item_tax_amt_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>

                                                                                    <input id="TxtItemTaxRecPrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemTaxRecPrev" value="@P["item_tax_recov"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemTaxRecDiffPrev" class="form-control num_right" autocomplete="off" type="text" name="TxtItemTaxRecDiffPrev" value="@P["item_tax_recov_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemTaxNonRecPrev" class="form-control num_right" autocomplete="off" type="text" name="" value="@P["item_tax_nrecov"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtItemTaxNonRecDiffPrev" class="form-control num_right" autocomplete="off" type="text" name="" value="@P["item_tax_nrecov_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtOtherChargePrev" class="form-control num_right" autocomplete="off" type="text"
                                                                                           value="@P["item_oc_amt_self"]" name="TxtOtherChargePrev" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtOtherChargeDiffValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtOtherChargeDiffValue" value="@P["item_oc_amt_self_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtOtherChargeTPPrev" class="form-control num_right" autocomplete="off" type="text" value="@P["item_oc_amt_tp"]" name="TxtOtherChargePrev" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtOtherChargeTPPrevDiff" class="form-control num_right" autocomplete="off" type="text" value="0.00" name="TxtOtherChargePrev" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td hidden>
                                                                                    <input id="TxtNetValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtNetValuePrev" placeholder="0000.00" disabled="" value="@P["item_net_val_bs"]">
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtNetValueInBasePrev" class="form-control num_right" autocomplete="off" type="text" value="@P["item_net_val_bs"]" name="TxtNetValueInBasePrev" placeholder="0000.00" disabled>
                                                                                </td>

                                                                                <td>
                                                                                    <input id="TxtNetValueInBasePrevDiff" class="form-control num_right" autocomplete="off" type="text" value="0.00" name="NetValueInBase" placeholder="0000.00" disabled="">
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtNetLandedPrev" class="form-control num_right" autocomplete="off" type="text" name="TxtNetLanded" value="@P["item_landed_cost"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                                <td>
                                                                                    <input id="TxtNetLandedDiffValuePrev" class="form-control num_right" autocomplete="off" type="text" name="TxtNetLandedDiffValue" value="@P["item_landed_cost_diff"]" placeholder="0000.00" disabled>
                                                                                </td>
                                                                            </tr>
                                                                        }
                                                                    }

                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div class="price_item_detail">
                                                    <div id="T_Table" class="sticky-table sticky-ltr-cells sb-container container-example1" style="max-height:200px;">
                                                        <table class="table table-bordered price_item_detail mt-2">
                                                            <thead>
                                                                <tr class="headings">
                                                                    <th width="7%" valign="middle" style="vertical-align:middle"> @Resource.Revised</th>
                                                                    <th class="right_aligh text_normal" width="8%">
                                                                        @Resource.Total @Resource.Value @Resource.InSpecific
                                                                        @Html.TextBoxFor(Model => Model.GrossValue, new { @id = "TxtGrossValue", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal" width="8%">
                                                                        @Resource.Total  @Resource.Value <br /> @Resource.InBase
                                                                        @Html.TextBoxFor(Model => Model.GrossValueInBase, new { @id = "TxtGrossValueInBase", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal" width="10%">
                                                                        @Resource.Total @Resource.TaxAmountRecoverable
                                                                        @Html.TextBoxFor(Model => Model.TaxAmountRecoverable, new { @id = "TaxAmountRecoverable", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal" width="10%">
                                                                        @Resource.Total @Resource.TaxAmountNonRecoverable
                                                                        @Html.TextBoxFor(Model => Model.TaxAmountNonRecoverable, new { @id = "TaxAmountNonRecoverable", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal" width="12%">
                                                                        @Resource.OtherCharges <br /> @Resource.WithThirdParty

                                                                        <div class="col-md-10 col-sm-12 pl-0">
                                                                            @Html.TextBoxFor(Model => Model.OtherCharges, new { @id = "TxtOtherCharges", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly", @value = "0.00" })
                                                                            @Html.HiddenFor(Model => Model.DocSuppOtherCharges, new { @id = "TxtDocSuppOtherCharges" })
                                                                            @Html.Hidden("TxtDocSuppOtherChargesRevised_Self", "", new { id = "TxtDocSuppOtherChargesRevised_Self" })

                                                                            @Html.HiddenFor(Model => Model.DocSuppOtherCharges_self, new { @id = "TxtDocSuppOtherCharges_self" })
                                                                            @Html.HiddenFor(Model => Model.DocSuppOtherChargesTP, new { @id = "TxtDocSuppOtherChargesTP" })
                                                                            @*@Html.HiddenFor(Model => Model.DocSuppOtherCharges, new { @id = "TxtDocSuppOtherChargesRevised" })
                                                                                @Html.HiddenFor(Model => Model.DocSuppOtherCharges, new { @id = "OCChargersSelf_Prev" })*@
                                                                            @Html.HiddenFor(Model => Model.DocSuppOtherChargesPrev, new { @id = "TxtDocSuppOtherChargesPrev" })
                                                                            @Html.HiddenFor(Model => Model.DocSuppOtherChargesPrevTP, new { @id = "TxtDocSuppOtherChargesPrevTP" })
                                                                        </div>
                                                                        <div class="col-md-2 col-sm-12 pt-2">
                                                                            @*@if (Disable)
                                                                                {
                                                                                    <button type="button" id="BtnOC_Amount" class="calculator_lso" data-toggle="modal" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;" disabled><i class="fa fa-calculator" aria-hidden="true" title="Other Charges Calculator"></i></button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <button type="button" id="BtnOC_Amount" class="calculator_lso" data-toggle="modal" onclick="setHiddenFieldValue('R');" data-target="#OtherChargesCalculator" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="Other Charges Calculator"></i></button>

                                                                                }*@
                                                                            <button type="button" id="BtnOC_Amount" class="calculator_lso" data-toggle="modal" onclick="setHiddenFieldValue('R');" data-target="#OtherChargesCalculator" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="Other Charges Calculator"></i></button>
                                                                        </div>

                                                                    </th>
                                                                    <th class="right_aligh text_normal" width="12%" hidden="">
                                                                        @Resource.Total @Resource.NetAmount @Resource.InSpecific
                                                                        @Html.TextBoxFor(Model => Model.NetAmount, new { @id = "NetOrderValueSpe", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal" width="23%">

                                                                        <div class="col-md-2 col-sm-12 no-padding text-left">@Resource.RoundOff</div>
                                                                        <div class="col-md-2 col-sm-12 no-padding text-left">
                                                                            <div class="custom-control custom-switch">
                                                                                @*@Html.CheckBoxFor(model => model.RoundOffFlag, new { @class = "js-switch", @id = "chk_roundoff", onchange = "click_chkroundoff()" })*@
                                                                                @if (Disable)
                                                                                {
                                                                                    @Html.CheckBoxFor(model => model.RoundOffFlag, new { @class = "js-switch", @id = "chk_roundoff", @disabled = "disabled" })
                                                                                }
                                                                                else
                                                                                {
                                                                                    @Html.CheckBoxFor(model => model.RoundOffFlag, new { @class = "js-switch", @id = "chk_roundoff", onchange = "click_chkroundoff()" })
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-12 no-padding">
                                                                            @if (Model.RoundOffFlag == true)
                                                                            {
                                                                                <div class="col-md-6 col-sm-12 no-padding" id="div_pchkbox">
                                                                                    <i class="fa fa-plus float-left pr-2 pt-1" aria-hidden="true"></i>
                                                                                    @if (Disable)
                                                                                    {
                                                                                        if (Model.pmflagval == "P")
                                                                                        {
                                                                                            <input class="float-left" type="radio" name="p_round" id="p_round" checked disabled value="P" style="height:20px;">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input class="float-left" type="radio" name="p_round" id="p_round" disabled value="P" style="height:20px;">
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (Model.pmflagval == "P")
                                                                                        {
                                                                                            <input class="float-left" type="radio" name="p_round" id="p_round" checked onchange="click_chkplusminus()" value="P" style="height:20px;">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input class="float-left" type="radio" name="p_round" id="p_round" onchange="click_chkplusminus()" value="P" style="height:20px;">
                                                                                        }
                                                                                    }
                                                                                </div>
                                                                                <div class="col-md-6 col-sm-12 no-padding" id="div_mchkbox">
                                                                                    <i class="fa fa-minus float-left pr-2 pt-1" aria-hidden="true"></i>
                                                                                    @if (Disable)
                                                                                    {
                                                                                        if (Model.pmflagval == "M")
                                                                                        {
                                                                                            <input class="float-left" type="radio" name="p_round" id="m_round" checked disabled value="M" style="height:20px;">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input class="float-left" type="radio" name="p_round" id="m_round" disabled value="M" style="height:20px;">
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (Model.pmflagval == "M")
                                                                                        {
                                                                                            <input class="float-left" type="radio" name="p_round" id="m_round" checked onchange="click_chkplusminus()" value="M" style="height:20px;">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input class="float-left" type="radio" name="p_round" id="m_round" onchange="click_chkplusminus()" value="M" style="height:20px;">
                                                                                        }
                                                                                    }
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <div class="col-md-6 col-sm-12 no-padding" id="div_pchkbox" style="display:none">
                                                                                    <i class="fa fa-plus float-left pr-2 pt-1" aria-hidden="true"></i>
                                                                                    @if (Disable)
                                                                                    {
                                                                                        <input class="float-left" type="radio" name="p_round" id="p_round" disabled value="P" style="height:20px;">

                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input class="float-left" type="radio" name="p_round" id="p_round" onchange="click_chkplusminus()" value="P" style="height:20px;">
                                                                                    }

                                                                                </div>
                                                                                <div class="col-md-6 col-sm-12 no-padding" id="div_mchkbox" style="display:none">
                                                                                    <i class="fa fa-minus float-left pr-2 pt-1" aria-hidden="true"></i>
                                                                                    @if (Disable)
                                                                                    {
                                                                                        <input class="float-left" type="radio" name="p_round" id="m_round" disabled value="M" style="height:20px;">
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input class="float-left" type="radio" name="p_round" id="m_round" onchange="click_chkplusminus()" value="M" style="height:20px;">
                                                                                    }
                                                                                </div>
                                                                            }
                                                                            @Html.HiddenFor(model => model.pmflagval, new { @id = "pm_flagval" })
                                                                        </div>
                                                                        <div class="col-md-3 col-sm-12 no-padding">
                                                                            <div class="col-md-6 col-sm-12 no-padding" id="div_pchkbox" style="display:none">
                                                                                <i class="fa fa-plus float-left pr-2 pt-1" aria-hidden="true"></i>
                                                                                <input class="float-left" type="radio" name="p_round" id="p_round" disabled="" value="P" style="height:20px;">

                                                                            </div>
                                                                            <div class="col-md-6 col-sm-12 no-padding" id="div_mchkbox" style="display:none">
                                                                                <i class="fa fa-minus float-left pr-2 pt-1" aria-hidden="true"></i>
                                                                                <input class="float-left" type="radio" name="p_round" id="m_round" disabled="" value="M" style="height:20px;">
                                                                            </div>
                                                                            <input id="pm_flagval" name="pmflagval" type="hidden" value="">
                                                                        </div>
                                                                        <div class="col-md-5 col-sm-12 num_right no-padding"> @Resource.Total @Resource.NetAmount @Resource.InBase</div>
                                                                        <div class="col-md-12 col-sm-12 num_right no-padding">
                                                                            @Html.TextBoxFor(Model => Model.NetAmountInBase, new { @id = "NetOrderValueInBase", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                            @Html.HiddenFor(m => m.NetAmountInBase, new { @id = "hdn_NetOrderValueInBase" })
                                                                        </div>
                                                                    </th>
                                                                    <th class="right_aligh text_normal" width="10%">
                                                                        @Resource.TDS @Resource.Amount
                                                                        <div class="col-md-10 col-sm-12 pl-0">
                                                                            @Html.TextBoxFor(Model => Model.TDS_Amount, new { @id = "TxtTDS_Amount", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                        </div>
                                                                        <div class="col-md-2 col-sm-12 pt-2">
                                                                            @*@if (Disable)
                                                                                {
                                                                                    <button type="button" id="BtnTDS_Amount" class="calculator_lso" data-toggle="modal" disabled data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TDS @Resource.Calculator"></i></button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <button type="button" id="BtnTDS_Amount" class="calculator_lso" data-toggle="modal" onclick="OnClickTDSCalculationBtn();" data-target="#TDSCalculate" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TDS @Resource.Calculator"></i></button>
                                                                                }*@
                                                                            <button type="button" id="BtnTDS_Amount" class="calculator_lso" data-toggle="modal" onclick="OnClickTDSCalculationBtn();" data-target="#TDSCalculate" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TDS @Resource.Calculator"></i></button>
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                                <tr>
                                                                    <th valign="middle" style="vertical-align:middle"> @Resource.Previous</th>
                                                                    <th class="right_aligh text_normal" width="8%">
                                                                        @Html.TextBoxFor(Model => Model.GrossValuePrev, new { @id = "TxtGrossValuePrev", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.GrossValueInBasePrev, new { @id = "TxtGrossValueInBasePrev", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.TaxAmountRecoverablePrev, new { @id = "TaxAmountRecoverablePrev", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.TaxAmountNonRecoverablePrev, new { @id = "TaxAmountNonRecoverablePrev", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        <div class="col-md-10 col-sm-12 pl-0">
                                                                            @Html.TextBoxFor(Model => Model.OtherChargesPrev, new { @id = "TxtOtherChargesPrev", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                        </div>
                                                                        <div class="col-md-2 col-sm-12 pt-2">
                                                                            @*@if (Disable)
                                                                                {
                                                                                    <button type="button" id="BtnOC_AmountPrev" class="calculator_lso" data-toggle="modal" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;" disabled><i class="fa fa-calculator" aria-hidden="true" title="Other Charges Calculator"></i></button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <button type="button" id="BtnOC_AmountPrev" class="calculator_lso" data-toggle="modal" onclick="setHiddenFieldValue('P');" data-target="#OtherChargesCalculator" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="Other Charges Calculator"></i></button>
                                                                                }*@
                                                                            <button type="button" id="BtnOC_AmountPrev" class="calculator_lso" data-toggle="modal" onclick="setHiddenFieldValue('P');" data-target="#OtherChargesCalculator" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="Other Charges Calculator"></i></button>
                                                                        </div>
                                                                        <input id="ForDisableOCDlt" hidden="hidden" />
                                                                        <input id="ForOCInvstatus" hidden="hidden" />
                                                                    </th>

                                                                    <th class="right_aligh text_normal" hidden="">
                                                                        @*<input class="form-control tax_cal text_bold" id="NetOrderValueSpePrev" name="NetAmount" placeholder="0000.00" readonly="readonly" type="text" value="29830.40">*@
                                                                        @Html.TextBoxFor(Model => Model.NetOrderValueSpePrev, new { @id = "NetOrderValueSpePrev", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.NetAmountInBasePrev, new { @id = "NetOrderValueInBasePrev", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        <div class="col-md-10 col-sm-12 pl-0">
                                                                            @Html.TextBoxFor(Model => Model.TDS_AmountPrev, new { @id = "TxtTDS_AmountPrev", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                        </div>
                                                                        <div class="col-md-2 col-sm-12 pt-2">
                                                                            @*@if (Disable)
                                                                                {
                                                                                    <button type="button" id="BtnTDS_AmountPrev" class="calculator_lso" disabled data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TDS @Resource.Calculator"></i></button>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <button type="button" id="BtnTDS_AmountPrev" class="calculator_lso" data-toggle="modal" onclick="OnClickTDSCalculationBtnPrev();" data-target="#TDSCalculate" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TDS @Resource.Calculator"></i></button>
                                                                                }*@
                                                                            <button type="button" id="BtnTDS_AmountPrev" class="calculator_lso" data-toggle="modal" onclick="OnClickTDSCalculationBtnPrev();" data-target="#TDSCalculate" data-backdrop="static" data-keyboard="false" style="margin:0px; padding:0px;"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TDS @Resource.Calculator"></i></button>
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                                <tr>
                                                                    <th valign="middle" style="vertical-align:middle">
                                                                        @Resource.Difference
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.TxtDiff_TotalAmountInSpec, new { @id = "TxtDiff_TotalAmountInSpec", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.TxtDiff_TotalAmountInBase, new { @id = "TxtDiff_TotalAmountInBase", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.TxtDiff_TotalTaxAmountRec, new { @id = "TxtDiff_TotalTaxAmountRec", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.TxtDiff_TotalTaxAmountNonRec, new { @id = "TxtDiff_TotalTaxAmountNonRec", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        <div class="col-md-10 col-sm-12 pl-0">
                                                                            @Html.TextBoxFor(Model => Model.TxtDiff_TotalOCAmount, new { @id = "TxtDiff_TotalOCAmount", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                            @Html.TextBoxFor(Model => Model.TxtDiff_TotalOCTPAmount, new { @id = "TxtDiff_TotalOCTPAmount", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly", style = "display:none;" })
                                                                        </div>
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        @Html.TextBoxFor(Model => Model.TxtDiff_Amount, new { @id = "TxtDiff_Amount", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                        @*@Html.HiddenFor(m => m.TxtDiff_Amount, new { @id = "hdn_TxtDiff_Amount" })*@
                                                                    </th>
                                                                    <th class="right_aligh text_normal">
                                                                        <div class="col-md-10 col-sm-12 pl-0">
                                                                            @Html.TextBoxFor(Model => Model.TxtDiff_TotalTDSAmount, new { @id = "TxtDiff_TotalTDSAmount", @class = "form-control tax_cal text_bold", @placeholder = "0000.00", @readonly = "readonly" })
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            @*<section class="panel panel-default">
                                    <div class="panel-heading" role="tab" id="headingFour">
                                        <h4 class="panel-title">  <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" class="collapsed" aria-controls="collapseFour"> Other Detail<span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a></h4>
                                    </div>
                                    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour" style="">
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-md-12 col-sm-12">
                                                    <div class="col-md-55 col-sm-12">
                                                        <label class="col-form-label label-align">Price Basis </label>
                                                        <input class="form-control num_right" id="PriceBasis" maxlength="50" name="PriceBasis" placeholder="Price Basis" readonly="readonly" type="text" value="">                                            <span class="field-validation-valid" data-valmsg-for="PriceBasis" data-valmsg-replace="true" id="SpanPriceBasisErrorMsg" style="color:red;!important"></span>
                                                    </div>
                                                    <div class="col-md-55 col-sm-12">
                                                        <label class="col-form-label label-align">Freight Type </label>
                                                        <input class="form-control" id="FreightType" maxlength="50" name="FreightType" placeholder="Freight Type" readonly="readonly" type="text" value="">                                            <span class="field-validation-valid" data-valmsg-for="FreightType" data-valmsg-replace="true" id="SpanFreightTypeErrorMsg" style="color:red;!important"></span>
                                                    </div>
                                                    <div class="col-md-55 col-sm-12">
                                                        <label class="col-form-label label-align">Mode Of Transport </label>
                                                        <input class="form-control" id="ModeOfTransport" maxlength="50" name="ModeOfTransport" placeholder="Mode Of Transport" readonly="readonly" type="text" value="">                                            <span class="field-validation-valid" data-valmsg-for="ModeOfTransport" data-valmsg-replace="true" id="SpanModeOfTransportErrorMsg" style="color:red;!important"></span>
                                                    </div>
                                                    <div class="col-md-55 col-sm-12">
                                                        <label class="col-form-label label-align">Destination </label>
                                                        <input class="form-control" id="Destination" maxlength="50" name="Destination" placeholder="Destination" readonly="readonly" type="text" value="">                                            <span class="field-validation-valid" data-valmsg-for="Destination" data-valmsg-replace="true" id="SpanDestinationErrorMsg" style="color:red; !important"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>*@
                            <section class="panel panel-default">
                                <div class="panel-heading" role="tab" id="headingThree">
                                    <h4 class="panel-title"> <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree"> @Resource.GLAccountDetail <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a> </h4>
                                </div>
                                <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">

                                    <div id="GL_PartialDiv">
                                        @{
                                            if (Disable)
                                            {
                                                ViewBag.Disable = true;
                                            }
                                            else
                                            {
                                                if ((Model.DocumentStatus == "A") && Model.Command == "Edit")
                                                {
                                                    ViewBag.Disable = true;
                                                }
                                                else
                                                {
                                                    ViewBag.Disable = false;
                                                }
                                            }
                                            int suppIndx = Model.SupplierNameList != null ? Model.SupplierNameList.FindIndex(v => v.supp_id == Model.SuppPI_SuppID) : -1;
                                            string nrr_supp_name = "";
                                            //string PI_inv_date = "";
                                            //if (suppIndx > -1)
                                            //{
                                            //    nrr_supp_name = Model.SupplierNameList[suppIndx].supp_name;
                                            //}
                                            //if (!string.IsNullOrEmpty(Model.SuppPI_inv_dt)) /* Date Format Changed by Suraj Maurya on 25-04-2025 */
                                            //{
                                            //    PI_inv_date = Convert.ToDateTime(Model.SuppPI_inv_dt).ToString("dd-MM-yyyy");
                                            //}

                                            /*Format Bill Date & Invoice Date in dd/MM/yyyy start*/
                                            DateTime parsedDate;
                                            string formattedBillDate = "";
                                            string formattedInvDate = "";

                                            // Try to parse the string to DateTime
                                            if (DateTime.TryParse(Model.bill_date, out parsedDate))
                                            {
                                                // If parsing succeeds, format to dd/MM/yyyy
                                                formattedBillDate = parsedDate.ToString("dd/MM/yyyy");
                                            }
                                            else
                                            {
                                                // If parsing fails, you can show original or empty
                                                formattedBillDate = Model.bill_date; // or "Invalid Date"
                                            }
                                            if (DateTime.TryParse(Model.SuppPI_inv_dt, out parsedDate))
                                            {
                                                // If parsing succeeds, format to dd/MM/yyyy
                                                formattedInvDate = parsedDate.ToString("dd/MM/yyyy");
                                            }
                                            else
                                            {
                                                // If parsing fails, you can show original or empty
                                                formattedInvDate = Model.SuppPI_inv_dt; // or "Invalid Date"
                                            }
                                            /*Format Bill Date & Invoice Date in dd/MM/yyyy end*/


                                            //string nurr = $"{Resource.InvoiceNumber} {Model.Inv_Nos} {Resource.Dated} {Model.SuppPI_inv_dt} {Resource.Created} {Resource.Against} {Resource.BillNumber} _bill_no {Resource.Date} _bill_dt";
                                            //string bp_nurr = $"{Resource.Bank} {Resource.Charges} {Resource.Paid} {Resource.Against} {Resource.InvoiceNumber} {Model.Inv_Nos} {Resource.InvoiceDate} {Model.SuppPI_inv_dt} {Resource.By} {Resource.InstrumentNumber} _bill_no {Resource.Dated} _bill_dt";
                                            //string dn_nurr = $"{Resource.MSG00235} {Resource.Against} {Resource.Supplementary} {Resource.InvoiceNumber} {Model.Inv_Nos} {Resource.InvoiceDate} {Model.SuppPI_inv_dt} {Resource.BillNumber} _bill_no {Resource.BillDate} _bill_dt";
                                            //string dn_var_nurr = $"{Resource.MSG00260} {Resource.Against} {Resource.InvoiceNumber} {Model.Inv_Nos} {Resource.InvoiceDate} {PI_inv_date} {Resource.BillNumber} _bill_no {Resource.BillDate} _bill_dt {Resource._for} {Resource.Supplier} {nrr_supp_name}";
                                            //string cn_nurr = $"{Resource.Credit} {Resource.Note} {Resource.Raised}{Resource.Against} {Resource.Supplementary} {Resource.InvoiceNumber} {Model.Inv_Nos} {Resource.InvoiceDate} {Model.SuppPI_inv_dt} {Resource.BillNumber} _bill_no {Resource.BillDate} _bill_dt";

                                            string nurr = $"{Resource.InvoiceNumber} {(string.IsNullOrEmpty(Model.Inv_Nos) ? "{INV_NO}" : Model.Inv_Nos)} {Resource.Dated} {(string.IsNullOrEmpty(formattedInvDate) ? "{INV_DATE}" : formattedInvDate)} {Resource.Created} {Resource.Against} {Resource.BillNumber} _bill_no {Resource.Date} _bill_dt";
                                            string bp_nurr = $"{Resource.Bank} {Resource.Charges} {Resource.Paid} {Resource.Against} {Resource.InvoiceNumber} {(string.IsNullOrEmpty(Model.Inv_Nos) ? "{INV_NO}" : Model.Inv_Nos)} {Resource.InvoiceDate} {(string.IsNullOrEmpty(formattedInvDate) ? "{INV_DATE}" : formattedInvDate)} {Resource.By} {Resource.InstrumentNumber} _bill_no {Resource.Dated} _bill_dt";
                                            string dn_nurr = $"{Resource.MSG00235} {Resource.Against} {Resource.Supplementary} {Resource.InvoiceNumber} {(string.IsNullOrEmpty(Model.Inv_Nos) ? "{INV_NO}" : Model.Inv_Nos)} {Resource.InvoiceDate} {(string.IsNullOrEmpty(formattedInvDate) ? "{INV_DATE}" : formattedInvDate)} {Resource.BillNumber} _bill_no {Resource.BillDate} _bill_dt";
                                            //string dn_var_nurr = $"{Resource.MSG00260} {Resource.Against} {Resource.InvoiceNumber} {(string.IsNullOrEmpty(Model.Inv_Nos) ? "{INV_NO}" : Model.Inv_Nos)} {Resource.InvoiceDate} {(string.IsNullOrEmpty(formattedInvDate) ? "{INV_DATE}" : formattedInvDate)} {Resource.BillNumber} _bill_no {Resource.BillDate} _bill_dt {Resource._for} {Resource.Supplier} {nrr_supp_name}";
                                            string cn_nurr = $"{Resource.Credit} {Resource.Note} {Resource.Raised}{Resource.Against} {Resource.Supplementary} {Resource.InvoiceNumber} {(string.IsNullOrEmpty(Model.Inv_Nos) ? "{INV_NO}" : Model.Inv_Nos)} {Resource.InvoiceDate} {(string.IsNullOrEmpty(formattedInvDate) ? "{INV_DATE}" : formattedInvDate)} {Resource.BillNumber} _bill_no {Resource.BillDate} _bill_dt";


                                        }
                                        @Html.HiddenFor(m => m.Nurration, new { @Value = nurr, @id = "hdn_Nurration" })
                                        @Html.HiddenFor(m => m.BP_Nurration, new { @Value = bp_nurr, @id = "hdn_BP_Nurration" })
                                        @Html.HiddenFor(m => m.DN_Nurration, new { @Value = dn_nurr, @id = "hdn_DN_Nurration" })
                                        @Html.HiddenFor(m => m.CN_Nurration, new { @Value = cn_nurr, @id = "hdn_CN_Nurration" })
                                        @*@Html.HiddenFor(m => m.DN_VarNurration, new { @Value = dn_var_nurr, @id = "hdn_DN_VarNurration" })*@
                                        @*@Html.HiddenFor(m => m.CN_VarNurration, new { @Value = cn_nurr, @id = "hdn_CN_VarNurration" })*@
                                        @Html.Partial("~/Areas/Common/Views/Cmn_PartialGLAccountDetail.cshtml")


                                    </div>

                                </div>
                            </section>
                            @*/*------------------ Tax & Other Charges Start----------------*/*@
                            @Html.Partial("~/Areas/Common/Views/Comn_PartialTaxAndOtherChargeDetail_New.cshtml")
                            @*/*------------------Tax & Other Charges End----------------*/*@
                            @*/*------------------Attatchmnet Start----------------*/*@
                            @Html.Partial("~/Areas/Common/Views/Comn_PartialAttatchmentDetail.cshtml")
                            @Html.HiddenFor(model => model.attatchmentdetail, new { @id = "hdn_Attatchment_details" })
                            @*/*------------------Attatchmnet End----------------*/*@

                        </article>
                    </div>
                </div>
            </div>
        </div>
    }

}