@model EnRepMobileWeb.MODELS.SecurityLayer.UserSetup.UserDetailModel
@using EnRepMobileWeb.Resources;
@using System.Data

@if (Session["UserId"] == null)
{
    Response.Redirect("~/Login");
}
@{
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}
<!-- jQuery first -->
<script src="@Url.Content("~/Content/Css/jquery/dist/jquery.min.js")"></script>
<script src="@Url.Content("~/Content/Css/jquery/dist/jquery.min.js")"></script>
<script src="@Url.Content("~/Content/Css/build/js/simpleTree.js")"></script>
<link href="@Url.Content("~/Content/Css/build/css/simpleTree.css")" rel="stylesheet" />


<!-- Other scripts -->
<script src="@Url.Content("~/Content/Css/build/js/sweetalert.js")"></script>
<script src="@Url.Content("~/Content/Scripts/SecurityLayer/UserSetup/UserDetail.js")"></script>
<script src="~/Content/Scripts/Common/Cmn_popup_msg.js"></script>
<title>@Model.Title</title>
<style>
    .position-in-input {
        position: absolute;
        top: 32px;
        right: 21px;
        font-size: 14px;
    }
</style>
@{
    var Disable = true;
    if (Session["TransType"].ToString() == "Update")
    {
        if (Session["Command"].ToString() == "Edit")
        {
            Disable = false;
        }
        else
        {
            Disable = true;
        }
    }
    else
    {
        Disable = false;
    }

    if (Session["TransType"].ToString() == "Refresh")
    {
        Disable = true;
    }
    if (Session["TransType"].ToString() == "Save")
    {
        if (Session["Command"].ToString() == "Add")
        {
            Disable = false;
        }
        else
        {
            Disable = true;
        }
    }
    if (ViewBag.Message == "Duplicate" || ViewBag.Message == "DuplicateID")
    {

        Disable = false;
    }
}

@{
    var str = Session["Message"].ToString();
    if (str != null)
    {
        Model.hdnsaveApprovebtn = null;
        <script>
            $(document).ready(function () {
                $("#hdnsavebtn").val("");
            })
        </script>
    }
    if (ViewBag.Message == "Duplicate" || ViewBag.Message == "DuplicateID")
    {
        Model.hdnsaveApprovebtn = null;
        <script>
            $(document).ready(function () {
                $("#hdnsavebtn").val("");
            })
        </script>
    }
    if (Session["Message"].ToString() == "Save")
    {

        <script type="text/javascript">
            swal("", $("#savemsg").text(), "success");
        </script>
    }
    if (Session["Message"].ToString() == "Deleted")
    {

        <script type="text/javascript">
            swal("", $("#deletemsg").text(), "success");
        </script>
    }
    if (Session["Message"].ToString() == "Approved")
    {

        <script type="text/javascript">
            swal("", $("#approvemsg").text(), "success");
        </script>
    }


    if (ViewBag.Message == "Duplicate")
    {
        Model.hdnsaveApprovebtn = null;
        <script type="text/javascript">
            $(document).ready(function () {

                
                document.getElementById("Spanusername").innerHTML = $("#valueduplicate").text();
                $("#Spanusername").css("display", "block");
                $("#user_nm").css("border-color", "red");
            });

        </script>
    }
    if (ViewBag.Message == "DuplicateID")
    {
        Model.hdnsaveApprovebtn = null;
        <script type="text/javascript">
            $(document).ready(function () {
                document.getElementById("SpanLogInID").innerHTML = $("#valueduplicate").text();
                $("#SpanLogInID").css("display", "block");
                $("#ddlLogInID").css("border-color", "red");
            });

        </script>
    }
    Session["Message"] = "";
}

@using (Html.BeginForm("UserSave", "UserDetail", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    {
        <div class="row">
            <div class="col-md-12 col-sm-12 ">
                <div class="x_panel mar_pad1 ">
                    <div class="x_content mar_pad1">
                        <h2 class="col-md-8 col-sm-12 heading_left_padding "> @ViewBag.MenuPageName </h2>
                        <div id="" class="col-md-4 col-sm-12 work_flow heading_right_padding">
                            @{
                                var btnName = Session["BtnName"].ToString();
                                switch (btnName)
                                {
                                    case "BtnAddNew":
                                        <ul class="margin0 padding0">
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "104101001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" disabled style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="Add"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "104101002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    @*if (Row["feature_id"].ToString() == "104101004")
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                        }*@
                                                }
                                            }
                                            @if (Model.user_id.ToString() == null || Model.user_id == 0)
                                            {
                                                <li>
                                                    <button class="save"
                                                            title="@Resource.Save" type="submit" id="btn_save" onclick="return InsertUserSetupDetail();" name="Command" value="Save"></button>
                                                </li>
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="save"
                                                            title="@Resource.Save" type="submit" id="btn_save" onclick="return InsertUserSetupDetail();" name="Command" value="Update"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" onclick="mandatorydisable();" name="Command" value="Refresh"></button>
                                            </li>
                                            @*<li>
                                                    <button class="back"
                                                            title="@Resource.Back" disabled style="filter: grayscale(100%)" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                                </li>*@
                                        </ul>
                                        break;
                                    case "BtnSave":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "104101001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" onclick="ActStatusDisable();" type="submit" id="btn_add" name="Command" value="Add"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "104101002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" type="submit" onclick="EnableActStat();" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    @*if (Row["feature_id"].ToString() == "104101004")
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        onclick="return functionConfirm(this)" title="@Resource.Delete" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                             @Html.HiddenFor(model => model.hdnAction, new { @id = "hdnAction" })
                                                        }*@
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" onclick="mandatorydisable();" name="Command" value="Refresh"></button>
                                            </li>
                                            @*<li>
                                                    <button class="back"
                                                            title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                                </li>*@
                                        </ul>
                                        break;
                                    case "BtnEdit":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "104101001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" disabled style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="Add"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "104101002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    @*if (Row["feature_id"].ToString() == "104101004")
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                        }*@
                                                }
                                            }
                                            @if (Model.user_id.ToString() == null || Model.user_id == 0)
                                            {
                                                <li>
                                                    <button class="save"
                                                            title="@Resource.Save" type="submit" id="btn_save" onclick="return InsertUserSetupDetail();" name="Command" value="Save"></button>
                                                </li>
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="save"
                                                            title="@Resource.Save" type="submit" id="btn_save" onclick="return InsertUserSetupDetail();" name="Command" value="Update"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" onclick="mandatorydisable();" name="Command" value="Refresh"></button>
                                            </li>
                                            @*<li>
                                                    <button class="back"
                                                            title="@Resource.Back" disabled style="filter: grayscale(100%)" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                                </li>*@
                                        </ul>
                                        break;
                                    case "BtnRefresh":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "104101001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" onclick="ActStatusDisable();" type="submit" id="btn_add" name="Command" value="Add"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "104101002")
                                                    {

                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    @*if (Row["feature_id"].ToString() == "104101004")
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                        }*@
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" onclick="mandatorydisable();" name="Command" value="Refresh"></button>
                                            </li>
                                            @*<li>
                                                    <button class="back"
                                                            title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                                </li>*@
                                        </ul>
                                        break;
                                    case "BtnToDetailPage":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "104101001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" onclick="ActStatusDisable();" type="submit" id="btn_add" name="Command" value="Add"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "104101002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" type="submit" onclick="EnableActStat();" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    @*if (Row["feature_id"].ToString() == "104101004")
                                                        {
                                                                <li>
                                                                    <button class="delete"
                                                                            onclick="return functionConfirm(this)" title="@Resource.Delete" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                                </li>
                                                             @Html.HiddenFor(model => model.hdnAction, new { @id = "hdnAction" })
                                                        }*@
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" onclick="mandatorydisable();" name="Command" value="Refresh"></button>
                                            </li>
                                            @*<li>
                                                    <button class="back"
                                                            title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                                </li>*@
                                        </ul>
                                        break;
                                        @*case "Delete":
                                            <ul>
                                                @if (ViewBag.VBRoleList != null)
                                                {
                                                    foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                    {
                                                        if (Row["feature_id"].ToString() == "104101001")
                                                        {
                                                            <li>
                                                                <button class="add"
                                                                        title="@Resource.AddNew" onclick="ActStatusDisable();" type="submit" id="btn_add" name="Command" value="Add"></button>
                                                            </li>
                                                        }
                                                        if (Row["feature_id"].ToString() == "104101002")
                                                        {

                                                            <li>
                                                                <button class="edit"
                                                                        title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                            </li>
                                                        }
                                                        if (Row["feature_id"].ToString() == "104101004")
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                        }
                                                    }
                                                }
                                                <li>
                                                    <button class="save"
                                                            title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                                </li>
                                                <li>
                                                    <button class="refresh"
                                                            title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" onclick="mandatorydisable();" name="Command" value="Refresh"></button>
                                                </li>
                                                <li>
                                                    <button class="back"
                                                            title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                                </li>
                                            </ul>
                                            break;*@
                                }
                            }
                        </div>
                        <div id="branch_name" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">

                                        <table class="table table-striped jambo_table bulk_action" id="BranchList">
                                            <thead>
                                                <tr class="headings">
                                                    <th class="column-title"> @Resource.BranchName</th>
                                                    <th class="column-title" style="text-align:right;">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" value="" id="BranchHListChk" onchange="CheckAllBranch('HChkBox');">
                                                            </label>
                                                        </div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary btn-sm" id="Okbtn" onclick="BranchMapAfterOK();" data-dismiss="modal">Ok</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="x_title">
                            <div class="col-md-12 col-sm-12 icon_tool ">
                                <!--<span>Collapsible / Accordion </span>-->
                                <div class="approved_by">
                                    <ul>
                                        <li><span>@Resource.CreatedBy <br><b id="CreatedBy">@Model.CreatedBy</b></span></li>
                                        <li><span>@Resource.Createdon<br><b id="CreatedDate">@Model.Createdon</b></span></li>
                                        <li><span>@Resource.AmendedBy<br><b id="AmdedBy">@Model.AmendedBy</b></span></li>
                                        <li><span>@Resource.AmendedOn<br><b id="AmdedDate">@Model.AmendedOn</b></span></li>
                                    </ul>
                                </div>
                            </div>
                            @Html.HiddenFor(model => model.hdnsaveApprovebtn, new { @id = "hdnsavebtn" })

                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12 ">
                <div class="x_panel mar_pad1 ">
                    <div class="x_content mar_pad1">
                        <div class="col-md-3 col-sm-12 padding_left group_tree">
                            <input type="search" id="tree_menu" class="form-control" placeholder="Search" autocomplete="off">
                            <div id="mytree"></div>
                        </div>
                        <div class="col-md-9 col-sm-12">
                            <article class="panel-group bs-accordion" id="accordion" role="tablist" aria-multiselectable="true">
                                <section class="panel panel-default">
                                    <div class="panel-heading" role="tab" id="headingOne">
                                        <h4 class="panel-title"> <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne"> @Resource.UserDetail <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a></h4>
                                    </div>
                                    <div id="collapseOne" class="panel-collapse in collapse show" role="tabpanel" aria-labelledby="headingOne" style="">
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-md-12 col-sm-12">
                                                    <div class="col-md-2 col-sm-12">
                                                        <label class="col-form-label label-align">
                                                            @Resource.Salutation <span class="required">*</span>
                                                        </label>
                                                        @if (Disable)
                                                        {
                                                            @Html.DropDownListFor(model => model.gender, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" },
                                                                                                                      new SelectListItem { Text = "Mr.", Value = "M" },
                                                                                                                      new SelectListItem { Text = "Ms.", Value = "F" },
                                                                                                                  }, new { @class = "form-control", @id = "gender", onchange = "OnChangeGender();", disabled = "disabled" })
                                                        }
                                                        else
                                                        {
                                                            @Html.DropDownListFor(model => model.gender, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" },
                                                      new SelectListItem { Text = "Mr.", Value = "M" },
                                                      new SelectListItem { Text = "Ms.", Value = "F" },
                                                  }, new { @class = "form-control", @id = "gender", onchange = "OnChangeGender();" })
                                                        }
                                                        <span id="Spangender" class="error_message"></span>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align">
                                                            @Resource.UserName <span class="required">*</span>
                                                        </label>
                                                        @Html.HiddenFor(model => model.user_id, new { @id = "hdnUser_id" })
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.user_nm, new { @id = "user_nm", disabled = "disabled", onchange = "OnChangeUserNm()", onkeypress = "OnChangeUserNm()", @class = "form-control optional", @name = "user_nm", @type = "text", @placeholder = "User Name", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='User Name'" })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.user_nm, new { @id = "user_nm", onchange = "OnChangeUserNm()", onkeypress = "OnChangeUserNm()", @class = "form-control optional", @autocomplete = "off", @name = "user_nm", @type = "text", @placeholder = "User Name", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='User Name'" })
                                                        }
                                                        <span id="Spanusername" class="error_message"></span>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align"> @Resource.NickName </label>
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.nick_nm, new { @id = "nick_nm", disabled = "disabled", @class = "form-control optional", @name = "nick_nm", @type = "text", @placeholder = "Nick Name", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Nick Name'" })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.nick_nm, new { @id = "nick_nm", autocomplete = "off", @class = "form-control optional", @name = "nick_nm", @type = "text", @placeholder = "Nick Name", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Nick Name'" })
                                                        }
                                                    </div>
                                                    <div class="col-md-2 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align"> @Resource.LoginID  </label>
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.LogInID, new
                                                       {
                                                           @id = "ddlLogInID",
                                                           disabled = "disabled",
                                                           @class = "form-control optional",
                                                           @name = "LogInID",
                                                           @type = "LogInID",
                                                           @placeholder = "LogInID",
                                                           @onfocus = "this.placeholder=''",
                                                           @onblur = "this.placeholder='LogInID'",
                                                           @oninput = "allowLoginChars(this)",
                                                           autocomplete = "off",
                                                           @onchange = "OnChangeLogInID()"
                                                       })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.LogInID, new
                                                       {
                                                           @id = "ddlLogInID",
                                                           @class = "form-control optional",
                                                           @name = "LogInID",
                                                           @placeholder = "LogInID",
                                                           @oninput = "allowLoginChars(this)",
                                                           autocomplete = "off",
                                                           @onchange= "OnChangeLogInID()"
                                                       })


                                                        }
                                                        <span id="SpanLogInID" class="error_message"></span>

                                                    </div>
                                                    <div class="col-md-2 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align">@Resource.Password <span class="required">*</span> </label>
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.user_pwd, new { @id = "user_pwd", onchange = "OnChangePassWd()", @maxlength = "50", onkeypress = "OnChangePassWd()", disabled = "disabled", @class = "form-control optional", @name = "user_pwd", @type = "password", @placeholder = "Password", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Password'" })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.user_pwd, new { @id = "user_pwd", onchange = "OnChangePassWd()", @maxlength = "50", onkeypress = "OnChangePassWd()", @class = "form-control optional", @name = "user_pwd", @type = "password", @placeholder = "Password", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Password'" })
                                                            <i class="fa fa-eye position-in-input" onclick="HideShowPWD();"></i>
                                                        }

                                                        <span id="Spanuserpwd" class="error_message"></span>
                                                    </div>
                                                    <div class="col-md-2 col-sm-12">
                                                        <label class="col-form-label label-align">@Resource.ReportingTo </label>
                                                        @if (Disable)
                                                        {
                                                            @Html.DropDownListFor(model => model.ReportingTo, new SelectList(Model.ReportingToLists, "ReportingTo_ID", "ReportingTo_Name"), new { @class = "form-control", disabled = "disabled", @id = "IDReportingTo", onchange = "OnchangeHOGetRole()" })
                                                        }
                                                        else
                                                        {
                                                            @Html.DropDownListFor(model => model.ReportingTo, new SelectList(Model.ReportingToLists, "ReportingTo_ID", "ReportingTo_Name"), new { @class = "form-control", @id = "IDReportingTo", onchange = "OnchangeHOGetRole()" })
                                                        }
                                                    </div>
                                                    <div class="col-md-2 col-sm-12 pl-0">
                                                        <div class="lpo_form">
                                                            <label class="col-form-label label-align" title="Designation">
                                                                @Resource.Designation
                                                            </label>
                                                            @if (Disable)
                                                            {
                                                                @Html.TextBoxFor(model => model.Designation, new { @id = "ddlDesignation", disabled = "disabled", @class = "form-control optional", @name = "Designation", @type = "Designation", @placeholder = "Designation", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Designation'" })
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBoxFor(model => model.Designation, new { @id = "ddlDesignation", @class = "form-control optional", @name = "Designation", @type = "Designation", @placeholder = "Designation", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Designation'" })
                                                            }
                                                        </div>
                                                    </div>

                                                    <div class="col-md-2 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align">@Resource.DefaultLanguage</label>
                                                        @if (Disable)
                                                        {
                                                            @Html.DropDownListFor(model => model.def_lang, new SelectList(Model.lang_Lists, "Lang_ID", "Lang_Name"), new { @class = "form-control", disabled = "disabled", @id = "def_lang" })
                                                        }
                                                        else
                                                        {
                                                            @Html.DropDownListFor(model => model.def_lang, new SelectList(Model.lang_Lists, "Lang_ID", "Lang_Name"), new { @class = "form-control", @id = "def_lang" })
                                                        }
                                                    </div>
                                                    <div class="col-md-2 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align">@Resource.EmailID</label>
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.user_email, new { @id = "user_email", disabled = "disabled", @class = "form-control optional", @name = "user_email", @type = "email", @placeholder = "Email ID", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Email ID'" })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.user_email, new { @id = "user_email", @class = "form-control optional", @name = "user_email", @type = "email", @placeholder = "Email ID", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Email ID'" })
                                                        }
                                                    </div>
                                                    <div class="col-md-2 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align">@Resource.ContactNumber </label>
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.user_cont, new { @id = "user_cont", disabled = "disabled", @class = "form-control optional", @name = "user_cont", @type = "text", @placeholder = "Contact Number", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Contact Number'" })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.user_cont, new { @id = "user_cont", @class = "form-control optional", @name = "user_cont", @type = "text", @placeholder = "Contact Number", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Contact Number'" })
                                                        }
                                                    </div>

                                                    <div class="col-md-2 col-sm-12 pl-0">
                                                        <div class="lpo_form">
                                                            <label class="col-form-label label-align" title="@Resource.DateOfBirth">
                                                                @Resource.DateOfBirth
                                                            </label>
                                                            @if (Disable)
                                                            {
                                                                @Html.TextBoxFor(model => model.DOB, "{0:yyyy-MM-dd}", new { @type = "date", disabled = "disabled", @class = "form-control", @id = "ValidUptoDate" })
                                                            }
                                                            else
                                                            {
                                                                @Html.TextBoxFor(model => model.DOB, "{0:yyyy-MM-dd}", new { @type = "date", @class = "form-control", @id = "ValidUptoDate" })
                                                            }
                                                        </div>
                                                    </div>


                                                    <div class="col-md-2 col-sm-12 pl-5 height60 ">
                                                        <div class="custom-control custom-switch margin25">
                                                            @if (Disable)
                                                            {

                                                                @Html.CheckBoxFor(model => model.Available, new { @class = "custom-control-input col-md-3 col-sm-12 margin-switch", disabled = "disabled", @id = "Available" })
                                                            }
                                                            else
                                                            {
                                                                @*<input checked="checked" class="custom-control-input margin-switch" data-val="true" id="" name="" type="checkbox" value="true" style="left:-30px;">*@
                                                                @Html.CheckBoxFor(model => model.Available, new { @class = "custom-control-input margin-switch", @id = "Available" })
                                                            }

                                                            <label class="custom-control-label col-md-9 col-sm-12 style=" padding: 3px 0px;""> @Resource.Available  </label>

                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 col-sm-12 height60">
                                                        <div class="custom-control custom-switch margin25">
                                                            @if (Disable)
                                                            {
                                                                @Html.CheckBoxFor(model => model.act, new { @class = "custom-control-input col-md-3 col-sm-12 margin-switch", disabled = "disabled", @id = "act_stats" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.act, new { @class = "custom-control-input col-md-3 col-sm-12 margin-switch", @id = "act_stats" })
                                                            }
                                                            <label class="custom-control-label col-md-9 col-sm-12" for="act_stats" style="padding: 3px 0px;"> @Resource.Active  </label>
                                                            @Html.HiddenFor(model => model.RoleDetail, new { @id = "RoleDetail" })
                                                            @Html.HiddenFor(model => model.BranchDetail, new { @id = "BranchDetail" })
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 col-sm-12 height60">
                                                        <div class="custom-control custom-switch margin25">
                                                            @if (Disable)
                                                            {
                                                                @Html.CheckBoxFor(model => model.CRMUser, new { @class = "custom-control-input col-md-3 col-sm-12 margin-switch", disabled = "disabled", @id = "CRMUser" })
                                                            }
                                                            else
                                                            {
                                                                @Html.CheckBoxFor(model => model.CRMUser, new { @class = "custom-control-input col-md-3 col-sm-12 margin-switch", @id = "CRMUser" })
                                                            }
                                                            <label class="custom-control-label col-md-9 col-sm-12" for="CRMUser" style="padding: 3px 0px;"> @Resource.CRMUser </label>

                                                        </div>
                                                    </div>


                                                    <div class="col-md-3 col-sm-12 no-padding mt-3">

                                                        @if (Disable)
                                                        {

                                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                                <div class="x_panel">
                                                                    <div class="x_title">
                                                                        <h2 class="" style="margin-bottom:0px;">User Image</h2>
                                                                        <div class="clearfix"></div>
                                                                    </div>
                                                                    <div class="x_content">
                                                                        <div class="image-upload-one">
                                                                            <div class="center">
                                                                                <div class="form-input">
                                                                                    <!-- Default image display -->
                                                                                    <label hidden="hidden">
                                                                                        <img id="defltimg1" src="~/Content/Images/user.jpg" />
                                                                                    </label>

                                                                                    <!-- Image preview with label trigger for file input -->
                                                                                    <label for="file-ip-1">
                                                                                        @if (Model.UserImage_attachmentdetails != null)
                                                                                        {
                                                                                            <img id="file-ip-1-preview" width="100" src="@Model.UserImage_attachmentdetails" />
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <img id="file-ip-1-preview" width="100" src="~/Content/Images/user.jpg" />
                                                                                        }
                                                                                    </label>
                                                                                </div>

                                                                                <div>
                                                                                    <!-- File input for selecting an image -->
                                                                                    @Html.TextBoxFor(model => model.UserImage, new { @id = "file-ip-1", @onchange = "showPreview_User(event);", @maxlength = "250", @style = "width:90px;", @type = "file", @disabled = "disabled" })

                                                                                    <!-- Hidden field for attachment details (image path) -->
                                                                                    @Html.HiddenFor(model => model.UserImage_attachmentdetails, new { @id = "UserImagehdn_Attatchment_details" })

                                                                                    <!-- Hidden field for user image attachment reference -->
                                                                                    @Html.HiddenFor(model => model.hdnAttachment_UserImg, new { @id = "hdnAttachment_UserImg" })

                                                                                    <!-- Clear button to remove the image preview -->
                                                                                    <button type="button" class="" disabled onclick="myImgRemove1()">Clear</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        }
                                                        else
                                                        {

                                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                                <div class="x_panel">
                                                                    <div class="x_title">
                                                                        <h2 class="" style="margin-bottom:0px;">User Image</h2>
                                                                        <div class="clearfix"></div>
                                                                    </div>
                                                                    <div class="x_content">
                                                                        <div class="image-upload-one">
                                                                            <div class="center">
                                                                                <div class="form-input">
                                                                                    <!-- Default image display -->
                                                                                    <label hidden="hidden">
                                                                                        <img id="defltimg1" src="~/Content/Images/user.jpg" />
                                                                                    </label>

                                                                                    <!-- Image preview with label trigger for file input -->
                                                                                    <label for="file-ip-1">
                                                                                        @if (Model.UserImage_attachmentdetails != null)
                                                                                        {
                                                                                            <img id="file-ip-1-preview" width="100" src="@Model.UserImage_attachmentdetails" />
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <img id="file-ip-1-preview" width="100" src="~/Content/Images/user.jpg" />
                                                                                        }
                                                                                    </label>
                                                                                </div>

                                                                                <div>
                                                                                    <!-- File input for selecting an image -->
                                                                                    @Html.TextBoxFor(model => model.UserImage, new { @id = "file-ip-1", @onchange = "showPreview_User(event);", @maxlength = "250", @style = "width:90px;", @type = "file" })

                                                                                    <!-- Hidden field for attachment details (image path) -->
                                                                                    @Html.HiddenFor(model => model.UserImage_attachmentdetails, new { @id = "UserImagehdn_Attatchment_details" })

                                                                                    <!-- Hidden field for user image attachment reference -->
                                                                                    @Html.HiddenFor(model => model.hdnAttachment_UserImg, new { @id = "hdnAttachment_UserImg" })

                                                                                    <!-- Clear button to remove the image preview -->
                                                                                    <button type="button" class="" onclick="myImgRemove1()">Clear</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        }


                                                    </div>
                                                    <div class="col-md-3 col-sm-12 no-padding mt-3">

                                                        @if (Disable)
                                                        {

                                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                                <div class="x_panel pb-0 mb-0">
                                                                    <div class="x_title">
                                                                        <h2 class="pt-0 pb-0">@Resource.DigitalSignature</h2>
                                                                        <div class="clearfix"></div>
                                                                    </div>
                                                                    <div class="x_content">
                                                                        <div class="image-upload-two">
                                                                            <div class="center">
                                                                                <div class="form-input">
                                                                                    <label hidden="hidden"><img id="defltimg" src="~/Content/Images/default.png" /></label>
                                                                                    <label for="file-ip-2">
                                                                                        @if (Model.attachmentdetails != null)
                                                                                        {
                                                                                            <img id="file-ip-2-preview" width="100" src="@Model.attachmentdetails">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <img id="file-ip-2-preview" width="100" src="~/Content/Images/default.png">
                                                                                        }
                                                                                    </label>
                                                                                </div>
                                                                                <div>
                                                                                    @Html.TextBoxFor(model => model.digi_sign, new { @id = "file-ip-2", @onchange = "showPreview(event);", @maxlength = "250", @style = "width:90px;", @type = "file", @disabled = "disabled" })
                                                                                    @Html.HiddenFor(model => model.attachmentdetails, new { @id = "hdn_Attatchment_details" })
                                                                                    @Html.HiddenFor(model => model.hdnAttachment, new { @id = "hdnAttachment" })
                                                                                    @*<input type="file" class="" name="img_six" id="file-ip-1" accept="image/*" onchange="showPreview(event);" style="width:90px;">*@
                                                                                    <button type="button" class="" disabled onclick="myImgRemove()">Clear</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                        else
                                                        { <div class="col-md-12 col-sm-12 col-xs-12">
                                                                <div class="x_panel">
                                                                    <div class="x_title">
                                                                        <h2 class="" style="margin-bottom:0px;">@Resource.DigitalSignature</h2>
                                                                        <div class="clearfix"></div>
                                                                    </div>
                                                                    <div class="x_content">
                                                                        <div class="image-upload-one">
                                                                            <div class="center">
                                                                                <div class="form-input">
                                                                                    <label hidden="hidden"><img id="defltimg" src="~/Content/Images/default.png" /></label>
                                                                                    <label for="file-ip-2">
                                                                                        @if (Model.attachmentdetails != null)
                                                                                        {
                                                                                            <img id="file-ip-2-preview" width="100" src="@Model.attachmentdetails">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <img id="file-ip-2-preview" width="100" src="~/Content/Images/default.png">
                                                                                        }
                                                                                    </label>
                                                                                </div>
                                                                                <div>
                                                                                    @Html.TextBoxFor(model => model.digi_sign, new { @id = "file-ip-2", @onchange = "showPreview(event);", @maxlength = "250", @style = "width:90px;", @type = "file" })
                                                                                    @Html.HiddenFor(model => model.attachmentdetails, new { @id = "hdn_Attatchment_details" })
                                                                                    @Html.HiddenFor(model => model.hdnAttachment, new { @id = "hdnAttachment" })
                                                                                    @*<input type="file" class="" name="img_six" id="file-ip-1" accept="image/*" onchange="showPreview(event);" style="width:90px;">*@

                                                                                    <button type="button" class="" onclick="myImgRemove()">Clear</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        }


                                                    </div>


                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                </section>
                                <section class="panel panel-default">
                                    <div class="panel-heading" role="tab" id="headingTwo">
                                        <h4 class="panel-title"> <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo"> @Resource.RoleAccess <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a> </h4>
                                    </div>
                                    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-md-12 col-sm-12">
                                                    <div class="col-md-3 col-sm-12">
                                                        <label class="col-form-label label-align"> @Resource.HO </label>
                                                        @if (Disable)
                                                        {
                                                            @Html.DropDownListFor(model => model.Role_HeadOffice, new SelectList(Model.hO_Lists, "HO_ID", "HO_Name"), new { @class = "form-control", disabled = "disabled", @id = "RoleHoName", onchange = "OnchangeHOGetRole()" })
                                                        }
                                                        else
                                                        {
                                                            @Html.DropDownListFor(model => model.Role_HeadOffice, new SelectList(Model.hO_Lists, "HO_ID", "HO_Name"), new { @class = "form-control", @id = "RoleHoName", onchange = "OnchangeHOGetRole()" })
                                                        }
                                                        @Html.ValidationMessageFor(model => model.Role_HeadOffice, String.Empty, new { @style = "color:red;!important", @id = "vmRoleHoName" })
                                                    </div>
                                                    <div class="col-md-2 col-sm-12">
                                                        <label class="col-form-label label-align"> @Resource.RoleName  </label>
                                                        @if (Disable)
                                                        {
                                                            @Html.DropDownListFor(model => model.Role_Name, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" }, }, new { @class = "form-control", disabled = "disabled", @id = "RoleName", onclick = "OnClickHideSelectedRole();" })
                                                        }
                                                        else
                                                        {
                                                            @Html.DropDownListFor(model => model.Role_Name, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" }, }, new { @class = "form-control", @id = "RoleName", onclick = "OnClickHideSelectedRole();" })
                                                        }
                                                        @Html.ValidationMessageFor(model => model.Role_HeadOffice, String.Empty, new { @style = "color:red;!important", @id = "vmRoleName" })
                                                    </div>
                                                    <div class="col-md-1 col-sm-12">
                                                        @if (Disable)
                                                        {

                                                        }
                                                        else
                                                        {
                                                            <a href="#">
                                                                <div class="plus_icon2"> <i class="fa fa-plus" id="BtnAddRole" onclick="AddNewRoleAcc();"></i> </div>
                                                            </a>
                                                        }
                                                    </div>
                                                    <div class="clear"></div>
                                                    <div class="col-md-12 col-sm-12">
                                                        <div class="table-responsive width99">
                                                            <table class="table table-striped jambo_table bulk_action margin10" id="UserRoleList">
                                                                <thead>
                                                                    <tr class="headings">
                                                                        <th width="2%">&nbsp;</th>
                                                                        <th style="display:none;"></th>
                                                                        <th width="15%">@Resource.HO </th>
                                                                        <th style="display:none;"></th>
                                                                        <th width="15%">@Resource.RoleName</th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @if (ViewBag.RoleDetails != null)
                                                                    {
                                                                        var i = 1;
                                                                        foreach (System.Data.DataRow dr in ViewBag.RoleDetails.Rows)
                                                                        {
                                                                            <tr id="R @i">
                                                                                <td class=" red center">
                                                                                    @if (Disable)
                                                                                    {

                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <i class="deleteIcon fa fa-trash" aria-hidden="true" title="@Resource.Delete"></i>
                                                                                    }

                                                                                </td>
                                                                                <td style="display:none;">@dr["comp_id"].ToString()</td>
                                                                                <td>
                                                                                    @dr["comp_nm"].ToString()
                                                                                </td>
                                                                                <td style="display:none;">@dr["role_id"].ToString()</td>
                                                                                <td>
                                                                                    @dr["role_name"].ToString()
                                                                                </td>
                                                                                <td><span id="HiddenRowID" style="display:none;">@i</span></td>
                                                                            </tr>
                                                                            i = i + 1;
                                                                        }
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section class="panel panel-default">
                                    <div class="panel-heading" role="tab" id="headingThree">
                                        <h4 class="panel-title"> <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree"> @Resource.BranchAccess <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a> </h4>
                                    </div>
                                    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-md-12 col-sm-12">
                                                    <div class="col-md-3 col-sm-12">
                                                        <label class="col-form-label label-align"> @Resource.HO </label>

                                                        @if (Disable)
                                                        {
                                                            @Html.DropDownListFor(model => model.Br_HeadOffice, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" }, }, new { @class = "form-control", disabled = "disabled", @id = "BR_HoName", onchange = "OnChangeBR_HO()" })
                                                        }
                                                        else
                                                        {
                                                            @Html.DropDownListFor(model => model.Br_HeadOffice, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" }, }, new { @class = "form-control", @id = "BR_HoName", onchange = "OnChangeBR_HO()" })
                                                        }
                                                        @Html.ValidationMessageFor(model => model.Br_HeadOffice, String.Empty, new { @style = "color:red;!important", @id = "vmBR_HoName" })

                                                    </div>
                                                    <div class="col-md-2 col-sm-12">
                                                        <label class="col-form-label label-align"> @Resource.Branch</label>

                                                        @if (Disable)
                                                        {
                                                            @Html.DropDownListFor(model => model.Branch_Name, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" }, }, new { @class = "form-control", disabled = "disabled", @id = "BranchName", onclick = "" })
                                                        }
                                                        else
                                                        {
                                                            @Html.DropDownListFor(model => model.Branch_Name, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" }, }, new { @class = "form-control", @id = "BranchName", onclick = "" })
                                                        }
                                                        @Html.ValidationMessageFor(model => model.Br_HeadOffice, String.Empty, new { @style = "color:red;!important", @id = "vmBranchName" })

                                                    </div>
                                                    <div class="col-md-1 col-sm-12">
                                                        @if (Disable)
                                                        {
                                                        }
                                                        else
                                                        {
                                                            <a href="#">
                                                                <div class="plus_icon2"> <i class="fa fa-plus" id="BtnAddRole" onclick="AddNewBranchAcc();"></i> </div>
                                                            </a>
                                                        }
                                                    </div>
                                                    <div class="clear"></div>
                                                    <div class="col-md-12 col-sm-12">
                                                        <div class="table-responsive width99">
                                                            <table class="table table-striped jambo_table bulk_action margin10" id="UserBranchList">
                                                                <thead>
                                                                    <tr class="headings">
                                                                        <th class="column-title" width="2%"> &nbsp;</th>
                                                                        <th style="display:none;"></th>
                                                                        <th class="column-title" width="15%"> @Resource.HO</th>
                                                                        <th style="display:none;"></th>
                                                                        <th class="column-title" width="15%">@Resource.BranchName</th>
                                                                        <th class="column-title"> @Resource.Default</th>
                                                                        <th> &nbsp;</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @if (ViewBag.BranchDetails != null)
                                                                    {
                                                                        var i = 1;
                                                                        foreach (System.Data.DataRow dr in ViewBag.BranchDetails.Rows)
                                                                        {
                                                                            <tr id="R1">
                                                                                <td class=" red center">
                                                                                    @if (Disable)
                                                                                    {

                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <i class="deleteIcon fa fa-trash" aria-hidden="true" title="@Resource.Delete"></i>
                                                                                    }

                                                                                </td>
                                                                                <td style="display:none;">@dr["comp_id"].ToString()</td>
                                                                                <td>
                                                                                    @dr["comp_nm"].ToString()
                                                                                </td>
                                                                                <td style="display:none;">@dr["br_id"].ToString()</td>
                                                                                <td>
                                                                                    @dr["branch_nm"].ToString()
                                                                                </td>
                                                                                <td>
                                                                                    <div class="custom-control custom-switch margin-left25" style="margin-bottom:0px;">
                                                                                        @if (Disable)
                                                                                        {
                                                                                            if (dr["def_br"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" class="custom-control-input col-md-3 col-sm-12 margin-switch" disabled id="act_stats_Branch_@i" checked>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" class="custom-control-input col-md-3 col-sm-12 margin-switch" disabled id="act_stats_Branch_@i">
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (dr["def_br"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" class="custom-control-input col-md-3 col-sm-12 margin-switch" onclick=defBrchk(event) id="act_stats_Branch_@i" checked>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" class="custom-control-input col-md-3 col-sm-12 margin-switch" onclick=defBrchk(event) id="act_stats_Branch_@i">
                                                                                            }
                                                                                        }
                                                                                        <label class="custom-control-label col-md-9 col-sm-12" for="act_stats_Branch_@i" style="padding: 3px 0px;"></label>
                                                                                        <span id="spanHiddenBr_@i" style="display:none">@dr["def_br"].ToString()</span>
                                                                                    </div>
                                                                                </td>
                                                                                <td><span id="HiddenRowID" style="display:none;">@i</span></td>
                                                                            </tr>
                                                                            i = i + 1;
                                                                        }
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                                <section class="panel panel-default">
                                    <div class="panel-heading" role="tab" id="headingFive">
                                        <h4 class="panel-title"> <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="true" aria-controls="collapseFive"> @Resource.Email @Resource.Configuration <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a> </h4>
                                    </div>
                                    <div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-md-12 col-sm-12">
                                                    <div class="col-md-3 col-sm-12">
                                                        <label class="col-form-label label-align">@Resource.Sender @Resource.Email</label>
                                                        @*<input class="form-control optional" id="SenderEmail" name="SenderEmail" placeholder="@Resource.Sender @Resource.Email" onkeypress="validateEmail();" type="text" value="">*@

                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.sender_email, new
                                                            {
                                                                @id = "SenderEmail",
                                                                disabled = "disabled",@*onkeypress = "OnChangeSenderMail();",*@onchange = "validateEmail();OnChangeSenderMail();",
@class = "form-control optional",
@name = "sender_email",
@type = "text",
@placeholder = "Sender Email",
@onfocus = "this.placeholder=''",
@onblur = "this.placeholder='Sender Email'",
@maxlength = "150"
})
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.sender_email, new
                                                            {
                                                                @id = "SenderEmail",@*onkeypress = "OnChangeSenderMail();",*@onchange = "validateEmail();OnChangeSenderMail();",
@class = "form-control optional",
@name = "sender_email",
@type = "text",
@placeholder = "Sender Email",
@onfocus = "this.placeholder=''",
@onblur = "this.placeholder='Sender Email'",
@maxlength = "150"
})

                                                        }
                                                        <span id="vmEmail" style="color: red; font-size: 8px;"></span>
                                                        <span id="Spansender" class="error_message"></span>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align">@Resource.Password</label>
                                                        @*<input class="form-control optional" id="Password" name="Password" placeholder="@Resource.Password" type="password" value="">*@
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.mail_pwd, new { @id = "Password", disabled = "disabled", @class = "form-control optional", onchange = "OnChangeMailPassWd()", @name = "mail_pwd", @type = "password", @placeholder = "Password", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Password'", @maxlength = "50" })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.mail_pwd, new { @id = "Password", @class = "form-control optional", @name = "mail_pwd", onchange = "OnChangeMailPassWd()", @type = "password", @placeholder = "Password", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Password'", @maxlength = "50" })
                                                            <i class="fa fa-eye position-in-input" onclick="HideShowEmailPWD();"></i>
                                                        }
                                                        <span id="Spanmailpwd" class="error_message"></span>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align"> @Resource.Host @Resource.Server </label>
                                                        @*<input class="form-control optional" id="HostServer" name="HostServer" placeholder="@Resource.Host @Resource.Server" type="text" value="">*@
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.host_server, new { @id = "HostServer", disabled = "disabled", @class = "form-control optional", @name = "host_server", @type = "text", @placeholder = "Host Server", onchange = "OnChangeHostServer()", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Host Server'", @maxlength = "150" })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.host_server, new { @id = "HostServer", @class = "form-control optional", @name = "host_server", @type = "text", @placeholder = "Host Server", onchange = "OnChangeHostServer()", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Host Server'", @maxlength = "150" })

                                                        }
                                                        <span id="Spanhostserver" class="error_message"></span>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12 pl-0">
                                                        <label class="col-form-label label-align"> @Resource.Port</label>
                                                        @*<input class="form-control optional" id="Port" name="Port" placeholder="@Resource.Port" type="number" value="">*@
                                                        @if (Disable)
                                                        {
                                                            @Html.TextBoxFor(model => model.port, new { @id = "Port", disabled = "disabled", onkeypress = "return isNumberKey(event);", onchange = "OnChangePort();", @class = "form-control optional", @name = "port", @type = "text", @placeholder = "Port", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Port'", @maxlength = "5" })
                                                        }
                                                        else
                                                        {
                                                            @Html.TextBoxFor(model => model.port, new { @id = "Port", @class = "form-control optional", @name = "port", @type = "text", @placeholder = "Port", @onfocus = "this.placeholder=''", @onblur = "this.placeholder='Port'", @maxlength = "5", @onkeypress = "return isNumberKey(event);", onchange = "OnChangePort();", })
                                                        }
                                                        <span id="Spanport" class="error_message"></span>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12">
                                                        <label class="col-form-label label-align"> @Resource.SSL @Resource.Flag</label>
                                                        @if (Disable)
                                                        {
                                                            @Html.DropDownListFor(model => model.ssl_flag, new List<SelectListItem> { new SelectListItem { Text = "No", Value = "N" },
                                                                                                                      new SelectListItem { Text = "Yes", Value = "Y" },
                                                                                                                      //new SelectListItem { Text = "No", Value = "N" },
                                                                                                                  }, new { @class = "form-control", @id = "SSLFlag", disabled = "disabled", @maxlength = "15" })
                                                        }
                                                        else
                                                        {
                                                            @Html.DropDownListFor(model => model.ssl_flag, new List<SelectListItem> { new SelectListItem { Text = "No", Value = "N" },
                                                                                                                     new SelectListItem { Text = "Yes", Value = "Y" },
                                                                                                                     //new SelectListItem { Text = "No", Value = "N" },
                                                                                                                 }, new { @class = "form-control", @id = "SSLFlag", @maxlength = "15" })
                                                        }
                                                    </div>
                                                    @*<div class="col-md-2 col-sm-12 pl-0">
                                                            <label class="col-form-label label-align"> @Resource.User @Resource.Default @Resource.Credentials</label>
                                                            @if (Disable)
                                                            {
                                                                @Html.DropDownListFor(model => model.use_deflt_cred, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" },
                                                                                                                          new SelectListItem { Text = "Yes", Value = "Y" },
                                                                                                                          new SelectListItem { Text = "No", Value = "N" },
                                                                                                                      }, new { @class = "form-control", @id = "DefaultCredentials", disabled = "disabled", @maxlength = "15"})
                                                            }
                                                            else
                                                            {
                                                                @Html.DropDownListFor(model => model.use_deflt_cred, new List<SelectListItem> { new SelectListItem { Text = "---Select---", Value = "0" },
                                                                                                                         new SelectListItem { Text = "Yes", Value = "Y" },
                                                                                                                         new SelectListItem { Text = "No", Value = "N" },
                                                                                                                     }, new { @class = "form-control", @id = "DefaultCredentials", @maxlength = "15" })
                                                            }
                                                        </div>*@
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section class="panel panel-default">
                                    <div class="panel-heading" role="tab" id="headingFour">
                                        <h4 class="panel-title"> <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="true" aria-controls="collapseFour"> @Resource.ReportAccess <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a> </h4>
                                    </div>
                                    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
                                        <div class="panel-body">
                                            <div class="col-md-4 col-sm-12">
                                                <label class="col-form-label label-align"> @Resource.ReportName<span class="required">*</span> </label>
                                                <select class="form-control" id="ReportName">
                                                    <option value="0">---Select---</option>
                                                    <option value="O">Company Name</option>
                                                    <option value="F">Company Name1</option>
                                                    <option value="I">Company Name2</option>
                                                </select>
                                            </div>
                                            <div class="col-md-1 col-sm-12">
                                                <a href="#">
                                                    <div class="plus_icon2"> <i class="fa fa-plus" id="BtnAttribute" onclick="AddAttribute()"></i> </div>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="table-responsive width99">
                                            <div class="col-md-12 col-sm-12">
                                                <table class="table table-striped jambo_table bulk_action margin10" id="ItmBranchList">
                                                    <thead>
                                                        <tr class="headings">
                                                            <th> @Resource.ReportName</th>
                                                            <th> @Resource.Action</th>
                                                            <th width="40%">&nbsp;</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Role</td>
                                                            <td class=" red center">
                                                                <i class="deleteIcon fa fa-trash" aria-hidden="true" title="@Resource.Delete"></i>
                                                            </td>
                                                            <td>&nbsp;</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Role1</td>
                                                            <td class=" red center">
                                                                <i class="deleteIcon fa fa-trash" aria-hidden="true" title="@Resource.Delete"></i>
                                                            </td>
                                                            <td>&nbsp;</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Role2</td>
                                                            <td class=" red center">
                                                                <i class="deleteIcon fa fa-trash" aria-hidden="true" title="@Resource.Delete"></i>
                                                            </td>
                                                            <td>&nbsp;</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </article>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
}
<script>
    debugger;
    var RequestedUrl = window.location.protocol + "//" + window.location.host + "/SecurityLayer/UserDetail/GetUserDeatilUserstree";

    $.ajax({
        type: 'POST',
        url: RequestedUrl,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        data: JSON.stringify({ UserID: 0 }),
        success: function (Objdata) {
            debugger;
            if (Objdata !== null && Objdata !== "") {
                arr = (Objdata);
                FinalData = []
                $.each(arr, function (i, n) {
                    FinalData.push(n);
                });
                var options = {
                    searchBox: $('#tree_menu'),
                    searchMinInputLength: 1,
                    indentSize: 25,
                    childCountShow: true,
                    color: true,
                    symbols: {
                        collapsed: '▶',
                        expanded: '▼'
                    },
                    css: {
                        childrenContainer: 'simpleTree-childrenContainer',
                        highlight: 'simpleTree-highlight',
                        indent: 'simpleTree-indent',
                        label: 'simpleTree-label',
                        value: 'simpleTree-value',
                        color: 'simpleTree-color',
                        selected: 'simpleTree-selected',
                        toggle: 'simpleTree-toggle'
                    }
                };


                $('#mytree').simpleTree(options, FinalData);

                applyNodeColors($('#mytree'), FinalData);



            }
        }
    });

    // 🔥 Function to color each node recursively
    function applyNodeColors(container, nodes) {
        if (!nodes || nodes.length === 0) return;

        // Loop through all immediate nodeContainers
        $(container).children('.simpleTree-nodeContainer').each(function (index) {
            var node = nodes[index];
            if (!node) return;

            // Apply color to the label
            $(this).children('.simpleTree-label').css('color', node.color);

            // Recursively apply to children
            var childContainer = $(this).children('.simpleTree-childrenContainer');
            if (childContainer.length > 0 && node.children && node.children.length > 0) {
                applyNodeColors(childContainer, node.children);
            }
        });
    }


    $(document).on('click', '.simpleTree-toggle', async function () {
        debugger;
        const $nodeContainer = $(this).closest('.simpleTree-nodeContainer');
        const nodeValue = $nodeContainer.children('.simpleTree-value').text().trim();
        const $childContainer = $nodeContainer.children('.simpleTree-childrenContainer');

        if ($childContainer.length && $childContainer.children().length > 0) {
            // Just toggle visibility
            $childContainer.toggle();
            $(this).text($childContainer.is(':visible') ? '▼' : '▶');
        }
        else {

            await Getdatatree(nodeValue, $childContainer);
        }
    });

    async function Getdatatree(UserID, Container) {
        $.ajax({
            type: 'POST',
            url: RequestedUrl,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            data: JSON.stringify({ UserID: UserID }),
            success: function (Objdata) {
                debugger;
                if (Objdata !== null && Objdata !== "") {
                    arr = (Objdata);
                    FinalData = []
                    $.each(arr, function (i, n) {
                        FinalData.push(n);
                    });
                    applyNodeColorsChild($('#mytree .simpleTree-childrenContainer'), FinalData);



                }
            }
        });
    }
    function applyNodeColorsChild(container, nodes) {
        if (!nodes || nodes.length === 0) return;

        nodes.forEach(node => {
            // Find the node container inside the given container with matching value
            var $nodeContainer = $(container)
                .find('.simpleTree-nodeContainer')
                .filter(function () {
                    var $valueElem = $(this).find('.simpleTree-value').first();
                    return $valueElem.length && $valueElem.text().trim() === node.value;
                })
                .first(); // get only the first match

            if ($nodeContainer.length) {
                // Apply color to the label
                $nodeContainer.find('.simpleTree-label').first().css('color', node.color);

                // Recursively apply colors to children
                if (node.children && node.children.length > 0) {
                    var $childContainer = $nodeContainer.children('.simpleTree-childrenContainer');
                    if ($childContainer.length) {
                        applyNodeColorsChild($childContainer, node.children);
                    }
                }
            }
        });
    }

    // Usage: bind to input search box
    $('#tree_menu').on('input', function (e) {
        debugger;
        var searchValue = e.currentTarget.value;
        FilterSearchTreeTree(searchValue, $('#mytree'));
    });
</script>









<!-- page content end -->