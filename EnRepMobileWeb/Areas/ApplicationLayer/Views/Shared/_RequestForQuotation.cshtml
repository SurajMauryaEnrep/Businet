@using EnRepMobileWeb.Resources;
<script src="~/Content/Scripts/Common/CommonJS.js"></script>
<div class="modal-content">
    <div class="modal-header">
        <h2>@Resource.RFQ @Resource.Tracking</h2> <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>
    <div class="modal-body pop_top">
        <div class="row">
            <div class="col-md-12 col-sm-12 pl-0">
                <div class="col-md-3 col-sm-12 available_right ">
                    <label class="col-form-label label-align" for="">@Resource.RFQ @Resource.Number</label>
                    <input type="text" id="RFQNumber" class="form-control" value="" placeholder="@Resource.RFQ @Resource.Number" readonly>
                </div>
                <div class="col-md-3 col-sm-12 available_right pl-0">
                    <label class="col-form-label label-align" for="">@Resource.RFQ @Resource.Date</label>
                    <input type="date" id="RFQDate" value="" class="form-control" readonly>
                </div>
            </div>
            <div class="clear"></div>


            <div class="col-md-12 col-sm-12">
                <div class="card-box table-responsive dy_table margin10">
                    <div class="sticky-table sticky-ltr-cells sb-container container-example1">
                        <table id="RFQTrackingtbl" class="table table-striped table-bordered margin5 rowhighlighttbl width2500">
                            <thead>
                                <tr class="sticky-header">
                                    <th colspan="4" width="27%" class="light_blue_colour">&nbsp;</th>
                                    <th colspan="4" width="20%" class="light_cream_colour">@Resource.Quotation @Resource.Detail</th>
                                    <th colspan="9" width="53%" class="light_blue1_colour">@Resource.Order @Resource.Detail</th>

                                </tr>
                                <tr class="sticky-header">
                                    <th width="1%" class="light_blue_colour">@Resource.SrNo</th>
                                    <th width="15%" class="light_blue_colour">@Resource.ItemName</th>
                                    <th width="4%" class="light_blue_colour">@Resource.UOM</th>
                                    <th width="5%" class="light_blue_colour">@Resource.RFQ <br />  @Resource.Quantity</th>
                                    <th width="7%" class="light_cream_colour">@Resource.Supplier <br />  @Resource.Name</th>
                                    <th width="5%" class="light_cream_colour">@Resource.Quotation <br /> @Resource.Number</th>
                                    <th width="5%" class="light_cream_colour">@Resource.Quotation <br />  @Resource.Date</th>
                                    <th width="5%" class="light_cream_colour">@Resource.Price <br />  @Resource.Before @Resource.Tax</th>
                                    <th width="5%" class="light_blue1_colour">@Resource.Order <br />  @Resource.Number</th>
                                    <th width="6%" class="light_blue1_colour">@Resource.Order <br />  @Resource.Date</th>
                                    <th width="6%" class="light_blue1_colour">@Resource.Order <br />  @Resource.Quantity</th>
                                    <th width="6%" class="light_blue1_colour">@Resource.Order <br />  @Resource.Price</th>
                                    <th width="6%" class="light_blue1_colour">@Resource.Value</th>
                                    <th width="6%" class="light_blue1_colour">@Resource.TaxAmount</th>                                 
                                    <th width="6%" class="light_blue1_colour">@Resource.Other <br />  @Resource.Charges</th>
                                    <th width="6%" class="light_blue1_colour">@Resource.Order <br />  @Resource.Value</th>
                                </tr>
                            </thead>
                            <tbody id="">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {

        var RFQ_no = $("#RFQNumber").val();
        var RFQ_dt = $("#RFQDate").val();
        initializeRFQTrackingTable(RFQ_no, RFQ_dt)


        //  EditCity();
    });
    function initializeRFQTrackingTable(RFQ_no, RFQ_dt) {
        // Destroy existing instance if any
        if ($.fn.DataTable.isDataTable('#RFQTrackingtbl')) {
            $('#RFQTrackingtbl').DataTable().destroy();
        }

        // Initialize
        $('#RFQTrackingtbl').DataTable({
            //dom: "Blfrtip",
            pageLength: 50,
            "processing": true, // for show progress bar
            "serverSide": true, // for process server side
            "filter": true, // this is for disable filter (search box)
            "orderMulti": false, // for disable multiple column at once
            ajax: {
                url: "/ApplicationLayer/RequestForQuotation/LoadData",
                type: "POST",
                datatype: "json",
                data: { RFQ_no: RFQ_no, RFQ_dt: RFQ_dt }
            },
            columns: [
                {
                    data: null,
                    title: "Sr No",
                    render: function (data, type, row, meta)
                    {
                        debugger;
                        return meta.row + meta.settings._iDisplayStart + 1;
                    },
                    orderable: true,
                    searchable: true
                },
                { data: "item_name", "name": "item_name"},
                { data: "uom_alias" },
                { data: "rfq_qty" },
                { data: "supp_name"},
                { data: "qt_no"},
                { data: "qt_dt" },
                { data: "item_rate" },
                { data: "po_no" },
                { data: "po_dt"},
                { data: "ord_qty_base" },
                { data: "po_item_price" },
                { data: "item_net_val_bs" },
                { data: "item_tax_amt" },             
                { data: "item_oc_amt" },
                { data: "item_gr_val" }
            ],
            columnDefs: StkDtlDataColumnRenders(),
          

        });
        var exportbtn = `<a class="btn btn-default buttons-csv buttons-html5 btn-sm" tabindex="0"
            id='DownloadExcel' aria-controls="RFQTrackingtbl" href="#"><span>CSV</span></a>`;
        $("#RFQTrackingtbl_length").append(exportbtn);

        DownloadExcel();
    }
    function StkDtlDataColumnRenders() {

        var array = [];
        array = [
            {
                'targets': 0,
                'createdCell': function (td, cellData, rowData, row, col) {
                    debugger;

                    $(td).attr('class', 'srno');
                    $(td).addClass('light_blue_colour');
                    if (!rowData.srno) {
                        $(td).hide();
                    } else if (rowData.RowSpan > 1) {
                        $(td).attr('rowspan', rowData.RowSpan);
                    }

                }
            },
            {
                'targets': 1,
                'createdCell': function (td, cellData, rowData, row, col) {
                    debugger;
                    $(td).attr('id', '');
                    $(td).addClass('light_blue_colour');
                    if (!rowData.srno) {
                        $(td).hide();
                    } else if (rowData.RowSpan > 1) {
                        $(td).attr('rowspan', rowData.RowSpan);
                    }
                }
            },
            {
                'targets': 2,
                'createdCell': function (td, cellData, rowData, row, col) {
                    debugger;
                    $(td).addClass('light_blue_colour');
                    if (!rowData.srno) {
                        $(td).hide();
                    } else if (rowData.RowSpan > 1) {
                        $(td).attr('rowspan', rowData.RowSpan);
                    }
                }
            },
            {
                'targets': 3,
                'createdCell': function (td, cellData, rowData, row, col) {
                    debugger;
                    $(td).addClass('light_blue_colour');
                    $(td).attr('id', '');
                    if (!rowData.srno) {
                        $(td).hide();
                    } else if (rowData.RowSpan > 1) {
                        $(td).attr('rowspan', rowData.RowSpan);
                    }

                }
            },
            {
                'targets': 4,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_cream_colour');
                    debugger;
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 5,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_cream_colour');
                    debugger;
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 6,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_cream_colour');
                    debugger;
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 7,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_cream_colour');
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 8,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_blue1_colour');
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 9,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_blue1_colour');
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 10,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_blue1_colour');
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 11,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_blue1_colour');
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 12,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_blue1_colour');
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 13,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_blue1_colour');
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 14,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_blue1_colour');
                    $(td).attr('id', '');
                }
            },
            {
                'targets': 15,
                'createdCell': function (td, cellData, rowData, row, col) {
                    $(td).addClass('light_blue1_colour');
                    $(td).attr('id', '');
                }
            },
           



            {
                render: (data, type, row) => `${data}`,

                targets: 1
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 2
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 3
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 4
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 5
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 6
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 7
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 8
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 9
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 10
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 11
            },
            {
                render: (data, type, row) => `${data}`,
                targets: 12
            },

        ];
        return array;
    }
</script>