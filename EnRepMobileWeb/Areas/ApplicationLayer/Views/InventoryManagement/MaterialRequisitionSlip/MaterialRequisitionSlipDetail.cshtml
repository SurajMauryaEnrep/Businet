@model EnRepMobileWeb.MODELS.ApplicationLayer.InventoryManagement.MRS.MRSModel
@using EnRepMobileWeb.Resources;
@using EnRepMobileWeb.MODELS.Common;
@using System.Data
<style>
    table#Sub_ItemDetailTbl tr th {
        height: 32px;
    }
</style>
<script src="~/Content/Css/jquery/dist/jquery.min.js"></script>
<script src="~/Content/Css/build/js/sweetalert.js"></script>
<script src="~/Content/Scripts/ApplicationLayer/InventoryManagement/MaterialRequisitionSlip/MaterialRequisitionSlipDetails.js"></script>
@*/*start Add by Hina on 13-02-2024 to chk Financial year exist or not*/*@
@{
    if (TempData["Message"] != null)
    {
        if (TempData["Message"] == "Financial Year not Exist")
        {
            <script type="text/javascript">
                swal("", $("#FinancialYearDoesNotExistTransactionCanNotBeDone").text(), "warning");
            </script>
        }
    }
    /*Add by Hina sharma on 13-05-2025 to check Existing with previous year transaction*/
    if (TempData["Message1"] != null)
    {
        if (TempData["Message1"] == "TransNotAllow")
        {
            <script type="text/javascript">
                swal("", $("#NomodificationisallowedinpreviousFYdocument").text(), "warning");
            </script>
        }

    }
}
@*/*End to chk Financial year exist or not*/*@
@if (Session["UserId"] == null)
{
    Response.Redirect("~/Login");
}
@{
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}
@{

    //var rowId = 0;
    var Disable = true;
    var disablePrintbtn = "";
    //if (Session["TransType"].ToString() == "Update")
    if (Model.TransType == "Update")
    {
        //if (Session["Command"].ToString() == "Edit")
        if (Model.Command == "Edit")
        {
            Disable = false;
        }
        else
        {
            Disable = true;
        }
    }
    else
    {
        if (Model.Command == "Refresh")
        //if (Session["Command"].ToString() == "Refresh")
        {
            Disable = true;
        }
        else
        {
            Disable = false;
        }
    }
    if (!Disable || (Model.StatusCode == "C" || Model.mrs_no == null) || ((Model.StatusCode == "D" || Model.StatusCode == "A") && Model.Command == "Edit"))/*add || ((Model.StatusCode == "D" || Model.StatusCode == "A") && Model.Command == "Edit") by Hina sharma on 11-10-2024*/
    {
        disablePrintbtn = "disabled style=filter:grayscale(100%)";
    }

}
@{
    //if (Session["Message"] != null)
    if (Model.Message != null)
    {
        Model.hdnsaveApprovebtn = null;
        //if (Session["Message"].ToString() == "Save")
        if (Model.Message == "Save")
        {
            <script type="text/javascript">
                swal("", $("#savemsg").text(), "success");
            </script>
        }
        if (Model.Message == "Deleted")
        //if (Session["Message"].ToString() == "Deleted")
        {
            <script type="text/javascript">
                swal("", $("#deletemsg").text(), "success");
            </script>
        }
        //if (Session["Message"].ToString() == "Approved")
        if (Model.Message == "Approved")
        {
            <script type="text/javascript">
                swal("", $("#approvemsg").text(), "success");
            </script>
        }
        if (Model.Message == "Approved_ErrorInMail")
        {
            <script type="text/javascript">
                $(document).ready(function () {
                    swal("", $("#approvemsg").text() + '. \n ' + $("#ThereIsSomethingWrongWhileSendingAlerts").text(), "warning");
                });
            </script>
        }
        //if (Session["Message"].ToString() == "Cancelled")
        if (Model.Message == "Cancelled")
        {
            <script type="text/javascript">
                swal("", $("#cancelmsg").text(), "success");
            </script>
        }
        if (Model.Message == "Cancelled_ErrorInMail")
        {
            <script type="text/javascript">
                $(document).ready(function () {
                    swal("", $("#cancelmsg").text() + '. \n ' + $("#ThereIsSomethingWrongWhileSendingAlerts").text(), "warning");
                });
            </script>
        }
        if (Model.Message == "Used")
        {
            <script type="text/javascript">
                swal("", $("#MaterialRequisitionIsUnderProcessDocumentCannotBeModify").text(), "warning");
            </script>
        }
        if (Model.Message == "ErrorInMail")
        {
            <script type="text/javascript">
                swal("", $("#Emailsendingfailedduetotechnicalissue").text(), "warning");
            </script>
        }
        //Session["Message"] = null;
        Model.Message = null;
    }
}
<title>@Model.Title</title>
@using (Html.BeginForm("MaterialRequisitionSlipSave", "MaterialRequisitionSlip", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    {
<div class="row">
    <!-- Forward Information -->
    <div id="Forward_Pop" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            @Html.Partial("~/Areas/Common/Views/PartialForward.cshtml")
        </div>
    </div>
    <!-- Workflow Information -->
    <div id="WorkflowInformation" class="modal fade" role="dialog">
        <div class="modal-dialog" style="max-width:700px;">
            <!-- Modal content-->
            @Html.Partial("~/Areas/Common/Views/_WorkFlow.cshtml")

        </div>
    </div>
    <!-- Sub Item Stock Detail -->
    <div id="SubItemStock" class="modal fade" role="dialog">
        <div class="modal-dialog" id="SubItemStockPopUp" style=" max-width:600px;">
            <!-- Modal content-->
            @Html.Partial("~/Areas/Common/Views/Cmn_PartialSubItemStkDetail.cshtml")
        </div>
    </div>
    <!-- Item Information -->
    <div id="ItemInfo" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            @Html.Partial("~/Areas/Common/Views/_ItemInfomation.cshtml")
        </div>
    </div>
    <!-- Sub Item Detail -->
    <div id="SubItem" class="modal fade" role="dialog">
        <div class="modal-dialog" id="SubItemPopUp" style=" max-width:600px;">
            <!-- Modal content-->
            @{
                SubItemPopupDt mdl = new SubItemPopupDt();
            }
            @Html.Partial("~/Areas/Common/Views/Cmn_PartialSubItemDetail.cshtml", mdl)
        </div>
        <table id="hdn_Sub_ItemDetailTbl" hidden>
            <tbody>
                @if (ViewBag.SubItemDetails != null)
                {
                    foreach (System.Data.DataRow dr in ViewBag.SubItemDetails.Rows)
                    {
                        <tr>
                            <td><input type="text" id="ItemId" value='@dr["item_id"]'></td>
                            <td><input type="text" id="subItemId" value='@dr["sub_item_id"]'></td>
                            <td><input type="text" id="subItemQty" value='@dr["Qty"]'></td>
                        </tr>
                    }
                }
            </tbody>
        </table>
        @Html.HiddenFor(model => model.SubItemDetailsDt, new { @id = "SubItemDetailsDt" })
    </div>
    <!-- WareHouse Information -->
    <div id="WareHouse" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Warehouse WiseStock-->
            <div id="ItemStockWareHouseWise">
                @Html.Partial("~/Areas/Common/Views/PartialItemStockWareHouseWise.cshtml")
            </div>
        </div>
    </div>
    <!-- Item Stock Lot/Batch wise Detail -->
    <div id="ItemStockLotBatchSrWise" class="modal fade" role="dialog">
        <div class="modal-dialog" id="Popup_ItemStockLotBatchSrWise" style=" max-width:1000px;">
            <!-- Modal content-->
            @*@Html.Partial("~/Areas/Common/Views/Cmn_PartialBatchSerialLotWiseDetail.cshtml")*@
        </div>
    </div>
    <div class="col-md-12 col-sm-12 ">
        <div class="x_panel mar_pad1 ">
            <div class="x_content mar_pad1">
                <h2 class="col-md-5 col-sm-12 heading_left_padding ">@ViewBag.MenuPageName</h2>
                <div id="wizard" class="form_wizard wizard_horizontal col-md-3 col-sm-12 work_flow">
                    @if (ViewBag.AppLevel.Rows.Count > 0)
                    {
                        @Html.Partial("~/Areas/Common/Views/_PartialWorkflowBar.cshtml")
                    }
                </div>
                @Html.HiddenFor(model => model.WFBarStatus, new { @id = "WFBarStatus" })
                @Html.HiddenFor(model => model.WFStatus, new { @id = "WFStatus" })
                @Html.HiddenFor(model => model.Createid, new { @id = "Create_ID" })
                @Html.HiddenFor(model => model.WF_status1, new { @id = "WF_status1" })
                @Html.HiddenFor(model => model.hdnsaveApprovebtn, new { @id = "hdnsavebtn" })
                <input type="hidden" id="DocumentMenuId" value="@ViewBag.DocumentMenuId" />
                <div id="" class="col-md-4 col-sm-12 work_flow heading_right_padding">
                    @{
                        //var btnName = Session["BtnName"].ToString();
                        var btnName = Model.BtnName;
                        switch (btnName)
                        {
                            case "BtnAddNew":
                                <ul>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125001")
                                            {
                                                <li>
                                                    <button class="add"
                                                            title="@Resource.AddNew" disabled style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="AddNew" onclick="RemoveSessionData()"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125002")
                                            {
                                                <li>
                                                    <button class="edit"
                                                            title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit" onclick="EnableEditkBtn()"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125004")
                                            {
                                                <li>
                                                    <button class="delete"
                                                            title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                </li>
                                                @Html.HiddenFor(m => m.DeleteCommand, new { @id = "HdDeleteCommand" })
                                            }
                                        }
                                    }



                                    <li>
                                        <button class="save"
                                                title="@Resource.Save" type="submit" onclick="return  InsertMRSDetail();" id="btn_save" name="Command" value="Save"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="forward"
                                                    title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="approve"
                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="refresh"
                                                title="@Resource.Refresh" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                    </li>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125005")
                                            {
                                                <li>
                                                    <button class="print"
                                                            title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        <button class="back"
                                                title="@Resource.Back" disabled style="filter: grayscale(100%)" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                    </li>
                                </ul>
                                break;
                            case "BtnEdit":
                                <ul>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125001")
                                            {
                                                <li>
                                                    <button class="add"
                                                            title="@Resource.AddNew" disabled style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125002")
                                            {
                                                <li>
                                                    <button class="edit"
                                                            title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125004")
                                            {
                                                <li>
                                                    @*@if (Session["DocumentStatus"].ToString() == "D")*@
                                                    @if (Model.DocumentStatus == "D")
                                                    {
                                                        <button class="delete"
                                                                title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>

                                                    }
                                                    else
                                                    {
                                                        //if (Session["Command"].ToString() == "Edit")
                                                        if (Model.Command == "Edit")
                                                        {
                                                            <button class="delete"
                                                                    title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        }
                                                        else
                                                        {
                                                            <button class="delete"
                                                                    title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        }
                                                    }
                                                    @Html.HiddenFor(m => m.DeleteCommand, new { @id = "HdDeleteCommand" })
                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        @*@if (Session["Command"].ToString() == "Edit" && Session["DocumentStatus"].ToString() == "D")*@
                                        @if (Model.Command == "Edit" && Model.DocumentStatus == "D")
                                        {
                                            <button class="save"
                                                    onclick="return InsertMRSDetail()" title="@Resource.Save" type="submit" id="btn_save" name="Command" value="Save"></button>
                                        }
                                        else
                                        {
                                            <button class="save"
                                                    title="@Resource.Save" onclick="return  InsertMRSDetail();" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                        }
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>

                                            @*@if (Session["DocumentStatus"].ToString() == "A")*@
                                            @if (Model.DocumentStatus == "A")
                                            {
                                                <button class="forward"
                                                        title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                            }
                                            else
                                            {
                                                <button class="forward"
                                                        title="@Resource.Forward" style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                            }
                                        </li>
                                    }

                                    <li>
                                        @*@if (Session["DocumentStatus"].ToString() == "A" || Session["DocumentStatus"].ToString() == "D")*@
                                        @if (Model.DocumentStatus == "A" || Model.DocumentStatus == "D")
                                        {
                                            <button class="approve"
                                                    title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                        }
                                        else
                                        {
                                            //if (Session["Command"].ToString() == "Edit")
                                            if (Model.Command == "Edit")
                                            {
                                                <button class="approve"
                                                        title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                            }
                                            else
                                            {
                                                <button class="approve"
                                                        title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                            }
                                        }
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            @*@if (Session["DocumentStatus"].ToString() == "A")*@
                                            @if (Model.DocumentStatus == "A")
                                            {
                                                //if (Session["Command"].ToString() == "Edit")
                                                if (Model.Command == "Edit")
                                                {
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="btn_workflow" name="Command" value="Workflow"></button>
                                                }
                                                else
                                                {
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" disabled style="filter: grayscale(100%)" type="submit" id="btn_workflow" name="Command" value="Workflow"></button>
                                                }
                                            }
                                            else
                                            {
                                                <button class="workflow"
                                                        title="@Resource.Workflow" disabled style="filter: grayscale(100%)" type="submit" id="btn_workflow" name="Command" value="Workflow"></button>
                                            }
                                        </li>
                                    }

                                    <li>

                                        <button class="refresh"
                                                title="@Resource.Refresh" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>

                                    </li>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125005")
                                            {
                                                <li>
                                                    @*@if (Session["DocumentStatus"].ToString() == "A")
                                                        {*@

                                                    <button class="print"
                                                            title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                    @*}
                                                        else
                                                        {
                                                            <button class="print"
                                                                    title="@Resource.Print"  type="submit" id="btn_print" name="Command" value="Print"></button>
                                                        }*@

                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        <button class="back"
                                                title="@Resource.Back" disabled style="filter: grayscale(100%)" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                    </li>
                                </ul>
                                break;
                            case "BtnRefresh":
                                <ul>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125001")
                                            {
                                                <li>
                                                    <button class="add"
                                                            title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125002")
                                            {
                                                <li>
                                                    <button class="edit"
                                                            title="@Resource.Edit" style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125004")
                                            {
                                                <li>
                                                    <button class="delete"
                                                            title="@Resource.Delete" onclick="return functionConfirm(this)" style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                </li>
                                                @Html.HiddenFor(m => m.DeleteCommand, new { @id = "HdDeleteCommand" })
                                            }
                                        }
                                    }



                                    <li>
                                        <button class="save"
                                                title="@Resource.Save" onclick="return  InsertMRSDetail();" style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="forward"
                                                    title="@Resource.Forward" style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="approve"
                                                title="@Resource.Approve" style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="refresh"
                                                title="@Resource.Refresh" style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                    </li>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125005")
                                            {
                                                <li>
                                                    <button class="print"
                                                            title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        <button class="back"
                                                title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                    </li>
                                </ul>
                                break;
                            case "BtnDelete":
                                <ul>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125001")
                                            {
                                                <li>
                                                    <button class="add"
                                                            title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125002")
                                            {
                                                <li>
                                                    <button class="edit"
                                                            title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125004")
                                            {
                                                <li>
                                                    <button class="delete"
                                                            title="@Resource.Delete" onclick="return functionConfirm(this)" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                </li>
                                                @Html.HiddenFor(m => m.DeleteCommand, new { @id = "HdDeleteCommand" })
                                            }
                                        }
                                    }


                                    <li>
                                        <button class="save"
                                                title="@Resource.Save" onclick="return InsertMRSDetail()" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="forward"
                                                    title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="approve"
                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="workflow"
                                                    title="@Resource.Workflow" disabled style="filter: grayscale(100%)" type="submit" id="btn_workflow" name="Command" value="Workflow"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="refresh"
                                                title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                    </li>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125005")
                                            {
                                                <li>
                                                    <button class="print"
                                                            title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        <button class="back"
                                                title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                    </li>
                                </ul>
                                break;
                            case "Refresh":
                                <ul>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125001")
                                            {
                                                <li>
                                                    <button class="add" title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125002")
                                            {

                                                <li>
                                                    <button class="edit"
                                                            title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125004")
                                            {
                                                <li>
                                                    <button class="delete"
                                                            title="@Resource.Delete" onclick="return functionConfirm(this)" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                </li>
                                                @Html.HiddenFor(m => m.DeleteCommand, new { @id = "HdDeleteCommand" })
                                            }
                                        }
                                    }


                                    <li>
                                        <button class="save"
                                                title="@Resource.Save" disabled style="filter: grayscale(100%)" onclick="return InsertMRSDetail()" type="submit" id="btn_save" name="Command" value="Save"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="forward"
                                                    title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="approve"
                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="workflow" title="@Resource.Workflow" type="button" id="btn_workflow" onclick="ForwardHistoryBtnClick();" name="Command" value="Workflow" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="refresh"
                                                title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                    </li>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125005")
                                            {
                                                <li>
                                                    <button class="print"
                                                            title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        <button class="back"
                                                title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                    </li>
                                </ul>
                                break;
                            case "BtnToDetailPage":
                                <ul>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125001")
                                            {
                                                <li>
                                                    <button class="add"
                                                            title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125002")
                                            {
                                                if (Model.SrcType != null && Model.DocumentStatus == "A")
                                                {
                                                    if (Model.DocumentStatus == "A" && Model.src_type != "O")
                                                    {
                                                        <li>
                                                            <button class="edit" onclick=" EditBtnClick()" disabled style="filter: grayscale(100%)"
                                                                    title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    if (Model.src_type == "O" && Model.DocumentStatus == "A")
                                                    {
                                                        <li>
                                                            <button class="edit" onclick=" EditBtnClick()"
                                                                    title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }

                                                }
                                                else
                                                {      //if (Session["DocumentStatus"].ToString() == "D" || Session["DocumentStatus"].ToString() == "A" || Session["DocumentStatus"].ToString() == "PI")
                                                    if (Model.DocumentStatus == "D" || Model.DocumentStatus == "A" || Model.DocumentStatus == "PI")
                                                    {
                                                        <li>
                                                            <button class="edit" onclick=" EditBtnClick()"
                                                                    title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    else
                                                    {
                                                        <li>
                                                            <button class="edit" onclick=" EditBtnClick()" disabled style="filter: grayscale(100%)"
                                                                    title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            if (Row["feature_id"].ToString() == "105102125004")
                                            {

                                                //if (Session["DocumentStatus"].ToString() == "D")
                                                if (Model.DocumentStatus == "D")
                                                {
                                                    <li>
                                                        <button class="delete"
                                                                title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                    </li>
                                                }
                                                else
                                                {
                                                    <li>
                                                        <button class="delete"
                                                                title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                    </li>
                                                }
                                                @Html.HiddenFor(m => m.DeleteCommand, new { @id = "HdDeleteCommand" })
                                            }
                                        }
                                    }


                                    <li>
                                        <button class="save"
                                                title="@Resource.Save" disabled style="filter: grayscale(100%)" onclick="return InsertMRSDetail()" type="submit" id="btn_save" name="Command" value="Save"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            @*@if (Session["DocumentStatus"].ToString() == "D" || Session["DocumentStatus"].ToString() == "F")*@
                                            @if (Model.DocumentStatus == "D" || Model.DocumentStatus == "F")
                                            {
                                                if (ViewBag.ForwardEnbl == "Y")
                                                {/*start Add by Hina on 13-02-2024 to chk Financial year exist or not*/
                                                    //if (ViewBag.Message == "Financial Year not Exist")
                                                    /*Above Commented and modify by Hina sharma on 13-05-2025 to check Existing with previous year transaction*/

                                                    if (ViewBag.Message == "TransNotAllow")
                                                    {/*data-target="" value will be balnk in this case*/
                                                        <button class="forward"
                                                                title="@Resource.Forward" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" id="btn_forward" name="Command" value="Forward"></button>
                                                    }/*End to chk Financial year exist or not*/
                                                    else
                                                    {
                                                        <button class="forward"
                                                                title="@Resource.Forward" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="btn_forward" name="Command" value="Forward"></button>
                                                    }/*commented by Hina on 13-02-2024 to chk Financial year exist or not*/
                                                    @*<button class="forward"
                                                        title="@Resource.Forward" type="submit" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="btn_forward" name="Command" value="Forward"></button>*@
                                                }
                                                else
                                                {
                                                    <button class="forward"
                                                            title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                }
                                            }
                                            else
                                            {
                                                <button class="forward"
                                                        title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                            }
                                        </li>
                                    }


                                    <li>
                                        @*@if (Session["DocumentStatus"].ToString() == "D" || Session["DocumentStatus"].ToString() == "F")*@
                                        @if (Model.DocumentStatus == "D" || Model.DocumentStatus == "F")
                                        {
                                            if (ViewBag.Approve == "Y")
                                            {
                                                if (ViewBag.AppLevel.Rows.Count > 0)
                                                {/*start Add by Hina on 13-02-2024 to chk Financial year exist or not*/
                                                    //if (ViewBag.Message == "Financial Year not Exist")
                                                    /*Above Commented and modify by Hina sharma on 13-05-2025 to check Existing with previous year transaction*/

                                                    if (ViewBag.Message == "TransNotAllow")
                                                    {/*data-target="" value will be balnk in this case*/
                                                        <button class="approve"
                                                                title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" id="btn_approve" name="Command" value="Approve"></button>
                                                    }/*End to chk Financial year exist or not*/
                                                    else
                                                    {
                                                        <button class="approve"
                                                                title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="btn_approve" name="Command" value="Approve"></button>
                                                    }
                                                    /*commented by Hina on 13-02-2024 to chk Financial year exist or not*/
                                                    @*<button class="approve"
                                                        title="@Resource.Approve" type="submit" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="btn_approve" name="Command" value="Approve"></button>*@
                                                }
                                                else
                                                {
                                                    <button class="approve"
                                                            title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                }

                                            }
                                            else
                                            {
                                                <button class="approve"
                                                        title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                            }
                                        }
                                        else
                                        {
                                            <button class="approve"
                                                    title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                        }
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="workflow" title="@Resource.Workflow"
                                                    type="submit" id="btn_workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" name="Command" value="Workflow"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="refresh"
                                                title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                    </li>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125005")
                                            {
                                                <li>
                                                    <button class="print"
                                                            title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        <button class="back"
                                                title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                    </li>
                                </ul>
                                break;
                            case "BtnSave":
                                <ul>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125001")
                                            {
                                                <li>
                                                    <button class="add"
                                                            title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125002")
                                            {
                                                <li>
                                                    <button class="edit"
                                                            title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125004")
                                            {
                                                //if (Session["DocumentStatus"].ToString() == "A")
                                                if (Model.DocumentStatus == "A")
                                                {
                                                    <li>
                                                        <button class="delete"
                                                                title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" disabled style="filter: grayscale(100%)" name="Command" value="Delete"></button>
                                                    </li>
                                                }
                                                else
                                                {
                                                    <li>
                                                        <button class="delete"
                                                                title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                    </li>

                                                }
                                                @Html.HiddenFor(m => m.DeleteCommand, new { @id = "HdDeleteCommand" })
                                            }
                                        }
                                    }



                                    <li>
                                        <button class="save"
                                                title="@Resource.Save" disabled style="filter: grayscale(100%)" onclick="return InsertMRSDetail()" type="submit" id="btn_save" name="Command" value="Save"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        //if (Session["DocumentStatus"].ToString() == "A")
                                        if (Model.DocumentStatus == "A")
                                        {
                                            <li>
                                                <button class="forward"
                                                        title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                            </li>
                                        }
                                        else
                                        {
                                            <li>
                                                <button class="forward"
                                                        title="@Resource.Forward" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                            </li>

                                        }
                                    }

                                    @*@if (Session["DocumentStatus"].ToString() == "A")*@
                                    @if (Model.DocumentStatus == "A")
                                    {
                                        <li>
                                            <button class="approve"
                                                    title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                        </li>
                                    }
                                    else
                                    {
                                        <li>
                                            <button class="approve"
                                                    title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                        </li>
                                    }
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="workflow"
                                                    title="@Resource.Workflow" disabled style="filter: grayscale(100%)" type="submit" id="btn_workflow" name="Command" value="Workflow"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="refresh"
                                                title="@Resource.Refresh" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                    </li>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125005")
                                            {
                                                <li>
                                                    <button class="print"
                                                            title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        <button class="back"
                                                title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                    </li>
                                </ul>
                                break;
                            case "BtnApprove":
                                <ul>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125001")
                                            {
                                                <li>
                                                    <button class="add"
                                                            title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125002")
                                            {
                                                <li>
                                                    <button class="edit"
                                                            title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                </li>
                                            }
                                            if (Row["feature_id"].ToString() == "105102125004")
                                            {
                                                <li>
                                                    <button class="delete"
                                                            title="@Resource.Delete" disabled style="filter: grayscale(100%)" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                </li>
                                            }
                                        }
                                    }



                                    <li>
                                        <button class="save"
                                                title="@Resource.Save" disabled style="filter: grayscale(100%)" onclick="return InsertMRSDetail()" type="submit" id="btn_save" name="Command" value="Save"></button>
                                    </li>
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        //if (Session["DocumentStatus"].ToString() == "A")
                                        if (Model.DocumentStatus == "A")
                                        {
                                            <li>
                                                <button class="forward"
                                                        title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                            </li>
                                        }
                                        else
                                        {
                                            <li>
                                                <button class="forward"
                                                        title="@Resource.Forward" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                            </li>

                                        }
                                    }

                                    @*@if (Session["DocumentStatus"].ToString() == "A")*@
                                    @if (Model.DocumentStatus == "A")
                                    {
                                        <li>
                                            <button class="approve"
                                                    title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                        </li>
                                    }
                                    else
                                    {
                                        <li>
                                            <button class="approve"
                                                    title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                        </li>
                                    }
                                    @if (ViewBag.AppLevel.Rows.Count > 0)
                                    {
                                        <li>
                                            <button class="workflow" title="@Resource.Workflow"
                                                    type="submit" id="btn_workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" name="Command" value="Workflow"></button>
                                        </li>
                                    }

                                    <li>
                                        <button class="refresh"
                                                title="@Resource.Refresh" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                    </li>
                                    @if (ViewBag.VBRoleList != null)
                                    {
                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                        {
                                            if (Row["feature_id"].ToString() == "105102125005")
                                            {
                                                <li>
                                                    <button class="print"
                                                            title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                </li>
                                            }
                                        }
                                    }

                                    <li>
                                        <button class="back"
                                                title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                    </li>
                                </ul>
                                break;

                        }
                    }

                </div>
                <div class="x_title pad_mar ">
                    <div class="col-md-12 col-sm-12 icon_tool ">
                        <!--<span>Collapsible / Accordion </span>-->
                        <div class="approved_by">
                            <ul>
                                <li>
                                    <span>@Resource.CreatedBy<br><b>@Html.DisplayFor(model => model.CreatedBy)</b></span>
                                </li>
                                <li>
                                    <span>@Resource.Createdon<br><b>@Html.DisplayFor(model => model.CreatedOn)</b></span>
                                </li>
                                <li>
                                    <span>@Resource.ApprovedBy<br><b>@Html.DisplayFor(model => model.ApprovedBy)</b></span>
                                </li>
                                <li>
                                    <span>@Resource.ApprovedOn<br><b>@Html.DisplayFor(model => model.ApprovedOn)</b></span>
                                </li>
                                <li>
                                    <span>@Resource.AmendedBy<br><b>@Html.DisplayFor(model => model.AmmendedBy)</b></span>
                                </li>
                                <li>
                                    <span>@Resource.AmendedOn<br> <b>@Html.DisplayFor(model => model.AmmendedOn)</b></span>
                                </li>
                                <li><span>@Resource.Status<br>  <b>@Html.DisplayFor(model => model.mrs_status)</b></span></li>
                                <li>  <b>@Html.HiddenFor(model => model.StatusCode, new { @id = "hdStatus_Code" })</b></li>

                            </ul>
                        </div>
                        @Html.HiddenFor(model => model.Title, new { @id = "hdn_title" })
                        @Html.HiddenFor(model => model.TransType, new { @id = "hdn_TransType" })
                        @Html.HiddenFor(m => m.ListFilterData1, new { @id = "ListFilterData1", value = Model.ListFilterData1 })
                        @{
                            Model.hdnCommand = Model.Command;
                        }
                        @Html.HiddenFor(m => m.hdnCommand, new { @id = "hdnCommand" })
                        @if ((Model.StatusCode == "D" || Model.StatusCode == "F" || string.IsNullOrEmpty(Model.StatusCode) == true))
                        {
                            if (Disable)
                            {
                                <input id="DisableSubItem" value="Y" hidden />
                            }
                            else
                            {
                                <input id="DisableSubItem" value="N" hidden />
                            }

                        }
                        else
                        {
                            <input id="DisableSubItem" value="Y" hidden />
                        }
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-12 col-sm-12 ">
        <div class="x_panel mar_pad1 ">
            <div class="x_content mar_pad1">
                <article class="panel-group bs-accordion" id="accordion" role="tablist" aria-multiselectable="true">
                    <section class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingOne">
                            <h4 class="panel-title">  <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne"> @Resource.RequisitionDetail<span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a></h4>
                        </div>
                        <div id="collapseOne" class="panel-collapse in collapse show" role="tabpanel" aria-labelledby="headingOne" style="">
                            <div class="panel-body">
                                <div class="col-md-2 col-sm-12">
                                    <label class="col-form-label label-align">@Resource.RequisitionType <span class="required">*</span></label>
                                    @*@if ((Session["DocumentStatus"].ToString() != "D") || Disable)*@
                                    @if ((Model.DocumentStatus != "D" || Model.Command == "Edit" || Model.Command == "Update") || Disable)
                                    {
                                        @Html.DropDownListFor(model => model.mrs_type, new SelectList(new List<Object>
                                        {
                                           new { value = "0", text = "--Select--"  },
                                             new { value = "E" , text = "External Issue" },
                                           new { value = "I", text = "Internal Issue"  },

                                   new { value = "S" , text = "Sample Issue" },
                                  // new { value = "O" , text = "Production Order" }
                                        }, "value", "text"), new { @class = "form-control", @id = "ddlRequisitionTypeList", disabled = "disabled", @onchange = "onChangeddlRequisitionTypeList()" })
                                        @Html.ValidationMessageFor(model => model.mrs_type, String.Empty, new { @style = "color:red;!important", @id = "vmRequisitionTypeList" })
                                        @Html.HiddenFor(model => model.mrs_type, new { @id = "hdMrsType" })
                                    }
                                    else
                                    {
                                        @Html.DropDownListFor(model => model.mrs_type, new SelectList(new List<Object>
                                        {
                                           new { value = "0", text = "--Select--"  },
                                             new { value = "E" , text = "External Issue" },
                                           new { value = "I", text = "Internal Issue"  },

                                   new { value = "S" , text = "Sample Issue" },
                                  // new { value = "O" , text = "Production Order" }
                                        }, "value", "text"), new { @class = "form-control", @id = "ddlRequisitionTypeList", @onchange = "onChangeddlRequisitionTypeList()" })
                                        @Html.ValidationMessageFor(model => model.mrs_type, String.Empty, new { @style = "color:red;!important", @id = "vmRequisitionTypeList" })
                                        @Html.HiddenFor(model => model.mrs_type, new { @id = "hdMrsType" })
                                    }
                                    @Html.HiddenFor(model => model.mrs_type, new { @id = "hdmrstype" })
                                    @*@Html.HiddenFor(model => model.TransType)*@

                                </div>
                                <div class="col-md-2 col-sm-12" id="SourceTypediv">
                                    <label class="col-form-label label-align">@Resource.SourceType</label>
                                    @if (Disable || Model.DocumentStatus != "D" || Model.Command == "Edit" || Model.Command == "Update")
                                    {
                                        @Html.DropDownListFor(model => model.src_type, new SelectList(new List<Object>
                                                                                       {
                                       // new { value = "0", text = "--Select--"  },
                                                new { value = "D" , text = "Direct" },
                                         new { value = "O", text = "Production Order"  },
                                    }, "value", "text"), new { @class = "form-control", @id = "ddlSourceType", @onchange = "onChangeddlSourceType()", disabled = "disabled", })
                                        @Html.HiddenFor(model => model.src_type, new { @id = "hdsrc_type" })
                                    }
                                    else
                                    {
                                        @Html.DropDownListFor(model => model.src_type, new SelectList(new List<Object>
                                       {
                                         // new { value = "0", text = "--Select--"  },
                                            new { value = "D" , text = "Direct" },
                                          new { value = "O", text = "Production Order"  },
                                       }, "value", "text"), new { @class = "form-control", @id = "ddlSourceType", @onchange = "onChangeddlSourceType()" })
                                        @Html.HiddenFor(model => model.src_type, new { @id = "hdsrc_type" })
                                    }

                                </div>

                                <div class="col-md-2 col-sm-12">
                                    <label class="col-form-label label-align">@Resource.RequisitionNumber</label>
                                    @*<input id="RequisitionNumber" class="form-control" autocomplete="off" maxlength="25" tabindex="5" type="text" name="RequisitionNumber"  placeholder="Requisition Number"  onblur="this.placeholder='Requisition Number'" disabled>*@
                                    @Html.HiddenFor(model => model.mrs_no, new { @id = "hdMrsNo" })
                                    @Html.TextBoxFor(model => model.mrs_no, new { @readonly = "readonly", @value = @Model.mrs_no, @id = "MRSNumber", @maxlength = "25", @class = "form-control", @placeholder = "Requisition Number", disabled = "disabled" })
                                    @Html.HiddenFor(model => model.mrs_no, new { @id = "HdnDocNo_ForAttach" })
                                </div>
                                <div class="col-md-2 col-sm-12">
                                    <label class="col-form-label label-align">@Resource.RequisitionDate</label>
                                    @Html.TextBoxFor(model => model.mrs_dt, "{0:yyyy-MM-dd}", new { @class = "form-control", @id = "txtMrsDate", @type = "date", @readonly = "readonly", @value = DateTime.Now })
                                    @*<input type="date" class="form-control" id="" placeholder="Invoice Date" aria-describedby="inputSuccess2Status" disabled>*@
                                    <span id="inputSuccess2Status" class="sr-only">(success)</span>
                                </div>
                                <div class="col-md-2 col-sm-12">
                                    <div class="custom-control custom-switch margin25 margin-left25">
                                        @*<input type="checkbox" class="custom-control-input col-md-3 col-sm-12 margin-switch" onchange="CheckedFClose()" id="ForceClosed" disabled>*@
                                        @*<label class="custom-control-label col-md-9 col-sm-12" for="ForceClosed" style="padding: 3px 0px;"> @Resource.ForceClosed  </label>*@
                                        <label>
                                            @*@if ((Session["DocumentStatus"].ToString() == "PI") && Session["Command"].ToString() == "Edit")*@
                                            @if ((Model.DocumentStatus == "PI") && Model.Command == "Edit")
                                            {

                                                @Html.CheckBoxFor(model => model.ForceClose, new { @class = "js-switch", @onchange = "CheckedFClose()", @id = "ForceClosed" })
                                            }
                                            else
                                            {

                                                @Html.CheckBoxFor(model => model.ForceClose, new { @class = "js-switch", @id = "ForceClosed", @disabled = "" })
                                            }
                                            @Resource.ForceClosed
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-2 col-sm-12">
                                    <div class="custom-control custom-switch margin25">
                                        <input type="checkbox" class="custom-control-input col-md-3 col-sm-12 margin-switch" onchange="CheckedCancelled()" id="Cancelled" disabled>
                                        @*<label class="custom-control-label col-md-9 col-sm-12" for="Cancelled" style="padding: 3px 0px;"> @Resource.Cancelled  </label>*@
                                        <label>
                                            @*@if ((Session["DocumentStatus"].ToString() == "A") && Session["Command"].ToString() == "Edit")*@
                                            @if ((Model.DocumentStatus == "A") && Model.Command == "Edit")
                                            {

                                                @Html.CheckBoxFor(model => model.CancelFlag, new { @class = "js-switch", onclick = "OnChangeCancelFlag()" })
                                            }
                                            else
                                            {

                                                @Html.CheckBoxFor(model => model.CancelFlag, new { @class = "js-switch", @disabled = "" })
                                            }
                                            @Resource.Cancelled
                                        </label>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="col-md-2 col-sm-12">
                                    <label class="col-form-label label-align">@Resource.RequirementArea <span class="required">*</span></label>
                                    @*@if ((Session["DocumentStatus"].ToString() != "D") || Disable)*@
                                    @if ((Model.DocumentStatus != "D") || (Model.BtnName == "BtnName" && Model.Message == "" || Model.Command == "Edit" || Model.Command == "Update") || Disable)
                                    {
                                        @Html.DropDownListFor(model => model.req_area, new SelectList(Model.RequirementAreaList, "req_id", "req_val"), new { @class = "form-control", disabled = "disabled", id = "ddlRequiredArea" })
                                        @Html.ValidationMessageFor(model => model.req_area, String.Empty, new { @style = "color:red;!important", @id = "vmRequiredArea" })
                                        @Html.HiddenFor(model => model.req_area, new { @id = "hdRequiredArea" })
                                    }
                                    else
                                    {
                                        @Html.DropDownListFor(model => model.req_area, new SelectList(Model.RequirementAreaList, "req_id", "req_val"), new { @class = "form-control", onchange = "onChangeRequiredArea()", id = "ddlRequiredArea" })
                                        @Html.ValidationMessageFor(model => model.req_area, String.Empty, new { @style = "color:red;!important", @id = "vmRequiredArea" })
                                        @Html.HiddenFor(model => model.req_area, new { @id = "hdRequiredArea" })
                                    }
                                </div>
                                @if (Model.SrcType != null && Model.SrcType != "" && Model.src_type != "O")
                                {
                                    <div class="col-md-2 col-sm-12">
                                        <label class="col-form-label label-align">@Resource.SourceType</label>
                                        @*<input class="form-control" id="MRS_SourceType" readonly maxlength="25" name="SourceType" placeholder="@Resource.SourceType" type="text" value="">*@
                                        @Html.TextBoxFor(model => model.SrcType, new { @readonly = "readonly", @id = "MRS_SourceType", @class = "form-control", @placeholder = "Source Type" })
                                        @Html.HiddenFor(model => model.SrcType, new { @id = "HdnSrcTyp" })

                                    </div>
                                    <div class="col-md-2 col-sm-12">
                                        <label class="col-form-label label-align">@Resource.Source @Resource.DocumentNumber</label>
                                        @*<input class="form-control" id="MRS_SourceDocNo" readonly maxlength="25" name="" placeholder="@Resource.Source @Resource.DocumentNumber" type="text" value="">*@
                                        @Html.TextBoxFor(model => model.SrcDocNo, new { @readonly = "readonly", @id = "MRS_SourceDocNo", @class = "form-control", @placeholder = "Source Document Number" })
                                        @Html.HiddenFor(model => model.SrcDocNo, new { @id = "HdnSrcDocno" })

                                    </div>
                                    <div class="col-md-2 col-sm-12">
                                        <label class="col-form-label label-align">@Resource.Source @Resource.DocumentDate</label>
                                        @*<input class="form-control" id="MRS_SourceDocDate" readonly maxlength="25" name="" placeholder="@Resource.Source @Resource.DocumentDate" type="text" value="">*@
                                        @Html.TextBoxFor(model => model.SrcDocDt, new { @readonly = "readonly", @id = "MRS_SourceDocDate", @class = "form-control", @placeholder = "Source Document Date" })
                                        @Html.HiddenFor(model => model.SrcDocDt, new { @id = "HdnSrcDocdt" })

                                    </div>
                                }

                                <div id="div_IssueTo" class="col-md-2 col-sm-12 dynamic_select" style="display:none;">
                                    <label class="col-form-label label-align">@Resource.IssueTo<span class="required">*</span></label>

                                    @*@if ((Session["DocumentStatus"].ToString() != "D") || Disable)*@
                                    @if ((Model.DocumentStatus != "D" || Model.Command == "Edit" || Model.Command == "Update") || Disable)
                                    {
                                        @Html.DropDownListFor(model => model.issue_to, new SelectList(Model.IssueList, "issue_id", "issue_val"), new { @class = "form-control", @onchange = "OnChangeIssueto();", disabled = "disabled", id = "EntityName" })
                                        @Html.ValidationMessageFor(model => model.issue_to, String.Empty, new { @style = "color:red;!important", @id = "vmEntity" })
                                        @Html.HiddenFor(model => model.issue_to, new { @id = "hdEntity" })
                                        @Html.HiddenFor(model => model.entity_type, new { @id = "hdEntitype" })
                                    }
                                    else
                                    {
                                        @Html.DropDownListFor(model => model.issue_to, new SelectList(Model.IssueList, "issue_id", "issue_val"), new { @class = "form-control", @onchange = "OnChangeIssueto();", id = "EntityName" })
                                        @Html.ValidationMessageFor(model => model.issue_to, String.Empty, new { @style = "color:red;!important", @id = "vmEntity" })
                                        <input type="hidden" id="GetAutoCompleteEntity" value='@Url.Action("GetAutoCompleteSearchEntity", "MaterialRequisitionSlip")' />
                                        @Html.HiddenFor(model => model.issue_to, new { @id = "hdEntity" })
                                        @Html.HiddenFor(model => model.entity_type, new { @id = "hdEntitype" })
                                    }

                                </div>

                                <div class="col-md-2 col-sm-12">
                                    <label class="col-form-label label-align">@Resource.remarks</label>
                                    @*@if ((Session["DocumentStatus"].ToString() != "D") || Disable)*@
                                    @if ((Model.DocumentStatus != "D") || Disable)
                                    {
                                        @Html.TextAreaFor(model => model.mrs_rem, new { @id = "txtMrsRemarks", @readonly = "readonly", @maxlength = "100", @class = "form-control remarksmessage ", @placeholder = Resource.remarks, })
                                    }
                                    else
                                    {
                                        @Html.TextAreaFor(model => model.mrs_rem, new { @id = "txtMrsRemarks", @maxlength = "100", @class = "form-control remarksmessage", @placeholder = Resource.remarks, })
                                    }
                                </div>
                                <div>
                                    @if ((Model.DocumentStatus != "D") || Disable)
                                    {

                                    }
                                    else
                                    {
                                        <div class="col-md-4 col-sm-12" id="div_replicateWith" style="display:none">
                                            <label class="col-form-label label-align"> @Resource.ReplicateWith</label>
                                            <select class="form-control" id="ddlReplicateWith" name="ReplicateWith" onchange="OnChanngReplicateWith()" @*onchange="ddlReplicateWith_onchange()"*@>
                                            </select>
                                            @*<button type="button" hidden="hidden" id="HdnReplicateBtn" data-toggle="modal" data-target="#SelectReplicateWithType" data-bs-backdrop data-keyboard="false"></button>
                                                @Html.HiddenFor(model => model.ReplicateWith, new { @id = "hdn_ReplicateWith" })*@
                                        </div>
                                    }
                                </div>
                                <div class="col-md-2 col-sm-12" id="productiondt_no">
                                    <label class="col-form-label label-align" id="pro_orderNumb">@Resource.Production @Resource.Order @Resource.Number <span class="required">*</span></label>
                                    @if (((Model.DocumentStatus != "D") || Model.Command == "Refresh" || Model.Command == "Add" || Model.Command == "Edit" || Model.Command == "Update") && Disable)
                                    {
                                        @Html.DropDownListFor(model => model.Pro_order_Num, new SelectList(Model.docNoLists, "SrcDocnoId", "SrcDocnoVal"),
                                                            new { @class = "form-control", @id = "src_doc_number", @disabled = "disabled", })
                                    }
                                    else
                                    {
                                        @Html.DropDownListFor(model => model.Pro_order_Num, new SelectList(Model.docNoLists, "SrcDocnoId", "SrcDocnoVal"),
                                                                                    new { @class = "form-control", @id = "src_doc_number", @onchange = "OnchangeSrcDocNumber()" })
                                    }
                                    @Html.HiddenFor(m => m.Pro_order_Num, new { @id = "Hdn_src_doc_number" })

                                    @Html.ValidationMessageFor(model => model.Pro_order_Num, String.Empty, new { @style = "color:red;!important", @id = "SpanSourceDocNoErrorMsg" })
                                    @*<select class="form-control" disabled="disabled" id="" name="Production Order" onchange="">
                                            <option value="0">--Select--</option>
                                            <option value="">Production Order</option>
                                            <option value="">Production Order 1</option>
                                        </select>*@
                                </div>
                                <div class="col-md-2 col-sm-12">
                                    <label class="col-form-label label-align" id="productionorder_dt">@Resource.Production @Resource.Date</label>
                                    @*<input class="form-control" data-val="true" data-val-date="" id="" name="ProductionDate" placeholder="@Resource.Production @Resource.Date" readonly="readonly" type="date" value="">*@
                                    @Html.TextBoxFor(model => model.Pro_order_dt, "{0:yyyy-MM-dd}", new { @id = "src_doc_date", @type = "date", @class = "form-control date", @autocomplete = "off", @name = "ProductionDate", @placeholder = @Resource.SourceDocumentDate, @onblur = "this.placeholder='" + @Resource.SourceDocumentDate + "'", @readonly = "readonly" })
                                </div>
                                @if (Disable)
                                {
                                    <div class="col-md-2 col-sm-12 no-padding">
                                        <div class="col-md-10 col-sm-12">
                                            <label class="col-form-label label-align" id="output_itm">@Resource.Output @Resource.Item</label>
                                            @Html.TextBoxFor(model => model.Out_PutItm, new { @id = "Output_Item", @type = "text", @class = "form-control", @autocomplete = "off", @name = "OutputItem", @placeholder = @Resource.Output, @Resource.Item, @onblur = "this.placeholder='" + @Resource.Output + @Resource.Item + "'", @readonly = "readonly" })
                                            @*<input class="form-control" data-val="true" id="Output_Item" name="OutputItem" placeholder="@Resource.Output @Resource.Item" readonly="readonly" type="text" value="">*@
                                        </div>
                                        <div class="col-md-2 col-sm-12 mt-4" id="plusbtnhd" style="display: none;">
                                            <div class="plus_icon1" id="">
                                                <i class="fa fa-plus" onclick="addbtnnewdata()" title="@Resource.AddNew"></i>
                                            </div>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="col-md-2 col-sm-12 no-padding">
                                        <div class="col-md-10 col-sm-12">
                                            <label class="col-form-label label-align" id="output_itm">@Resource.Output @Resource.Item</label>
                                            @Html.TextBoxFor(model => model.Out_PutItm, new { @id = "Output_Item", @type = "text", @class = "form-control", @autocomplete = "off", @name = "OutputItem", @placeholder = @Resource.Output, @Resource.Item, @onblur = "this.placeholder='" + @Resource.Output + @Resource.Item + "'", @readonly = "readonly" })
                                            @*<input class="form-control" data-val="true"  id="Output_Item" name="OutputItem" placeholder="@Resource.Output @Resource.Item" readonly="readonly" type="text" value="">*@
                                        </div>

                                        <div class="col-md-2 col-sm-12 mt-4" id="plusbtnhd" style="display: block;">
                                            <div class="plus_icon1" id="">
                                                <i class="fa fa-plus" onclick="addbtnnewdata()" title="@Resource.AddNew"></i>
                                            </div>
                                        </div>
                                    </div>
                                }

                                <div class="clear"></div>
                                <div class="card-box table-responsive dy_table">
                                    <div class="sticky-table sticky-ltr-cells sb-container container-example1 price_item_detail height45VH">
                                        <div class=" col-sm-12">
                                            <h2 class="col-md-9 col-sm-12 no-padding mt-3">@Resource.ItemDetail</h2>
                                            <div class="col-md-3 col-sm-12 no-padding num_right mt-3 mb-2"><label class="label pt-1 col-md-4 col-sm-12 num_right pr-0" for="SearchItmDetailsTbl">@Resource.Search @Resource.Item : </label><input type="text" class="form-control col-md-7 col-sm-12" id="SearchItmDetailsTbl" onkeyup="FilterItemDetail(event)" /> </div>

                                        </div>
                                        @Html.HiddenFor(model => model.Itemdetails, new { @id = "hdItemDetailList" })
                                        @*<table class="table table-bordered width3000" id="PoItmDetailsTbl">*@
                                        <table id="MrsItmDetailsTbl" class="table table-bordered itmfrz">
                                            <thead>
                                                <tr class="headings">
                                                    <th width="1%"> &nbsp;</th>
                                                    <th width="2%">@Resource.SrNo</th>
                                                    <th width="26%">
                                                        <div class="col-md-3 col-sm-12"> </div>
                                                        <div class="col-md-6 col-sm-12">
                                                            <label> @Resource.ItemName <span class="required">*</span></label> <a href="#"
                                                                                                                                  title="@Resource.AddNew">

                                                                @*@if ((Session["DocumentStatus"].ToString() != "D") || Disable)*@
                                                                @if ((Model.DocumentStatus != "D") || Disable)
                                                                {
                                                                    <div>
                                                                        <i id="BtnAddItem"></i>
                                                                    </div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="plus_icon1" id="addbtn">
                                                                        <i class="fa fa-plus" id="BtnAddItem" onclick="AddNewRow()"></i>
                                                                    </div>
                                                                }

                                                            </a>
                                                        </div>
                                                        <div class="col-md-3 col-sm-12"> </div>

                                                    </th>
                                                    <th width="10%" title="@Resource.UnitOfMeasure"> @Resource.UOM </th>
                                                    @if (Model.mrs_type != "S")
                                                    {
                                                        <th width="12%" id="avlstk"> @Resource.Available <br /> @Resource.Stock </th>
                                                    }

                                                    <th width="12%">@Resource.Requisition <br /> @Resource.Quantity <span class="required">*</span></th>
                                                    <th width="12%">@Resource.Issued <br /> @Resource.Quantity</th>
                                                    <th width="25%"> @Resource.remarks</th>


                                                </tr>
                                            </thead>
                                            @*@if ((Session["DocumentStatus"].ToString() != "D") || Disable)*@
                                            @if ((Model.DocumentStatus != "D") || Disable || Model.src_type == "O")
                                            {
                                                <tbody>
                                                    @if (ViewBag.ItemDetails != null)
                                                    {

                                                        var rowIdx = 0;
                                                        foreach (System.Data.DataRow Row in ViewBag.ItemDetails.Rows)
                                                        {
                                                            var subitmDisable = "";
                                                            if (Row["sub_item"].ToString() != "Y")
                                                            {
                                                                subitmDisable = "disabled";
                                                            }
                                                            var itemremarks = @Row["it_remarks"].ToString();
                                                            rowIdx++;
                                                            <tr id="@rowIdx">
                                                                <td> <i aria-hidden="true" title="Delete"></i></td>
                                                                <td class="sr_padding"><span id="SpanRowId"> @rowIdx</span></td>
                                                                <input id="SNohiddenfiled" value=@rowIdx type="hidden" />
                                                                <td>
                                                                    <div class="col-sm-11 lpo_form no-padding" id="multiWrapper">
                                                                        <select class="form-control" id="Itemname_@rowIdx" name="Itemname" disabled>
                                                                            <option value="@Row["item_id"]">@Row["item_name"]</option>
                                                                        </select>
                                                                        <input type="hidden" id="hfItemID" value='@Row["item_id"]' />
                                                                        <span id="ItemNameError" class="error-message is-visible"></span>
                                                                    </div>
                                                                    <div class="col-sm-1 i_Icon">
                                                                        <button type="button" id="ItmInfoBtnIcon" class="calculator ItmInfoBtnIcon" onclick="OnClickIconBtn(event);" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/iIcon1.png" alt="" title="@Resource.ItemInformation"> </button>
                                                                    </div>
                                                                </td>
                                                                <td>
                                                                    <input id="UOM" class="form-control" autocomplete="off" type="text" name="UOM" value="@Row["uom_name"].ToString()" placeholder="@Resource.UOM" disabled>
                                                                    <input id="UOMID" value='@Row["uom_id"].ToString()' type="hidden" />
                                                                </td>
                                                                @if (Model.mrs_type != "S")
                                                                {
                                                                    <td>
                                                                        <div class="col-sm-8 lpo_form no-padding">
                                                                            <input id="ItemAvlbStock" class="form-control num_right" value="@Row["item_avl_stk_bs"].ToString()" autocomplete="off" type="text" maxlength="12" name="ItemAvlbStock" placeholder="0000.00" disabled>
                                                                        </div>
                                                                        <div class="col-sm-2 i_Icon no-padding" id="div_SubItemAvlQty">
                                                                            <button type="button" id="SubItemAvlQty" @subitmDisable class="calculator subItmImg" data-toggle="modal" onclick="return GetSubItemAvlStock(event)" data-target="#SubItemStock" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                        </div>
                                                                        <div class="col-sm-2 i_Icon">
                                                                            <button type="button" class="calculator" onclick="ItemStockWareHouseWise(this,event)" data-toggle="modal" data-target="#ItemStockLotBatchSrWise" @*data-target="#WareHouse"*@ data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.WarehouseWiseStock"> </button>
                                                                        </div>
                                                                    </td>
                                                                }

                                                                @if (Model.mrs_type != "S")
                                                                {
                                                                    if (Model.Command == "Edit" && Model.TransType == "Update" && Model.DocumentStatus == "D" && Model.src_type == "O")
                                                                    {
                                                                        <td>
                                                                            <div class="col-sm-10 lpo_form no-padding">
                                                                                <input id="RequisitionQuantity" value='@Row["mrs_qty"].ToString()' onkeypress="return QtyFloatValueonly(this, event)" onchange="OnclickReqQty(event)" class="form-control num_right" autocomplete="off" type="text" name="RequisitionQuantity" placeholder="0000.00">
                                                                                <span id="RequisitionQuantity_Error" class="error-message is-visible"></span>
                                                                            </div>
                                                                            <input hidden type="text" id="sub_item" value="@Row["sub_item"].ToString()" />
                                                                            <div class="col-sm-2 i_Icon no-padding" id="div_SubItemReqQty">
                                                                                <button type="button" id="SubItemReqQty" class="calculator subItmImg" @subitmDisable onclick="return SubItemDetailsPopUp('Quantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                            </div>
                                                                        </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td>
                                                                            <div class="col-sm-10 lpo_form no-padding">
                                                                                <input id="RequisitionQuantity" value='@Row["mrs_qty"].ToString()' onkeypress="return QtyFloatValueonly(this, event)" onchange="OnclickReqQty(event)" class="form-control num_right" autocomplete="off" type="text" name="RequisitionQuantity" placeholder="0000.00" disabled>
                                                                                <span id="RequisitionQuantity_Error" class="error-message is-visible"></span>
                                                                            </div>
                                                                            <input hidden type="text" id="sub_item" value="@Row["sub_item"].ToString()" />
                                                                            <div class="col-sm-2 i_Icon no-padding" id="div_SubItemReqQty">
                                                                                <button type="button" id="SubItemReqQty" class="calculator subItmImg" @subitmDisable onclick="return SubItemDetailsPopUp('Quantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                            </div>
                                                                        </td>
                                                                    }

                                                                }
                                                                else
                                                                {
                                                                    <td>
                                                                        <div class="lpo_form">
                                                                            <input id="RequisitionQuantity" value='@Row["mrs_qty"].ToString()' class="form-control num_right" autocomplete="off" type="text" name="RequisitionQuantity" placeholder="0000.00" disabled>
                                                                            <span id="RequisitionQuantity_Error" class="error-message is-visible"></span>
                                                                        </div>

                                                                    </td>
                                                                }
                                                                @if (Model.mrs_type != "S")
                                                                {
                                                                    <td>
                                                                        <div class="col-sm-10 lpo_form no-padding">
                                                                            <input id="ItemIssueQuantity" value='@Row["issue_qty"].ToString()' class="form-control num_right" autocomplete="" type="text" name="ItemIssueQuantity" placeholder="0000.00" disabled>
                                                                        </div>
                                                                        <div class="col-sm-2 i_Icon no-padding" id="div_SubItemIssueQty">
                                                                            <button type="button" id="SubItemIssueQty" class="calculator subItmImg" @subitmDisable onclick="return SubItemDetailsPopUp('Issue',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                        </div>
                                                                    </td>
                                                                }
                                                                else
                                                                {
                                                                    <td>
                                                                        <div class="lpo_form">
                                                                            <input id="ItemIssueQuantity" value='@Row["issue_qty"].ToString()' class="form-control num_right" autocomplete="" type="text" name="ItemIssueQuantity" placeholder="0000.00" disabled>
                                                                        </div>

                                                                    </td>
                                                                }

                                                                @if (Model.Command == "Edit" && Model.src_type == "O" && Model.TransType == "Update" && Model.DocumentStatus == "D")
                                                                {
                                                                    <td>
                                                                        <textarea id="ItemRemarks" value='@Row["it_remarks"].ToString()' class="form-control remarksmessage" name="ItemRemarks" maxlength="100" placeholder="@Resource.remarks">@Row["it_remarks"].ToString()</textarea>
                                                                    </td>
                                                                }
                                                                else
                                                                {
                                                                    <td>
                                                                        <textarea id="ItemRemarks" value='@Row["it_remarks"].ToString()' class="form-control remarksmessage" name="ItemRemarks" maxlength="100" placeholder="@Resource.remarks" readonly>@Row["it_remarks"].ToString()</textarea>
                                                                    </td>
                                                                }

                                                                <td style="display: none;"><input type="hidden" id="SNohf" value="@rowIdx" /></td>

                                                            </tr>
                                                        }
                                                    }
                                                </tbody>
                                            }
                                            else
                                            {
                                                <tbody>
                                                    @if (ViewBag.ItemDetails != null)
                                                    {

                                                        var rowIdx = 0;
                                                        foreach (System.Data.DataRow Row in ViewBag.ItemDetails.Rows)
                                                        {
                                                            var subitmDisable = "";
                                                            if (Row["sub_item"].ToString() != "Y")
                                                            {
                                                                subitmDisable = "disabled";
                                                            }
                                                            rowIdx++;
                                                            <tr id="@rowIdx">
                                                                @if (Model.src_type != "O")
                                                                {
                                                                    <td class=" red center"> <i class="deleteIcon fa fa-trash" aria-hidden="true" id="delBtnIcon" title="@Resource.Delete"></i></td>
                                                                }
                                                                else
                                                                {
                                                                    <td> <i aria-hidden="true" title="Delete"></i></td>
                                                                }

                                                                <td class="sr_padding"><span id="SpanRowId"> @rowIdx</span></td>
                                                                <input id="SNohiddenfiled" value=@rowIdx type="hidden" />

                                                                <td>
                                                                    <div class="col-sm-11 lpo_form no-padding" id="multiWrapper">
                                                                        <select class="form-control" id="Itemname_@rowIdx" name="Itemname" onchange="OnChangeItemName(@rowIdx, event)">
                                                                            <option value="@Row["item_id"]">@Row["item_name"]</option>
                                                                        </select>
                                                                        <input type="hidden" id="hfItemID" value='@Row["item_id"]' />
                                                                        <span id="ItemNameError" class="error-message is-visible"></span>
                                                                    </div>
                                                                    <div class="col-sm-1 i_Icon">
                                                                        <button type="button" id="ItmInfoBtnIcon" class="calculator ItmInfoBtnIcon" onclick="OnClickIconBtn(event);" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/iIcon1.png" alt="" title="@Resource.ItemInformation"> </button>
                                                                    </div>
                                                                </td>
                                                                <td>
                                                                    <input id="UOM" class="form-control" autocomplete="off" type="text" name="UOM" value="@Row["uom_name"].ToString()" placeholder="@Resource.UOM" disabled>
                                                                    <input id="UOMID" value='@Row["uom_id"].ToString()' type="hidden" />
                                                                </td>
                                                                @if (Model.mrs_type != "S")
                                                                {
                                                                    <td>
                                                                        <div class="col-sm-8 lpo_form no-padding">
                                                                            <input id="ItemAvlbStock" class="form-control num_right" value='@Row["item_avl_stk_bs"].ToString()' autocomplete="off" type="text" maxlength="12" name="ItemAvlbStock" placeholder="0000.00" disabled>
                                                                        </div>
                                                                        <div class="col-sm-2 i_Icon no-padding" id="div_SubItemAvlQty">
                                                                            <button type="button" id="SubItemAvlQty" @subitmDisable class="calculator subItmImg" data-toggle="modal" onclick="return GetSubItemAvlStock(event)" data-target="#SubItemStock" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                        </div>
                                                                        <div class="col-sm-2 i_Icon">
                                                                            <button type="button" class="calculator" onclick="ItemStockWareHouseWise(this,event)" data-toggle="modal" data-target="#WareHouse" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.WarehouseWiseStock"> </button>
                                                                        </div>
                                                                    </td>
                                                                }
                                                                @if (Model.mrs_type != "S")
                                                                {
                                                                    <td>
                                                                        <div class="col-sm-10 lpo_form no-padding">
                                                                            <input id="RequisitionQuantity" value='@Row["mrs_qty"].ToString()' maxlength="12" onkeypress="return QtyFloatValueonly(this, event)" onchange="OnclickReqQty(event)" class="form-control num_right" autocomplete="off" type="text" name="RequisitionQuantity" placeholder="0000.00">
                                                                            <span id="RequisitionQuantity_Error" class="error-message is-visible"></span>
                                                                        </div>
                                                                        <input hidden type="text" id="sub_item" value="@Row["sub_item"].ToString()" />
                                                                        <div class="col-sm-2 i_Icon no-padding" id="div_SubItemReqQty">
                                                                            <button type="button" id="SubItemReqQty" class="calculator subItmImg" @subitmDisable onclick="return SubItemDetailsPopUp('Quantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div class="col-sm-10 lpo_form no-padding">
                                                                            <input id="ItemIssueQuantity" value='@Row["issue_qty"].ToString()' class="form-control num_right" autocomplete="" type="text" name="ItemIssueQuantity" placeholder="0000.00" disabled>
                                                                        </div>
                                                                        <div class="col-sm-2 i_Icon no-padding" id="div_SubItemIssueQty">
                                                                            <button type="button" id="SubItemIssueQty" class="calculator subItmImg" @subitmDisable onclick="return SubItemDetailsPopUp('Issue',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                        </div>
                                                                    </td>
                                                                }
                                                                else
                                                                {
                                                                    <td>
                                                                        <div class="lpo_form">
                                                                            <input id="RequisitionQuantity" value='@Row["mrs_qty"].ToString()' maxlength="12" onkeypress="return QtyFloatValueonly(this, event)" onchange="OnclickReqQty(event)" class="form-control num_right" autocomplete="off" type="text" name="RequisitionQuantity" placeholder="0000.00">
                                                                            <span id="RequisitionQuantity_Error" class="error-message is-visible"></span>
                                                                        </div>

                                                                    </td>
                                                                    <td>
                                                                        <div class="lpo_form">
                                                                            <input id="ItemIssueQuantity" value='@Row["issue_qty"].ToString()' class="form-control num_right" autocomplete="" type="text" name="ItemIssueQuantity" placeholder="0000.00" disabled>
                                                                        </div>

                                                                    </td>
                                                                }
                                                                <td>

                                                                    <textarea id="ItemRemarks" value='@Row["it_remarks"].ToString()' class="form-control remarksmessage" name="ItemRemarks" maxlength="100" placeholder="@Resource.remarks">@Row["it_remarks"].ToString()</textarea>
                                                                </td>
                                                                <td style="display: none;"><input type="hidden" id="SNohf" value="@rowIdx" /></td>

                                                            </tr>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <tr>
                                                            <td class=" red center"><i class="deleteIcon fa fa-trash" aria-hidden="true" title="@Resource.Delete"></i></td>
                                                            <td class="sr_padding"><span id="SpanRowId">1</span></td>
                                                            <input id="SNohiddenfiled" value=1 type="hidden" />

                                                            <td>
                                                                <div class="col-sm-11 lpo_form no-padding" id="multiWrapper">
                                                                    <select class="form-control" id="Itemname_1" name="Itemname" onchange="OnChangeItemName('1', event)">
                                                                    </select>
                                                                    <input type="hidden" id="hfItemID" value="" />
                                                                    <span id="ItemNameError" class="error-message is-visible"></span>
                                                                </div>
                                                                <div class="col-sm-1 i_Icon">
                                                                    <button type="button" id="ItmInfoBtnIcon" class="calculator ItmInfoBtnIcon " onclick="OnClickIconBtn(event);" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/iIcon1.png" alt="" title="@Resource.ItemInformation"></button>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <input id="UOM" class="form-control" autocomplete="off" type="text" name="UOM" placeholder="@Resource.UOM" disabled>
                                                                <input id="UOMID" type="hidden" />
                                                            </td>
                                                            <td>
                                                                <div class="col-sm-8 lpo_form no-padding">
                                                                    <input id="ItemAvlbStock" class="form-control num_right" autocomplete="off" type="text" maxlength="12" name="ItemAvlbStock" placeholder="0000.00" disabled>
                                                                </div>
                                                                <div class="col-sm-2 i_Icon no-padding" id="div_SubItemAvlQty">
                                                                    <button type="button" id="SubItemAvlQty" class="calculator subItmImg" disabled data-toggle="modal" onclick="return GetSubItemAvlStock(event)" data-target="#SubItemStock" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                </div>
                                                                <div class="col-sm-2 i_Icon">
                                                                    <button type="button" class="calculator" onclick="ItemStockWareHouseWise(this,event)" data-toggle="modal" data-target="#WareHouse" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.WarehouseWiseStock"> </button>
                                                                </div>
                                                            </td>

                                                            <td>
                                                                <div class="col-sm-10 lpo_form no-padding">
                                                                    <input id="RequisitionQuantity" class="form-control num_right" autocomplete="off" type="text" maxlength="12" onkeypress="return QtyFloatValueonly(this, event)" onchange="OnclickReqQty(event)" name="RequisitionQuantity" placeholder="0000.00">
                                                                    <span id="RequisitionQuantity_Error" class="error-message is-visible"></span>
                                                                </div>
                                                                <input hidden type="text" id="sub_item" value="" />
                                                                <div class="col-sm-2 i_Icon no-padding" id="div_SubItemReqQty">
                                                                    <button type="button" id="SubItemReqQty" class="calculator subItmImg" disabled onclick="return SubItemDetailsPopUp('Quantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="col-sm-10 lpo_form no-padding">
                                                                    <input id="ItemIssueQuantity" class="form-control num_right" autocomplete="" type="text" onchange="OnclickReqQty(event)" name="ItemIssueQuantity" placeholder="0000.00" disabled>
                                                                </div>
                                                                <div class="col-sm-2 i_Icon no-padding" id="div_SubItemIssueQty">
                                                                    <button type="button" id="SubItemIssueQty" class="calculator subItmImg" disabled onclick="return SubItemDetailsPopUp('Issue',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                </div>
                                                            </td>

                                                            <td>
                                                                <textarea id="ItemRemarks" class="form-control remarksmessage" name="ItemRemarks" maxlength="100" placeholder="@Resource.remarks"></textarea>
                                                            </td>
                                                            <td style="display: none;"><input type="hidden" id="SNohf" value="1" /></td>

                                                        </tr>

                                                    }
                                                </tbody>

                                            }
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </section>
                    @{
                        //if ((Session["DocumentStatus"].ToString() != "D") || Disable)
                        if ((Model.DocumentStatus != "D") || Disable)
                        {
                            ViewBag.Disable = true;
                        }
                        else
                        {
                            ViewBag.Disable = false;
                        }

                    }
                    @Html.Partial("~/Areas/Common/Views/Comn_PartialAttatchmentDetail.cshtml")
                    @Html.HiddenFor(model => model.attatchmentdetail, new { @id = "hdn_Attatchment_details" })
                    @*<section class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingFive">
                                <h4 class="panel-title"> <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive"> @Resource.Attachment <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a> </h4>
                            </div>
                            <div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
                                <div class="panel-body">
                                    <div class="form-group">
                                        <div id="container">
                                        </div>
                                        <div class="file-loading">
                                            <input id="file-1" type="file" multiple data-overwrite-initial="false" data-min-file-count="2" name="MRS_Files"><br />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>*@
                </article>
            </div>
        </div>
    </div>
</div>
    }
}


