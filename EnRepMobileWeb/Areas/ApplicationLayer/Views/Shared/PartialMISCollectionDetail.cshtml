@model EnRepMobileWeb.MODELS.ApplicationLayer.SalesAndDistribution.MIS.MISCollectionDetail.MISCollectionDetail_Model
@using EnRepMobileWeb.Resources;
@using System.Data
@{
    var rowId = 0;
}

<style>
    #datatable-buttons5_wrapper .btn-group a:nth-child(3) {
        display: inline-block;
        position: absolute;
    }

    .ap {
        position: absolute !important;
    }
    /*#datatable-buttons5 thead tr > :nth-child(2) {
        z-index: 100 !important;
        position: sticky;
        left: 0;
        top: 0;
    }

    #datatable-buttons5 tbody tr > :nth-child(2) {
        background: #ffffff;
        position: sticky;
        z-index: 1;
        left: 0;
    }*/
</style>

<script src="~/Content/Scripts/Common/CommonJS.js"></script>

@if (ViewBag.flag == "S")
{
    <table id="datatable-buttons5" class="table table-striped width2500 itmfrz rowhighlighttbl itmfrz" cellspacing="0" width="100%">
        <thead>
            <tr class="sticky-header">
                <th width="2%">@Resource.SrNo</th>
                <th width="11%" class="itmStick">@Resource.CustomerName</th>
                <th width="9%" hidden="hidden"></th>
                <th width="5%">@Resource.Category</th>
                <th width="10%">@Resource.Portfolio </th>
                <th width="6%">@Resource.Region</th>
                <th width="6%">@Resource.Customer @Resource.Zone</th>
                <th width="6%">@Resource.Customer @Resource.Group</th>
                <th width="6%">@Resource.State </th>
                <th width="6%">@Resource.City </th>
                <th width="6%">@Resource.Currency</th>
                <th width="6%" hidden="hidden"></th>
                <th width="6%">@Resource.InvoiceAmount @Resource.InSpecific</th>
                <th width="6%">@Resource.InvoiceAmount @Resource.InBase</th>
                <th width="6%">@Resource.Paid @Resource.Amount @Resource.InSpecific</th>
                <th width="6%">@Resource.Paid @Resource.Amount @Resource.InBase</th>
                <th width="6%">@Resource.Balance @Resource.Amount @Resource.InSpecific</th>
                <th width="6%">@Resource.Balance @Resource.Amount @Resource.InBase</th>
            </tr>
        </thead>
        <tbody>
            @if (ViewBag.CollectionDetails != null)
            {
                foreach (System.Data.DataRow dr in ViewBag.CollectionDetails.Rows)
                {
                    rowId++;
            <tr>
                <td>@rowId</td>
                <td id="cust_name" class="ItmNameBreak itmStick tditemfrz">@dr["cust_name"].ToString()</td>
                <td id="cust_id" hidden="hidden">@dr["cust_id"].ToString()</td>
                <td>@dr["cust_catg"].ToString()</td>
                <td>@dr["cust_port"].ToString()</td>
                <td>@dr["cust_region"].ToString()</td>
                <td>@dr["cust_zone"].ToString()</td>
                <td>@dr["cust_group"].ToString()</td>
                <td>@dr["cust_state"].ToString()</td>
                <td>@dr["cust_city"].ToString()</td>
                <td id="curr_symbol" class="center">@dr["curr_symbol"].ToString()</td>
                <td id="curr_id" hidden="hidden">@dr["curr_id"].ToString()</td>
                <td class="num_right">
                    <div class="col-md-10 no-padding">
                        @dr["invoice_amt_sp"].ToString()
                    </div>
                    <div class="col-md-2 no-padding i_Icon">
                        <button type="button" id="SalesAmt" class="calculator available_credit_limit" onclick="GetSalesAmtDetails(event);" data-toggle="modal" data-target="#SaleAmountDetail" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.InvoiceDate"> </button>
                    </div>
                </td>
                <td class="num_right"> @dr["invoice_amt_bs"].ToString() </td>
                <td class="num_right">
                    <div class="col-md-10 no-padding">
                        @dr["paid_amt_sp"].ToString()
                    </div>
                    <div class="col-md-2 no-padding i_Icon">
                        <button type="button" id="PaidAmt" class="calculator available_credit_limit" onclick="GetPaidAmtDetails(event);" data-toggle="modal" data-target="#PaymentDetail" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.Paid @Resource.Amount"> </button>
                    </div>
                </td>
                <td class="num_right"> @dr["paid_amt_bs"].ToString() </td>
                <td class="num_right">@dr["pend_amt_sp"].ToString()</td>
                <td class="num_right"> @dr["pend_amt_bs"].ToString() </td>
            </tr>
                }
            }
        </tbody>
        <tfoot>
            @if (ViewBag.CollectionDetailsTotal != null)
            {
                foreach (System.Data.DataRow dr in ViewBag.CollectionDetailsTotal.Rows)
                {
            <tr class="total">
                <th colspan="10" class="num_right font-weight-bold"> Total</th>
                @*<th class="num_right font-weight-bold">@dr["ttl_item_gr_val_bs"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_tax_amt_bs"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_oc_amt_bs"].ToString()</th>*@
                <th class="num_right font-weight-bold">@dr["ttl_invoice_amt_sp"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_invoice_amt_bs"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_paid_amt_sp"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_paid_amt_bs"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_pend_amt_sp"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_pend_amt_bs"].ToString()</th>
            </tr>
                }
            }

        </tfoot>
    </table>
}
else
{
    <table id="datatable-buttons6" class="table table-striped width4000 itmfrz rowhighlighttbl itmfrz" cellspacing="0" width="100%">
        <thead>
            <tr class="sticky-header">
                <th width="2%">@Resource.SrNo</th>
                <th width="7%" class="itmStick">@Resource.CustomerName</th>
                <th width="9%" hidden="hidden"></th>
                <th width="4%">@Resource.Category</th>
                <th width="4%">@Resource.Portfolio </th>
                <th width="4%">@Resource.Region</th>
                <th width="4%">@Resource.Customer @Resource.Zone</th>
                <th width="4%">@Resource.Customer @Resource.Group</th>
                <th width="4%">@Resource.State </th>
                <th width="4%">@Resource.City </th>
                <th width="5%">@Resource.InvoiceNumber </th>
                <th width="4%">@Resource.InvoiceDate </th>
                <th width="4%">@Resource.SalesPerson </th>
                <th width="4%">@Resource.Currency</th>
                <th width="8%" hidden="hidden"></th>
                @*<th width="6%">@Resource.GrossAmount</th>
                <th width="8%">@Resource.Tax</th>
                <th width="6%">@Resource.OtherCharges</th>*@
                <th width="4%">@Resource.InvoiceAmount @Resource.InSpecific</th>
                <th width="4%">@Resource.InvoiceAmount @Resource.InBase</th>
                <th width="4%">@Resource.Paid @Resource.Amount @Resource.InSpecific</th>
                <th width="4%">@Resource.Paid @Resource.Amount @Resource.InBase</th>
                <th width="5%">@Resource.Balance @Resource.Amount @Resource.InSpecific</th>
                <th width="5%">@Resource.Balance @Resource.Amount @Resource.InBase</th>
                <th width="4%">@Resource.Payment @Resource.Terms @Resource.InDays</th>
                <th width="4%">@Resource.Due @Resource.Date</th>
                <th width="4%">@Resource.OverdueDays</th>
                <th width="4%">@Resource.PDC @Resource.Date</th>
                <th width="4%">@Resource.PDC @Resource.Amount <br /> @Resource.InSpecific</th>
            </tr>
        </thead>
        <tbody>
            @if (ViewBag.CollectionDetails != null)
            {
                foreach (System.Data.DataRow dr in ViewBag.CollectionDetails.Rows)
                {
                    rowId++;
            <tr>
                <td>@rowId</td>
                <td id="cust_name" class="itmStick">@dr["cust_name"].ToString()</td>
                <td id="cust_id" hidden="hidden">@dr["cust_id"].ToString()</td>
                <td>@dr["cust_catg"].ToString()</td>
                <td>@dr["cust_port"].ToString()</td>
                <td>@dr["cust_region"].ToString()</td>
                <td>@dr["cust_zone"].ToString()</td>
                <td>@dr["cust_group"].ToString()</td>
                <td>@dr["cust_state"].ToString()</td>
                <td>@dr["cust_city"].ToString()</td>
                <td id="Hdn_InvNo">@dr["inv_no"].ToString()</td>
                <td id="td_InvDt">@dr["inv_dt"].ToString()</td>
                <td>@dr["HierarchyNames"].ToString()</td>
                <td id="curr_symbol">@dr["curr_symbol"].ToString()</td>
                <td id="curr_id" hidden="hidden">@dr["curr_id"].ToString()</td>
                @*<td class="num_right">@dr["item_gr_val_bs"].ToString()</td>
        <td class="num_right">@dr["tax_amt_bs"].ToString()</td>
        <td class="num_right">@dr["oc_amt_bs"].ToString()</td>*@
                <td class="num_right">
                    @*<div class="col-md-10 no-padding">*@
                        @dr["invoice_amt_sp"].ToString()
                    @*</div>
                    <div class="col-md-2 i_Icon">
                        <button type="button" id="InvoiceDetail" class="calculator iButton" onclick="OnclickInvoiceAmount(event)" data-toggle="modal" data-target="#InvoiceDetail" data-backdrop="static" data-keyboard="false">  <img src="~/Content/Images/iIcon1.png" alt="" title="@Resource.ItemDetail" /></button>
                    </div>*@
                </td>
                <td class="num_right"> @dr["invoice_amt_bs"].ToString() </td>
                <td class="num_right">
                    <div class="col-md-10 no-padding">
                        @dr["paid_amt_sp"].ToString()
                    </div>
                    <div class="col-md-2 i_Icon">
                        <button type="button" id="btn_PaidAmountDetails" class="calculator" data-toggle="modal" onclick="OnclickPaidAmtDetailIcon(event,'Detail')" data-target="#PaidAmountDetails" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/iIcon1.png" alt="" title="@Resource.Paid @Resource.Amount @Resource.Detail">  </button>
                    </div>
                </td>
                <td class="num_right"> @dr["paid_amt_bs"].ToString() </td>
                <td class="num_right">@dr["pend_amt_sp"].ToString()</td>
                <td class="num_right"> @dr["pend_amt_bs"].ToString() </td>
                <td>@dr["paymtTerm"].ToString()</td>
                <td>@dr["DueDate"].ToString()</td>
                <td>@dr["OverDueDays"].ToString()</td>
                <td>@dr["pdc_dt"].ToString()</td>
                <td class="num_right">@dr["pdc_amt"].ToString()</td>
            </tr>
                }
            }
        </tbody>
        <tfoot>
            @if (ViewBag.CollectionDetailsTotal != null)
            {
                foreach (System.Data.DataRow dr in ViewBag.CollectionDetailsTotal.Rows)
                {
            <tr class="total">
                <th colspan="13" class="num_right font-weight-bold"> Total</th>
                @*<th class="num_right font-weight-bold">@dr["ttl_item_gr_val_bs"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_tax_amt_bs"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_oc_amt_bs"].ToString()</th>*@
                <th class="num_right font-weight-bold">@dr["ttl_invoice_amt_sp"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_invoice_amt_bs"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_paid_amt_sp"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_paid_amt_bs"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_pend_amt_sp"].ToString()</th>
                <th class="num_right font-weight-bold">@dr["ttl_pend_amt_bs"].ToString()</th>
                <th colspan="5"></th>
            </tr>
                }
            }
        </tfoot>
    </table>
}
@if (Model.ColAging != null)
{
    if (Model.ColAging == "Search")
    {
        @Scripts.Render("~/Content/Scripts/DataTableRefreshJs")
        @Scripts.Render("~/Content/Scripts/DatatablesJs")
        Model.ColAging = null;
    }
}