@model EnRepMobileWeb.MODELS.ApplicationLayer.SalesAndDistribution.SalesAndDistributionModels.LSODetailModel
@using EnRepMobileWeb.Resources;
@using EnRepMobileWeb.MODELS.Common;
@using System.Data
@if (Session["UserId"] == null)
{
    Response.Redirect("~/Login");
}
@{
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}
@*<style>
        #SOItmDetailsTbl .tableFixHead thead th {
            position: sticky;
            top: 0;
            left: 0;
            z-index: 5;
            text-align: center;
        }

        #SOItmDetailsTbl td:nth-child(7) {
            position: sticky;
            top: 0;
            left: 0;
            z-index: 5;
            text-align: center;
        }

        #SOItmDetailsTbl th:nth-child(5) {
            position: sticky;
            left: 0;
            z-index: 20;
        }
    </style>*@
<script src="~/Content/Css/jquery/dist/jquery.min.js"></script>
<script src="~/Content/Css/build/js/sweetalert.js"></script>
<script src="~/Content/Scripts/ApplicationLayer/SalesAndDistribution/LocalSalesOrder/LSODetails.js"></script>
@*/*start Add by Hina on 16-02-2024 to chk Financial year exist or not*/*@
@{
    if (TempData["Message"] != null)
    {
        if (TempData["Message"].ToString() == "Financial Year not Exist")
        {
            <script type="text/javascript">
                swal("", $("#FinancialYearDoesNotExistTransactionCanNotBeDone").text(), "warning");
            </script>
        }

    }
    /*Add by Hina sharma on 08-05-2025 to check Existing with previous year transaction*/
    @*if (TempData["Message1"] != null)
        {
            if (TempData["Message1"] == "TransNotAllow")
            {
                <script type="text/javascript">
                    swal("", $("#NomodificationisallowedinpreviousFYdocument").text(), "warning");
                </script>
            }

        }*@
}
@*/*End to chk Financial year exist or not*/*@
@{
    var DisableD = true;
    var DisableH = true;
    var ForDisableOCDlt = "Enable";
    var transtype = "";
    var displayForQtsn = "none";
    var displayForQtsn1 = "none";
    decimal AssVal = 0;
    if (Model.SO_SourceType == "Q")
    {
        //displayForQtsn = "";/*commented by Hina on 12-06-2025 only for single quotation*/
        displayForQtsn1 = "";
    }
    var disablePrintbtn = "";
    if (Model.TransType == "Update")
    {

        if (Model.Command == "Edit")
        {
            if (Model.SOOrderStatus == "D")
            {
                DisableD = false;
            }
            else
            {
                DisableD = true;
            }

            //DisableH = false;
        }
        else
        {
            DisableD = true;
            DisableH = true;
        }
    }
    else
    {
        if (Model.Command == "Refresh")
        {
            DisableD = true;
            DisableH = true;
        }
        else
        {
            DisableD = false;
            DisableH = false;
        }
    }
    if ((Model.SOOrderStatus != "D") || DisableH)
    {

    }
    else
    {
        if (Model.SO_no == null)
        {
            DisableH = false;

        }
        else
        {
            DisableH = true;
            transtype = "Update";
        }
    }
    if (DisableD)
    {
        ViewBag.Disable = true;
        ForDisableOCDlt = "Disable";
    }
    else
    {
        ViewBag.Disable = false;
        ForDisableOCDlt = "Enable";
        //disablePrintbtn = "disabled";
    }
    <script>
         sessionStorage.setItem("PQTransType", "@transtype");
    </script>

    if (!DisableH || !DisableD)
    {
        disablePrintbtn = "disabled style=filter:grayscale(100%)";
    }
    //if (Model.SOOrderStatus == "C" || Model.SO_no == null || ((Model.SOOrderStatus == "D" || Model.SOOrderStatus == "A") && Model.Command == "Edit"))/*Add || ((Model.SOOrderStatus == "D" || Model.SOOrderStatus == "A") && Model.Command == "Edit") by Hina on 11-10+-2024*/
    if (Model.SO_no == null || ((Model.SOOrderStatus == "D" || Model.SOOrderStatus == "A") && Model.Command == "Edit"))/*Add || ((Model.SOOrderStatus == "D" || Model.SOOrderStatus == "A") && Model.Command == "Edit") by Hina on 11-10+-2024*/
    {
        disablePrintbtn = "disabled style=filter:grayscale(100%)";
    }
    else if (Model.SO_no != null)
    {
        if (Model.SO_no.Split('(').Count() > 1)
        {
            disablePrintbtn = "disabled style=filter:grayscale(100%)";
        }
    }
    if (Model.SO_SourceType == null)
    {
        Model.SO_SourceType = "D";
    }
    ViewBag.SO_no = Model.SO_no;
    ViewBag.SO_dt = Model.SO_dt;

    if (Model.BtnName == "BtnEdit" && Model.Command == "Edit" && Model.SOOrderStatus == "D" && Model.DocumentMenuId == "105103125")
    {
        <script type="text/javascript">
            $(document).ready(function () {
                var gst_number = $("#ship_add_gstNo").val();
                var GstApplicable = $("#Hdn_GstApplicable").text();
                if (GstApplicable == "Y") {
                    Cmn_OnSaveAddressApplyGST(gst_number, "SOItmDetailsTbl", "hfItemID", "SNohiddenfiled", "item_ass_val", "", "", "", "AddressSave", "")
                }
            });
        </script>
    }
}
@{
    //if (Session["Message"] != null)
    if (Model.Message != null)
    {
        //var message = Session["Message"].ToString();
        var message = Model.Message;
        Model.hdnsaveApprovebtn = null;
        //if (Session["Message"].ToString().Trim() == "Save")
        if (Model.Message == "Save")
        {
            <script type="text/javascript">
                swal("", $("#savemsg").text(), "success");
            </script>
        }
        if (Model.Message == "ForceClosed")
        {
            <script type="text/javascript">
                swal("", $("#TheDocumentHasBeenForceClosedSuccessfully").text(), "success");
            </script>
        }
        //if (Session["Message"].ToString() == "Deleted")
        if (Model.Message == "Deleted")
        {
            <script type="text/javascript">
                swal("", $("#deletemsg").text(), "success");
            </script>
        }
        //if (Session["Message"].ToString() == "Approved")
        if (Model.Message == "Approved")
        {
            <script type="text/javascript">
                swal("", $("#approvemsg").text(), "success");
            </script>
        }
        if (Model.Message == "Approved_ErrorInMail")
        {
            <script type="text/javascript">
                $(document).ready(function () {
                    swal("", $("#approvemsg").text() + '. \n ' + $("#ThereIsSomethingWrongWhileSendingAlerts").text(), "warning");
                });
            </script>
        }
        if (Model.Message == "PRApproved_ErrorInMail")
        {
            <script type="text/javascript">
        $(document).ready(function () {

            var prNo = '@Model.PR_NO'; // Razor value safely injected

            var msg =
                $("#approvemsg").text() +
                '. \n ' +
                $("#PurchaseRequisitionno").text() +
                +" " + prNo+" " +
                $("#hasbeengenerated").text() +
                '. \n ' +
                $("#ThereIsSomethingWrongWhileSendingAlerts").text();

            swal("", msg, "warning");
        });
            </script>
        }

        if (Model.Message == "PR_Approved")
        {
            <script type="text/javascript">
        $(document).ready(function () {

            var prNo = '@Model.PR_NO'; // Razor value safely injected

            var Msg =
                $("#approvemsg").text() +
                '. \n ' +
                $("#PurchaseRequisitionno").text()
                +" " + prNo + " " +
                $("#hasbeengenerated").text();

            swal("", Msg, "warning");
        });
            </script>
        }
        //if (Session["Message"].ToString() == "Cancelled")
        if (Model.Message == "Cancelled")
        {
            <script type="text/javascript">
                swal("", $("#cancelmsg").text(), "success");
            </script>
        }
        if (Model.Message == "Cancelled_ErrorInMail")
        {
            <script type="text/javascript">
                $(document).ready(function () {
                    swal("", $("#cancelmsg").text() + '. \n ' + $("#ThereIsSomethingWrongWhileSendingAlerts").text(), "warning");
                });
            </script>
        }
        //if (Session["Message"].ToString() == "packinglistunderprocess")
        if (Model.Message == "packinglistunderprocess")
        {
            <script type="text/javascript">
                swal("", $("#packinglistunderprocess").text(), "warning");
            </script>
        }
        //if (Session["Message"].ToString() == "StockOfSomeItemsIsReservedAgainstThisOrderOrderCannotBeCancelledOrForcedClosed")
        if (Model.Message == "ReservedQuantityChanged")
        {
            <script type="text/javascript">
                swal("", $("#ReservedQuantityChanged").text(), "warning");
            </script>
        }
        if (Model.Message == "DocModify")
        {
            <script type="text/javascript">
                swal("", $("#SourceDocumentHasBeenModifiedCanNotProceed").text(), "warning");
            </script>
        }
        if (Model.Message == "SomeItemsIsReserved")
        {
            <script type="text/javascript">
                swal("", $("#OrderCanNotBeModifiedSinceStockOfSomeItemsIsReserved").text(), "warning");
            </script>
        }
        if (Model.Message == "ErrorInMail")
        {
            <script type="text/javascript">
                swal("", $("#Emailsendingfailedduetotechnicalissue").text(), "warning");
            </script>
        }
        if (Model.Message == "PRUnderProcess")
        {
            <script type="text/javascript">
                swal("", $("#PurchaseRequisitionisunderprocessOrdercannotbecancelled").text(), "warning");
            </script>
        }
        if (Model.Message == "PRUnderProcessAmmend")
        {
            <script type="text/javascript">
                swal("", $("#PurchaseRequisitionisunderprocessOrdercannotbemodified").text(), "warning");
            </script>
        }
        /**Commented By Nitesh 13052024 For When Created Production Plan Is created  Doing Force Close **/
        @*if (Model.Message == "UsedInPP")
            {
                <script type="text/javascript">
                    swal("", $("#ProductionPlanIsUnderProcessOrderCannotBeCancelledOrForceClosed").text(), "warning");
                </script>
            }*@
        //Session.Remove("Message");
        Model.Message = null;
    }
    //Session["DocumentStatus"] = "D";
    Model.DocumentStatus = "D";
}
@*@using (Html.BeginForm("SODetailsSave", "LSODetail", FormMethod.Post, new { enctype = "multipart/form-data"  }))*@
<title>@Model.Title</title>
@using (Html.BeginForm("SODetailsActions", "LSODetail", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    {
        <div class="row">
            <div id="SaveAsTemplate1" class=" modal fade" role="dialog">
                <div class="modal-dialog" style="max-width: 400px;">
                    <div class="">
                        <!-- Modal content-->
                        @Html.Partial("~/Areas/Common/Views/Cmn_SaveAsTemplate.cshtml")
                    </div>
                </div>
            </div>

            <!-- Forward Information -->
            <div id="Forward_Pop" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/PartialForward.cshtml")
                </div>
            </div>
            <!-- Other Charges Calculator -->
            <div id="OtherChargesCalculator" class="modal fade" role="dialog">
                <div class="modal-dialog" style=" max-width: 1000px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_OtherCharge.cshtml")
                </div>
            </div>
            <!-- Select Replicate With -->
            <div id="SelectReplicateWithType" class="modal fade" role="dialog">
                <div class="modal-dialog" id="PopupSelectReplicateWithType">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/PartialSaleOrderForReplicate.cshtml")
                </div>
            </div>
            <!-- Item Information -->
            <div id="ItemInfo" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/_ItemInfomation.cshtml")
                </div>
            </div>
            <!-- Customer Information -->
            <div id="CustomerInformation" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="price_item_detail">
                        <!-- Modal content-->
                        @Html.Partial("~/Areas/Common/Views/_CustomerInformation.cshtml")
                    </div>
                </div>
            </div>
            <!-- Sale Information -->
            <input type="hidden" id="HiddenFinDt" />
            <div id="SaleHistory" class="modal fade" role="dialog">
                <div class="modal-dialog" style="min-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/_SaleHistory.cshtml")
                </div>
            </div>
            <!-- Mail Information -->
            <div id="MailInfo" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:600px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_MailInfomation.cshtml")
                </div>
            </div>
            <!-- Multiple Mail Information -->
            <div id="MultipleMailInfo" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_MultipleMailInfo.cshtml")
                </div>
            </div>

            <!-- Mail View -->
            <div id="MailView" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_MailView.cshtml")
                </div>
            </div>

            <!-- Log View -->
            <div id="LogView" class="modal fade" role="dialog">
                <div id="IdLogView" class="modal-dialog" style="max-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_LogView.cshtml")
                </div>
            </div>

            <!-- Partial SO Stock Detail Start -->
            <div id="PartialSOStockDetail" class="modal fade" role="dialog">
                <div class="modal-dialog" style="min-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/PartialSOStockDetail.cshtml")
                </div>
            </div>
            <!-- Partial SO StockDetail End -->
            <!-- Address Information -->
            <div id="AddressInfo" class="modal fade" role="dialog">
                <div id="address" class="modal-dialog" style=" max-width:900px;">
                    <!-- Modal content-->
                    <input type="hidden" id="hd_bill_id" />
                    <input type="hidden" id="hd_ship_id" />
                    <input type="hidden" id="hd_add_type" />
                    <input type="hidden" id="hd_TxtBillingAddr" />
                    <input type="hidden" id="hd_bill_add_id" />
                    <div id="tbodyAddressBodyNew">
                    </div>
                </div>
            </div>
            <!-- ItemCalculate -->
            <div id="ItemCalculate" class="modal fade" role="dialog">
                <input type="hidden" id="hd_tax_id" />
                <div class="modal-dialog" style=" max-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_TaxCalculation.cshtml")
                </div>
            </div>
            <!-- Workflow Information -->
            <div id="WorkflowInformation" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:700px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/_WorkFlow.cshtml")
                </div>
            </div>
            <!-- Mail Information -->
            <div id="MailInfo" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:500px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_MailInfomation.cshtml")
                </div>
            </div>
            <!-- Tracking Details -->
            <div id="TrackingDetail" class="modal fade" role="dialog">
                <div class="modal-dialog" style="min-width:800px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/_TrackingDetail.cshtml")
                </div>
            </div>
            <!-- Price Details -->
            <div id="PriceListDetail" class="modal fade" role="dialog">
                <div class="modal-dialog" style="min-width:800px;">
                    <!-- Modal content-->
                    <div id="PriceListDetails">
                        @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/PartialPriceListDetail.cshtml")

                    </div>
                </div>
            </div>
            <!-- Sub Item Detail -->
            <div id="SubItem" class="modal fade" role="dialog">
                <div class="modal-dialog" id="SubItemPopUp" style=" max-width:600px;">
                    <!-- Modal content-->
                    @{
                        SubItemPopupDt mdl = new SubItemPopupDt();
                    }
                    @Html.Partial("~/Areas/Common/Views/Cmn_PartialSubItemDetail.cshtml", mdl)
                </div>
                <table id="hdn_Sub_ItemDetailTbl" hidden>
                    <tbody>
                        @if (ViewBag.SubItemDetails != null)
                        {
                            foreach (System.Data.DataRow dr in ViewBag.SubItemDetails.Rows)
                            {
                                <tr>
                                    <td><input type="text" id="ItemId" value='@dr["item_id"]'></td>
                                    <td><input type="text" id="subItemId" value='@dr["sub_item_id"]'></td>
                                    <td><input type="text" id="subItemQty" value='@dr["Qty"]'></td>
                                    <td><input type="text" id="subItemSrcDocNo" value='@dr["src_doc_number"]'></td>
                                    <td><input type="text" id="subItemSrcDocDate" value='@dr["src_doc_date"]'></td>
                                    <td><input type="text" id="subItemFocQty" value='@dr["foc_qty"]'></td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
                @Html.HiddenFor(model => model.SubItemDetailsDt, new { @id = "SubItemDetailsDt" })
                @Html.HiddenFor(model => model.WF_status1, new { @id = "WF_status1" })
                @Html.HiddenFor(model => model.hdnsaveApprovebtn, new { @id = "hdnsavebtn" })

                @Html.HiddenFor(model => model.ShowTotalQty, new { @id = "hdn_ShowTotalQty", @value = "N" })
                @Html.HiddenFor(model => model.ShowProdDesc, new { @id = "ShowProdDesc", @value = "Y" })
                @Html.HiddenFor(model => model.ShowProdTechDesc, new { @id = "ShowProdTechDesc", @value = "N" })
                @Html.HiddenFor(model => model.ShowSubItem, new { @id = "ShowSubItem", @value = "N" })
                @Html.HiddenFor(model => model.ShowCustSpecProdDesc, new { @id = "ShowCustSpecProdDesc", @value = "N" })
                @Html.HiddenFor(model => model.CustomerAliasName, new { @id = "CustomerAliasName", @value = "N" })
                @Html.HiddenFor(model => model.ItemAliasName, new { @id = "ItemAliasName", @value = "N" })@*/*Add by Hina on 13-11-2024 */*@
                @Html.HiddenFor(model => model.PrintItemImage, new { @id = "HdnPrintItemImage", @value = "N" })@*/*Add by NItesh on 29-05-2025 */*@
                @Html.HiddenFor(model => model.ShowDeliverySchedule, new { @id = "hdnShowDelvrySchdule", @value = "N" })@*/*Add by Hina on 13-11-2024 */*@
                @Html.HiddenFor(model => model.ShowCustProductCode, new { @id = "hdnShowCustProductCode", @value = "N" })@*/*Add by Hina on 13-11-2024 */*@
                @*@Html.HiddenFor(model => model.PrintFormat, new { @id = "PrintFormat", @value = "F1" })*@
                @Html.HiddenFor(model => model.Amendment, new { @id = "Amendment" })

            </div>
            <!-- Sub Item Stock Detail -->
            <div id="SubItemStock" class="modal fade" role="dialog">
                <div class="modal-dialog" id="SubItemStockPopUp" style=" max-width:600px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/Common/Views/Cmn_PartialSubItemStkDetail.cshtml")
                </div>
            </div>

            <!-- Item Stock Lot/Batch wise Detail -->
            <div id="ItemStockLotBatchSrWise" class="modal fade" role="dialog">
                <div class="modal-dialog" id="Popup_ItemStockLotBatchSrWise" style=" max-width:1000px;">
                    <!-- Modal content-->
                    @*@Html.Partial("~/Areas/Common/Views/Cmn_PartialBatchSerialLotWiseDetail.cshtml")*@
                </div>
            </div>
            <!-- Sales Invoice Print -->
            <div id="SalesInvoicePrint" class="modal fade" role="dialog">
                <div class="modal-dialog" style="max-width:700px;">
                    <!-- Modal content-->
                    @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/PartialSalesInvoiceForPrint.cshtml")
                </div>
            </div>
            <div class="col-md-12 col-sm-12 ">
                <div class="x_panel mar_pad1 ">
                    <div class="x_content mar_pad1">
                        <h2 class="col-md-5 col-sm-12 heading_left_padding ">@ViewBag.MenuPageName</h2>
                        <!-- Smart Wizard -->
                        <div id="wizard" class="form_wizard wizard_horizontal col-md-2 col-sm-12 work_flow">
                            @if (Model.wfDisableAmnd == "wfDisableAmnd")
                            {

                            }
                            else
                            {
                                @Html.Partial("~/Areas/Common/Views/_PartialWorkflowBar.cshtml")
                            }
                        </div>
                        @Html.HiddenFor(model => model.DocumentMenuId, new { @id = "DocumentMenuId" })
                        @Html.HiddenFor(model => model.MenuDocumentId, new { @id = "MenuDocumentId" })
                        @Html.HiddenFor(m => m.WF_status1, new { @id = "WF_status1" })
                        @Html.HiddenFor(m => m.CustType, new { @id = "CustType" })
                        @*<input type="hidden" id="DocumentMenuId" value="@ViewBag.DocumentMenuId" />*@
                        <div id="" class="col-md-5 col-sm-12 work_flow heading_right_padding">
                            @{
                                //Session["BtnName"] = "BtnToDetailPage";
                                //var btnName = Session["BtnName"].ToString();
                                var btnName = Model.BtnName;
                                switch (btnName)
                                {
                                    case "BtnAddNew":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if ((Row["feature_id"].ToString() == "105103125001" && ViewBag.crm == "Y") || Row["feature_id"].ToString() == "105103145110001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" disabled style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125002" || Row["feature_id"].ToString() == "105103145110002")
                                                    {
                                                        <li>
                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125008" || Row["feature_id"].ToString() == "105103145110008")
                                                    {
                                                        <li>
                                                            <button class="amendment"
                                                                    title="@Resource.Amendment" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Workflow" name="Command" value="Amendment"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125004" || Row["feature_id"].ToString() == "105103145110004")
                                                    {
                                                        <li>
                                                            <button class="delete"
                                                                    title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                @if (Model.SO_no == null)
                                                {
                                                    <button class="save"
                                                            title="@Resource.Save" type="submit" id="btn_save" onclick="return SaveBtnClick()" name="Command" value="Save"></button>
                                                }
                                                else
                                                {
                                                    <button class="save"
                                                            title="@Resource.Save" type="submit" id="btn_save" onclick="return SaveBtnClick()" name="Command" value="Update"></button>
                                                }
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="forward"
                                                            title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="approve"
                                                        title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="Btn_Workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false" name="Command" value="Workflow"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" onclick="RefreshBtnClick()" name="Command" value="Refresh"></button>
                                            </li>

                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105103125005" || Row["feature_id"].ToString() == "105103145110005")
                                                    {
                                                        <li>
                                                            <button class="print"
                                                                    title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>
                                                        </li>
                                                    }

                                                    if (Row["feature_id"].ToString() == "105103125009" || Row["feature_id"].ToString() == "105103145110009")
                                                    {
                                                        //if (Model.SOOrderStatus != "D" && Model.SOOrderStatus != "F" && Model.SOOrderStatus != "C" && Model.SOOrderStatus != "" && Model.SOOrderStatus != null)
                                                        //{
                                                        <li>
                                                            <button class="intimation"
                                                                    title="@Resource.intimation" @disablePrintbtn type="submit" id="btn_intimation" name="Command" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                        </li>
                                                        @*}
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="intimation"
                                                                            title="@Resource.intimation" type="submit" id="btn_intimation" name="Command" disabled style="filter: grayscale(100%)" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                                </li>
                                                            }*@
                                                    }
                                                }
                                            }
                                            <li>

                                                <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Mail" name="Command" value="Mail"></button>
                                            </li>
                                            <li>

                                                <button class="message_tool" title="@Resource.Message" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Message" name="Command" value="Message"></button>
                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" disabled style="filter: grayscale(100%)" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnEdit":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if ((Row["feature_id"].ToString() == "105103125001" && ViewBag.crm == "Y") || Row["feature_id"].ToString() == "105103145110001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" disabled style="filter: grayscale(100%)" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125002" || Row["feature_id"].ToString() == "105103145110002")
                                                    {
                                                        <li>

                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>

                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125008" || Row["feature_id"].ToString() == "105103145110008")
                                                    {
                                                        <li>
                                                            <button class="amendment"
                                                                    title="@Resource.Amendment" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Workflow" name="Command" value="Amendment"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125004" || Row["feature_id"].ToString() == "105103145110004")
                                                    {
                                                        <li>
                                                            @if (Model.SOOrderStatus == "D")
                                                            {
                                                                <button class="delete"
                                                                        title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>

                                                            }
                                                            else
                                                            {
                                                                //if (Session["Command"].ToString() == "Edit")
                                                                if (Model.Command == "Edit")
                                                                {
                                                                    <button class="delete"
                                                                            title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                                }
                                                                else
                                                                {
                                                                    <button class="delete"
                                                                            title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                                }
                                                            }
                                                            @Html.HiddenFor(model => model.Delete, new { @id = "hdnAction" })
                                                        </li>
                                                    }
                                                }
                                            }



                                            <li>
                                                @*@if (Session["Command"].ToString() == "Edit")*@
                                                @if (Model.Command == "Edit")
                                                {
                                                    if (Model.SO_no == null)
                                                    {
                                                        <button class="save"
                                                                title="@Resource.Save" type="submit" id="btn_save" onclick="return SaveBtnClick()" name="Command" value="Save"></button>
                                                    }
                                                    else
                                                    {
                                                        if (Model.SOOrderStatus == "A")
                                                        {
                                                            <button class="save"
                                                                    title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Update"></button>
                                                        }
                                                        else
                                                        {
                                                            <button class="save"
                                                                    title="@Resource.Save" type="submit" id="btn_save" onclick="return SaveBtnClick()" name="Command" value="Update"></button>
                                                        }

                                                    }
                                                }
                                                else
                                                {
                                                    <button class="save"
                                                            title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                                }
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    @if (Model.SOOrderStatus == "D")
                                                    {
                                                        if (ViewBag.ForwardEnbl == "Y")
                                                        {
                                                            <button class="forward"
                                                                    title="@Resource.Forward" type="button" id="btn_forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                        }
                                                        else
                                                        {
                                                            <button class="forward"
                                                                    title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    }
                                                </li>
                                            }

                                            <li>
                                                @if (Model.SOOrderStatus == "D" || Model.SOOrderStatus == "F")
                                                {
                                                    //if (Session["Command"].ToString() == "Edit")
                                                    if (Model.Command == "Edit")
                                                    {
                                                        <button class="approve"
                                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                    }
                                                    else
                                                    {
                                                        <button class="approve"
                                                                title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                    }
                                                }
                                                else
                                                {
                                                    <button class="approve"
                                                            title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                }
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="Btn_Workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false" name="Command" value="Workflow"></button>
                                                </li>
                                            }

                                            <li>

                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" onclick="RefreshBtnClick()" name="Command" value="Refresh"></button>

                                            </li>

                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105103125005" || Row["feature_id"].ToString() == "105103145110005")
                                                    {
                                                        <li>
                                                            <button class="print"
                                                                    title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>

                                                        </li>
                                                    }

                                                    if (Row["feature_id"].ToString() == "105103125009" || Row["feature_id"].ToString() == "105103145110009")
                                                    {
                                                        //if (Model.SOOrderStatus != "D" && Model.SOOrderStatus != "F" && Model.SOOrderStatus != "C" && Model.SOOrderStatus != "" && Model.SOOrderStatus != null)
                                                        //{
                                                        <li>
                                                            <button class="intimation"
                                                                    title="@Resource.intimation" @disablePrintbtn type="submit" id="btn_intimation" name="Command" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                        </li>
                                                        @*}
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="intimation"
                                                                            title="@Resource.intimation" type="submit" id="btn_intimation" name="Command" disabled style="filter: grayscale(100%)" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                                </li>
                                                            }*@
                                                    }
                                                }
                                            }

                                            @if (Model.Create_id == Model.UserId.ToString() || ViewBag.Approve_id == Model.UserId.ToString())
                                            {
                                                if (Model.SOOrderStatus == "A" || Model.SOOrderStatus == "C" || Model.SOOrderStatus == "FC")
                                                {
                                                    if (Model.Amendment != "AmendmentDetails")
                                                    {
                                                        <li>
                                                            <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="message_tool" title="@Resource.Message" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Message" name="Command" value="Message"></button>

                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" disabled style="filter: grayscale(100%)" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnRefresh":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if ((Row["feature_id"].ToString() == "105103125001" && ViewBag.crm == "Y") || Row["feature_id"].ToString() == "105103145110001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125002" || Row["feature_id"].ToString() == "105103145110002")
                                                    {
                                                        <li>

                                                            <button class="edit"
                                                                    title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>

                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125008" || Row["feature_id"].ToString() == "105103145110008")
                                                    {
                                                        <li>
                                                            <button class="amendment"
                                                                    title="@Resource.Amendment" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Workflow" name="Command" value="Amendment"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125004" || Row["feature_id"].ToString() == "105103145110004")
                                                    {
                                                        <li>
                                                            <button class="delete"
                                                                    title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        </li>

                                                    }
                                                }
                                            }



                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="forward"
                                                            title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="approve"
                                                        title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="Btn_Workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false" name="Command" value="Workflow"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105103125005" || Row["feature_id"].ToString() == "105103145110005")
                                                    {
                                                        <li>
                                                            @*<button class="print"
                                                                title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>*@
                                                            <button class="print" title="@Resource.Print" @disablePrintbtn type="button" id="" onclick="ForwardHistoryBtnClick();" name="Command" value="print" data-toggle="modal" data-target="#SalesInvoicePrint" data-backdrop="static" data-keyboard="false"></button>

                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125009" || Row["feature_id"].ToString() == "105103145110009")
                                                    {
                                                        //if (Model.SOOrderStatus != "D" && Model.SOOrderStatus != "F" && Model.SOOrderStatus != "C" && Model.SOOrderStatus != "" && Model.SOOrderStatus != null)
                                                        //{
                                                        <li>
                                                            <button class="intimation"
                                                                    title="@Resource.intimation" @disablePrintbtn type="submit" id="btn_intimation" name="Command" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                        </li>
                                                        @*}
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="intimation"
                                                                            title="@Resource.intimation" type="submit" id="btn_intimation" name="Command" disabled style="filter: grayscale(100%)" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                                </li>
                                                            }*@
                                                    }
                                                }
                                            }

                                            @if (Model.Create_id == Model.UserId.ToString() || ViewBag.Approve_id == Model.UserId.ToString())
                                            {
                                                if (Model.SOOrderStatus == "A" || Model.SOOrderStatus == "C" || Model.SOOrderStatus == "FC")
                                                {
                                                    if (Model.Amendment != "AmendmentDetails")
                                                    {
                                                        <li>
                                                            <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="message_tool" title="@Resource.Message" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Message" name="Command" value="Message"></button>

                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnToDetailPage":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if ((Row["feature_id"].ToString() == "105103125001" && ViewBag.crm == "Y") || Row["feature_id"].ToString() == "105103145110001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125002" || Row["feature_id"].ToString() == "105103145110002")
                                                    {
                                                        if (Model.SOOrderStatus == "D" || Model.SOOrderStatus == "A" || Model.SOOrderStatus == "PP" || Model.SOOrderStatus == "PS" || Model.SOOrderStatus == "PN")
                                                        {
                                                            <li>
                                                                <button class="edit"
                                                                        title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>

                                                            </li>
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="edit" disabled style="filter: grayscale(100%)"
                                                                        title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                            </li>
                                                        }
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125008" || Row["feature_id"].ToString() == "105103145110008")
                                                    {
                                                        if (Model.Create_id == Model.UserId.ToString() && Model.SOOrderStatus == "A" && Model.ForAmmendendBtn == "Y")
                                                        {
                                                            <li>
                                                                <button class="amendment"
                                                                        title="@Resource.Amendment" type="submit" id="Btn_Workflow" name="Command" value="Amendment"></button>
                                                            </li>
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="amendment"
                                                                        title="@Resource.Amendment" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Workflow" name="Command" value="Amendment"></button>
                                                            </li>
                                                        }
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125004" || Row["feature_id"].ToString() == "105103145110004")
                                                    {
                                                        if (Model.SOOrderStatus == "D")
                                                        {
                                                            if (Model.Amendment == "Amendment")
                                                            {
                                                                <li>
                                                                    <button class="delete"
                                                                            title="@Resource.Delete" type="submit" id="btn_del" disabled style="filter: grayscale(100%)" name="Command" value="Delete"></button>
                                                                </li>
                                                            }
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="delete"
                                                                            title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                                </li>
                                                            }

                                                            @Html.HiddenFor(model => model.Delete, new { @id = "hdnAction" })
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                            </li>
                                                        }

                                                    }
                                                }
                                            }

                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                if (Model.SOOrderStatus == "A")
                                                {
                                                    <li>
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    </li>

                                                }
                                                else
                                                {
                                                    if (ViewBag.ForwardEnbl == "Y")
                                                    {/*start Add by Hina on 16-02-2024 to chk Financial year exist or not*/
                                                        //if (ViewBag.Message == "Financial Year not Exist")
                                                        /*Above Commented and modify by Hina sharma on 08-05-2025 to check Existing with previous year transaction*/

                                                        @*if (ViewBag.Message == "TransNotAllow")
                                                            {/*data-target="" value will be balnk in this case*/
                                                                <li>
                                                                    <button class="forward"
                                                                            title="@Resource.Forward" type="submit" id="btn_forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                                </li>
                                                            }/*End to chk Financial year exist or not*/
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="forward"
                                                                            title="@Resource.Forward" type="submit" id="btn_forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                                </li>
                                                            }/*commented by Hina on 16-02-2024 to chk Financial year exist or not*/*@
                                                        if (ViewBag.ItemDelSchdetails != null)

                                                        {
                                                            <li>
                                                                <button class="forward"
                                                                        title="@Resource.Forward" type="button" id="btn_forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                            </li>
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="forward"
                                                                        title="@Resource.Forward" type="button" id="btn_forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                            </li>
                                                        }
                                                        @*<li>
                                                                                            <button class="forward"
                                                                        title="@Resource.Forward" type="submit" id="btn_forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                            </li>*@
                                                    }
                                                    else
                                                    {
                                                        <li>
                                                            <button class="forward"
                                                                    title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            @if (Model.SOOrderStatus == "D" || Model.SOOrderStatus == "F")
                                            {
                                                if (ViewBag.Approve == "Y")
                                                {
                                                    if (ViewBag.AppLevel.Rows.Count > 0)
                                                    {/*start Add by Hina on 16-02-2024 to chk Financial year exist or not*/
                                                        //if (ViewBag.Message == "Financial Year not Exist")
                                                        /*Above Commented and modify by Hina sharma on 08-05-2025 to check Existing with previous year transaction*/

                                                        @*if (ViewBag.Message == "TransNotAllow")
                                                            {/*data-target="" value will be balnk in this case*/
                                                                <li>
                                                                    <button class="approve"
                                                                            title="@Resource.Approve" type="submit" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" id="Btn_Approve" name="Command" value="Approve"></button>
                                                                </li>
                                                            }/*End to chk Financial year exist or not*/
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="approve"
                                                                            title="@Resource.Approve" type="submit" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="Btn_Approve" name="Command" value="Approve"></button>
                                                                </li>
                                                            }/*commented by Hina on 16-02-2024 to chk Financial year exist or not*/*@
                                                        if (ViewBag.ItemDelSchdetails != null)

                                                        {
                                                            <li>
                                                                <button class="approve"
                                                                        title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="Btn_Approve" name="Command" value="Approve"></button>
                                                            </li>

                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="approve"
                                                                        title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" id="Btn_Approve" name="Command" value="Approve"></button>
                                                            </li>
                                                        }

                                                        @*<li>
                                                                <button class="approve"
                                                                        title="@Resource.Approve" type="submit" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="Btn_Approve" name="Command" value="Approve"></button>
                                                            </li>*@
                                                    }
                                                    else
                                                    {
                                                        if (ViewBag.ItemDelSchdetails != null)

                                                        {
                                                            <li>
                                                                <button class="approve"
                                                                        title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                            </li>
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="approve"
                                                                        title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" id="Btn_Approve" name="Command" value="Approve"></button>
                                                            </li>
                                                        }
                                                        @*<li>
                                                                <button class="approve"
                                                                        title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                            </li>*@

                                                    }

                                                }
                                                else
                                                {
                                                    <li>
                                                        <button class="approve"
                                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Approve" name="Command" value="Approve"></button>


                                                    </li>
                                                }

                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="approve"
                                                            title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                </li>
                                            }
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="Btn_Workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false" name="Command" value="Workflow"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" disabled style="filter: grayscale(100%)" type="submit" id="btn_refresh" name="Command" value="Refresh"></button>
                                            </li>

                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105103125005" || Row["feature_id"].ToString() == "105103145110005")
                                                    {
                                                        <li>
                                                            @*<button class="print"
                                                                title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>*@
                                                            <button class="print" title="@Resource.Print" @disablePrintbtn type="button" id="" onclick="ForwardHistoryBtnClick();" name="Command" value="print" data-toggle="modal" data-target="#SalesInvoicePrint" data-backdrop="static" data-keyboard="false"></button>

                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125009" || Row["feature_id"].ToString() == "105103145110009")
                                                    {
                                                        //if (Model.SOOrderStatus != "D" && Model.SOOrderStatus != "F" && Model.SOOrderStatus != "C" && Model.SOOrderStatus != "" && Model.SOOrderStatus != null)
                                                        //{
                                                        <li>
                                                            <button class="intimation"
                                                                    title="@Resource.intimation" @disablePrintbtn type="submit" id="btn_intimation" name="Command" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                        </li>
                                                        @*}
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="intimation"
                                                                            title="@Resource.intimation" type="submit" id="btn_intimation" name="Command" disabled style="filter: grayscale(100%)" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                                </li>
                                                            }*@
                                                    }
                                                }
                                            }
                                            @if (Model.Create_id == Model.UserId.ToString() || ViewBag.Approve_id == Model.UserId.ToString())
                                            {
                                                if (Model.SOOrderStatus == "A" || Model.SOOrderStatus == "C" || Model.SOOrderStatus == "FC")
                                                {
                                                    if (Model.Amendment != "AmendmentDetails")
                                                    {
                                                        <li>
                                                            <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="message_tool" title="@Resource.Message" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Message" name="Command" value="Message"></button>

                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnSave":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if ((Row["feature_id"].ToString() == "105103125001" && ViewBag.crm == "Y") || Row["feature_id"].ToString() == "105103145110001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125002" || Row["feature_id"].ToString() == "105103145110002")
                                                    {
                                                        <li>
                                                            @if (Model.SOOrderStatus == "D" || Model.SOOrderStatus == "A" || Model.SOOrderStatus == "PP" || Model.SOOrderStatus == "PS" || Model.SOOrderStatus == "PN")
                                                            {
                                                                <button class="edit"
                                                                        title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                            }
                                                            else
                                                            {
                                                                <button class="edit"
                                                                        title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                            }

                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125008" || Row["feature_id"].ToString() == "105103145110008")
                                                    {
                                                        if (Model.SOOrderStatus == "A" && Model.ForAmmendendBtn == "Y")
                                                        {
                                                            <li>
                                                                <button class="amendment"
                                                                        title="@Resource.Amendment" type="submit" id="Btn_Workflow" name="Command" value="Amendment"></button>
                                                            </li>
                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="amendment"
                                                                        title="@Resource.Amendment" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Workflow" name="Command" value="Amendment"></button>
                                                            </li>
                                                        }
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125004" || Row["feature_id"].ToString() == "105103145110004")
                                                    {
                                                        if (Model.SOOrderStatus == "D")
                                                        {
                                                            if (Model.Amendment == "Amendment")
                                                            {
                                                                <li>
                                                                    <button class="delete"
                                                                            title="@Resource.Delete" type="submit" id="btn_del" disabled style="filter: grayscale(100%)" name="Command" value="Delete"></button>
                                                                </li>
                                                            }
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="delete"
                                                                            title="@Resource.Delete" onclick="return functionConfirm(this)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                                </li>
                                                            }


                                                        }
                                                        else
                                                        {
                                                            <li>
                                                                <button class="delete"
                                                                        title="@Resource.Delete" type="submit" id="btn_del" disabled style="filter: grayscale(100%)" name="Command" value="Delete"></button>
                                                            </li>
                                                        }
                                                    }
                                                }
                                            }
                                            @Html.HiddenFor(model => model.Delete, new { @id = "hdnAction" })
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                if (Model.SOOrderStatus == "D")
                                                {
                                                    if (ViewBag.ForwardEnbl == "Y")
                                                    {
                                                        <li>
                                                            <button class="forward"
                                                                    title="@Resource.Forward" type="button" id="btn_forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                        </li>
                                                    }
                                                    else
                                                    {
                                                        <li>
                                                            <button class="forward"
                                                                    title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                        </li>
                                                    }

                                                }
                                                else
                                                {
                                                    <li>
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    </li>
                                                }
                                            }
                                            @if (Model.SOOrderStatus == "D" || Model.SOOrderStatus == "F")
                                            {
                                                if (ViewBag.Approve == "Y")
                                                {
                                                    if (ViewBag.AppLevel.Rows.Count > 0)
                                                    {
                                                        <li>
                                                            <button class="approve"
                                                                    title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" id="Btn_Approve" name="Command" value="Approve"></button>


                                                        </li>
                                                    }
                                                    else
                                                    {
                                                        <li>
                                                            <button class="approve"
                                                                    title="@Resource.Approve" type="submit" onclick="approveonclick()" id="Btn_Approve" name="Command" value="Approve"></button>
                                                        </li>
                                                    }

                                                }
                                                else
                                                {
                                                    <li>
                                                        <button class="approve"
                                                                title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Approve" name="Command" value="Approve"></button>


                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="approve"
                                                            title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                </li>
                                            }
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="Btn_Workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false" name="Command" value="Workflow"></button>
                                                </li>
                                            }

                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" onclick="RefreshBtnClick()" name="Command" value="Refresh"></button>
                                            </li>

                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105103125005" || Row["feature_id"].ToString() == "105103145110005")
                                                    {
                                                        <li>
                                                            @*<button class="print"
                                                                title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>*@
                                                            <button class="print" title="@Resource.Print" @disablePrintbtn type="button" id="" onclick="ForwardHistoryBtnClick();" name="Command" value="print" data-toggle="modal" data-target="#SalesInvoicePrint" data-backdrop="static" data-keyboard="false"></button>

                                                        </li>
                                                    }

                                                    if (Row["feature_id"].ToString() == "105103125009" || Row["feature_id"].ToString() == "105103145110009")
                                                    {
                                                        //if (Model.SOOrderStatus != "D" && Model.SOOrderStatus != "F" && Model.SOOrderStatus != "C" && Model.SOOrderStatus != "" && Model.SOOrderStatus != null)
                                                        //{
                                                        <li>
                                                            <button class="intimation"
                                                                    title="@Resource.intimation" @disablePrintbtn type="submit" id="btn_intimation" name="Command" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                        </li>
                                                        @*}
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="intimation"
                                                                            title="@Resource.intimation" type="submit" id="btn_intimation" name="Command" disabled style="filter: grayscale(100%)" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                                </li>
                                                            }*@
                                                    }
                                                }
                                            }

                                            @if (Model.Create_id == Model.UserId.ToString() || ViewBag.Approve_id == Model.UserId.ToString())
                                            {
                                                if (Model.SOOrderStatus == "A" || Model.SOOrderStatus == "C" || Model.SOOrderStatus == "FC" || Model.Amendment == "Amendment")
                                                {
                                                    <li>
                                                        <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="message_tool" title="@Resource.Message" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Message" name="Command" value="Message"></button>

                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                    case "BtnApprove":
                                        <ul>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if ((Row["feature_id"].ToString() == "105103125001" && ViewBag.crm == "Y") || Row["feature_id"].ToString() == "105103145110001")
                                                    {
                                                        <li>
                                                            <button class="add"
                                                                    title="@Resource.AddNew" type="submit" id="btn_add" name="Command" value="AddNew"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125002" || Row["feature_id"].ToString() == "105103145110002")
                                                    {
                                                        <li>
                                                            @if (Model.SOOrderStatus == "D" || Model.SOOrderStatus == "A")
                                                            {
                                                                <button class="edit"
                                                                        title="@Resource.Edit" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                            }
                                                            else
                                                            {
                                                                <button class="edit"
                                                                        title="@Resource.Edit" disabled style="filter: grayscale(100%)" type="submit" id="btn_edit" name="Command" value="Edit"></button>
                                                            }

                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125008" || Row["feature_id"].ToString() == "105103145110008")
                                                    {
                                                        <li>
                                                            <button class="amendment"
                                                                    title="@Resource.Amendment" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Workflow" name="Command" value="Amendment"></button>
                                                        </li>
                                                    }
                                                    if (Row["feature_id"].ToString() == "105103125004" || Row["feature_id"].ToString() == "105103145110004")
                                                    {
                                                        <li>
                                                            <button class="delete"
                                                                    title="@Resource.Delete" disabled style="filter: grayscale(100%)" type="submit" id="btn_del" name="Command" value="Delete"></button>
                                                        </li>
                                                    }
                                                }
                                            }
                                            <li>
                                                <button class="save"
                                                        title="@Resource.Save" disabled style="filter: grayscale(100%)" type="submit" id="btn_save" name="Command" value="Save"></button>
                                            </li>
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                if (Model.SOOrderStatus == "A")
                                                {
                                                    <li>
                                                        <button class="forward"
                                                                title="@Resource.Forward" disabled style="filter: grayscale(100%)" type="submit" id="btn_forward" name="Command" value="Forward"></button>
                                                    </li>
                                                }
                                                else
                                                {
                                                    <li>
                                                        <button class="forward"
                                                                title="@Resource.Forward" type="button" id="btn_forward" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="#Forward_Pop" data-backdrop="static" data-keyboard="false" name="Command" value="Forward"></button>
                                                    </li>

                                                }
                                            }

                                            @if (Model.SOOrderStatus == "D" || Model.SOOrderStatus == "F")
                                            {
                                                if (ViewBag.ItemDelSchdetails != null)

                                                {
                                                    <li>
                                                        <button class="approve"
                                                                title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                    </li>
                                                }
                                                else
                                                {
                                                    <li>
                                                        <button class="approve"
                                                                title="@Resource.Approve" type="button" onclick="return ForwardBtnClick()" data-toggle="modal" data-target="" id="Btn_Approve" name="Command" value="Approve"></button>
                                                    </li>
                                                }
                                                @*<li>
                                                        <button class="approve"
                                                                title="@Resource.Approve" type="submit" onclick="approveonclick()" id="btn_approve" name="Command" value="Approve"></button>
                                                    </li>*@
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="approve"
                                                            title="@Resource.Approve" disabled style="filter: grayscale(100%)" type="submit" id="btn_approve" name="Command" value="Approve"></button>
                                                </li>
                                            }
                                            @if (ViewBag.AppLevel.Rows.Count > 0)
                                            {
                                                <li>
                                                    <button class="workflow"
                                                            title="@Resource.Workflow" type="submit" id="Btn_Workflow" onclick="return ForwardHistoryBtnClick();" data-toggle="modal" data-target="#WorkflowInformation" data-backdrop="static" data-keyboard="false" name="Command" value="Workflow"></button>
                                                </li>
                                            }


                                            <li>
                                                <button class="refresh"
                                                        title="@Resource.Refresh" type="submit" id="btn_refresh" onclick="RefreshBtnClick()" name="Command" value="Refresh"></button>
                                            </li>
                                            @if (ViewBag.VBRoleList != null)
                                            {
                                                foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                {
                                                    if (Row["feature_id"].ToString() == "105103125005" || Row["feature_id"].ToString() == "105103145110005")
                                                    {
                                                        <li>
                                                            @*<button class="print"
                                                                title="@Resource.Print" @disablePrintbtn type="submit" id="btn_print" name="Command" value="Print"></button>*@
                                                            <button class="print" title="@Resource.Print" @disablePrintbtn type="button" id="" onclick="ForwardHistoryBtnClick();" name="Command" value="print" data-toggle="modal" data-target="#SalesInvoicePrint" data-backdrop="static" data-keyboard="false"></button>

                                                        </li>
                                                    }

                                                    if (Row["feature_id"].ToString() == "105103125009" || Row["feature_id"].ToString() == "105103145110009")
                                                    {
                                                        //if (Model.SOOrderStatus != "D" && Model.SOOrderStatus != "F" && Model.SOOrderStatus != "C" && Model.SOOrderStatus != "" && Model.SOOrderStatus != null)
                                                        //{
                                                        <li>
                                                            <button class="intimation"
                                                                    title="@Resource.intimation" @disablePrintbtn type="submit" id="btn_intimation" name="Command" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                        </li>
                                                        @*}
                                                            else
                                                            {
                                                                <li>
                                                                    <button class="intimation"
                                                                            title="@Resource.intimation" type="submit" id="btn_intimation" name="Command" disabled style="filter: grayscale(100%)" value="intimation" data-toggle="modal" data-target="#intimation" data-backdrop="static" data-keyboard="false"></button>
                                                                </li>
                                                            }*@
                                                    }
                                                }
                                            }

                                            @if (Model.Create_id == Model.UserId.ToString() || ViewBag.Approve_id == Model.UserId.ToString())
                                            {
                                                if (Model.SOOrderStatus == "A" || Model.SOOrderStatus == "C" || Model.SOOrderStatus == "FC" || Model.Amendment == "Amendment")
                                                {
                                                    <li>
                                                        <button class="email_tool" title="@Resource.Email" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail" onclick="SendEmail();"></button>
                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li>
                                                    <button class="email_tool" title="@Resource.Email" disabled style="filter: grayscale(100%)" data-toggle="modal" data-target="#MailInfo" data-backdrop="static" data-keyboard="false" type="button" id="Btn_Mail" name="Command" value="Mail"></button>
                                                </li>
                                            }
                                            <li>
                                                <button class="message_tool" title="@Resource.Message" disabled style="filter: grayscale(100%)" type="submit" id="Btn_Message" name="Command" value="Message"></button>

                                            </li>
                                            <li>
                                                <button class="back"
                                                        title="@Resource.Back" type="submit" id="btn_back" name="Command" value="BacktoList"></button>
                                            </li>
                                        </ul>
                                        break;
                                }
                            }
                        </div>
                        <div class="x_title pad_mar ">
                            <div class="col-md-12 col-sm-12 icon_tool ">
                                <!--<span>Collapsible / Accordion </span>-->
                                <div class="approved_by">
                                    <ul>
                                        <li><span>@Resource.CreatedBy<br><b id="LSOCreatedBy">@Model.Create_by</b></span></li>
                                        <li><span>@Resource.Createdon<br><b id="LSOCreatedDate">@Model.Create_on</b></span></li>
                                        <li><span>@Resource.ApprovedBy<br><b id="LSOApproveBy">@Model.Approved_by</b></span></li>
                                        <li><span>@Resource.ApprovedOn<br><b id="LSOApproveDate">@Model.Approved_on</b></span></li>
                                        <li><span>@Resource.AmendedBy<br><b id="LSOAmdedBy">@Model.Amended_by</b></span></li>
                                        <li><span>@Resource.AmendedOn<br><b id="LSOAmdedDate">@Model.Amended_on</b></span></li>
                                        <li><span>@Resource.Status<br /><b id="LSOStatus">@Model.StatusName</b> </span></li>
                                        <li style="display: none;"><input type="hidden" id="hfStatus" value="@Model.SOOrderStatus" /></li>
                                    </ul>
                                    <input id="ForDisableOCDlt" value="@ForDisableOCDlt" hidden="hidden" />

                                    @Html.HiddenFor(model => model.WFBarStatus, new { @id = "WFBarStatus" })
                                    @Html.HiddenFor(model => model.WFStatus, new { @id = "WFStatus" })
                                    @Html.HiddenFor(model => model.Create_id, new { @id = "Create_ID" })
                                    @Html.HiddenFor(model => model.SOOrderStatus)
                                    @Html.HiddenFor(model => model.Amendment, new { @id = "Amendment" })
                                    @Html.HiddenFor(model => model.Amend, new { @id = "Amend" })
                                    @Html.HiddenFor(model => model.Title, new { @id = "hdn_title" })
                                    @Html.HiddenFor(model => model.TransType, new { @id = "hdn_TransType" })
                                    @Html.HiddenFor(m => m.ListFilterData1, new { @id = "ListFilterData1", value = Model.ListFilterData1 })
                                </div>
                                @if ((Model.SOOrderStatus == "D" || Model.SOOrderStatus == "F" || string.IsNullOrEmpty(Model.SOOrderStatus) == true))
                                {
                                    if (DisableD)
                                    {

                                        <input id="DisableSubItem" value="Y" hidden />
                                    }
                                    else
                                    {
                                        <input id="DisableSubItem" value="N" hidden />
                                    }

                                }
                                else
                                {
                                    <input id="DisableSubItem" value="Y" hidden />
                                }
                                @if (DisableD)
                                {

                                    <input id="Disable" value="Y" hidden />
                                }
                                else
                                {
                                    <input id="Disable" value="N" hidden />
                                }
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12 ">
                <div class="x_panel mar_pad1 ">
                    <div class="x_content mar_pad1">
                        <article class="panel-group bs-accordion" id="accordion" role="tablist" aria-multiselectable="true">
                            <section class="panel panel-default">
                                <div class="panel-heading" role="tab" id="headingOne">
                                    <h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne"> @Resource.OrderDetail <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a></h4>
                                </div>
                                <div id="collapseOne" class="panel-collapse in collapse show" role="tabpanel" aria-labelledby="headingOne" style="">
                                    <div class="panel-body" style="padding-bottom:5px;">
                                        <div class="col-md-12">
                                            <div class="po col-md-3 col-sm-12 no-padding  domestic ">

                                                <label class="col-form-label label-align" style="padding-right:10px;">@Resource.OrderType</label>
                                                @*@if (Session["MenuDocumentId"] != null)*@
                                                @if (Model.MenuDocumentId != null)
                                                {
                                                    if (Model.DocumentMenuId == "105103125")
                                                    {
                                                        @Resource.Domestic
                                                        @Html.RadioButtonFor(m => m.SO_OrderType, "D", new { @class = "", @id = "OrderTypeD", @checked = "", @name = "OrderType" })
                                                        @Resource.Export
                                                        @Html.RadioButtonFor(m => m.SO_OrderType, "E", new { @class = "", @id = "OrderTypeE", @disabled = "disabled", @name = "OrderType" })
                                                    }
                                                    if (Model.DocumentMenuId == "105103145110")
                                                    {
                                                        @Resource.Domestic
                                                        @Html.RadioButtonFor(m => m.SO_OrderType, "D", new { @class = "", @id = "OrderTypeD", @disabled = "disabled", @name = "OrderType" })
                                                        @Resource.Export
                                                        @Html.RadioButtonFor(m => m.SO_OrderType, "E", new { @class = "", @id = "OrderTypeE", @checked = "", @name = "OrderType" })
                                                    }
                                                }
                                            </div>
                                            <div class="po col-md-4 col-sm-12">
                                                @if (Model.DocumentMenuId == "105103125")
                                                {
                                                    <label class="col-form-label label-align" style="padding-right:7px;">@Resource.ApplyTax</label>
                                                    <span>&nbsp;@Resource.IncludeTax</span>
                                                    if (DisableD || Model.SO_SourceType == "Q")
                                                    {
                                                        @Html.RadioButtonFor(m => m.ApplyTax, "I", new { @class = "", @id = "ApplyTax_I", @disabled = "disabled", @onclick = "OnClickApplyTax()", @name = "ApplyTax" })
                                                    }
                                                    else
                                                    {
                                                        @Html.RadioButtonFor(m => m.ApplyTax, "I", new { @class = "", @id = "ApplyTax_I", @onclick = "OnClickApplyTax()", @name = "ApplyTax" })
                                                    }

                                                    @*<input type="radio" name="CustomerType" id="" onchange="" value="C" />*@
                                                    <span>&nbsp; @Resource.ExcludeTax</span>

                                                    if (DisableD || Model.SO_SourceType == "Q")
                                                    {
                                                        @Html.RadioButtonFor(m => m.ApplyTax, "E", new { @class = "", @id = "ApplyTax_E", @disabled = "disabled", @onclick = "OnClickApplyTax()", @name = "ApplyTax" })
                                                    }
                                                    else
                                                    {
                                                        @Html.RadioButtonFor(m => m.ApplyTax, "E", new { @class = "", @id = "ApplyTax_E", @onclick = "OnClickApplyTax()", @name = "ApplyTax" })
                                                    }
                                                    @Html.HiddenFor(m => m.ApplyTax, new { @id = "Hdn_ApplyTax" })
                                                }

                                                @*<input type="radio" name="CustomerType" id="" onchange="" value="P" checked="" required />*@
                                            </div>
                                            <div class="col-md-2 col-sm-12">
                                                @if (DisableD)
                                                {
                                                    <div class="custom-control custom-switch  margin-left25">

                                                        @Html.CheckBoxFor(model => model.AutoPR, new { @class = "custom-control-input  margin-switch", id = "AutoPR", name = "AutoPR", @disabled = "", type = "checkbox", onclick = "onclickAutoPR()" })

                                                        <label class="custom-control-label " for="FClosed" style="padding: 3px 0px;">
                                                            @Resource.Raise PR
                                                        </label>
                                                    </div>
                                                }
                                                else
                                                {
                                                    <div class="custom-control custom-switch  margin-left25">

                                                        @Html.CheckBoxFor(model => model.AutoPR, new { @class = "custom-control-input  margin-switch", id = "AutoPR", name = "AutoPR", type = "checkbox", onclick = "onclickAutoPR()" })

                                                        @*<input class="js-switch" data-val="true" data-val-required="" id="AutoMRS" name="AutoMRS" type="checkbox" value="true" data-switchery="true">*@
                                                        <label class="custom-control-label " for="FClosed" style="padding: 3px 0px;">
                                                            @Resource.Raise PR
                                                        </label>
                                                    </div>
                                                }
                                                @Html.HiddenFor(Model => Model.hdnAutoPR, new { @id = "hdn_AutoPR", @value = "N" })


                                            </div>
                                            <div class="col-md-3 col-sm-12 no-padding">
                                                <div class="col-md-7 col-sm-12">
                                                    <div class="custom-control custom-switch">
                                                        @if ((Model.SOOrderStatus == "PP" || Model.SOOrderStatus == "PS" || Model.SOOrderStatus == "PN" || Model.FC == "UsedInPP") && Model.Command == "Edit")
                                                        {
                                                            @Html.CheckBoxFor(model => model.SOForceClosed, new { @class = "custom-control-input  margin-switch", onclick = "CheckedFClose()", @id = "FClosed" })
                                                        }
                                                        else
                                                        {
                                                            @Html.CheckBoxFor(model => model.SOForceClosed, new { @class = "custom-control-input  margin-switch", @id = "FClosed", @disabled = "disabled" })
                                                        }
                                                        <label class="custom-control-label " for="FClosed" style="padding: 3px 0px;"> @Resource.ForceClosed  </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-5 col-sm-12">
                                                    <div class="custom-control custom-switch">
                                                        @*@if ((Model.SOOrderStatus == "A") && Session["Command"].ToString() == "Edit")*@
                                                        @if ((Model.SOOrderStatus == "A" && Model.FC != "UsedInPP" && Model.FC != "PRUnderProcess") && Model.Command == "Edit")
                                                        {
                                                            @Html.CheckBoxFor(model => model.SOCancelled, new { @class = "custom-control-input  margin-switch", onclick = "CheckedCancelled()", @id = "Cancelled" })
                                                        }
                                                        else
                                                        {
                                                            @Html.CheckBoxFor(model => model.SOCancelled, new { @class = "custom-control-input  margin-switch", @id = "Cancelled", @disabled = "disabled" })
                                                        }
                                                        <label class="custom-control-label" for="Cancelled" style="padding: 3px 0px;"> @Resource.Cancelled  </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">
                                                @Resource.OrderNumber
                                            </label>
                                            @Html.TextBoxFor(model => model.SO_no, new { @class = "form-control optional", @readonly = "readonly", @id = "so_no", @autocomplete = "off", @maxlength = "20", @name = "po_no", @placeholder = Resource.OrderNumber, type = "text" })
                                            @Html.HiddenFor(model => model.SO_no, new { @id = "HdnDocNo_ForAttach" })
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.OrderDate <span class="required">*</span></label>
                                            @if (Model.SO_dt != null)
                                            {
                                                @Html.TextBoxFor(model => model.SO_dt, "{0:yyyy-MM-dd}", new { @class = "form-control", @id = "so_date", @type = "date", @readonly = "readonly" })
                                            }
                                            else
                                            {
                                                @Html.TextBoxFor(model => model.SO_dt, "{0:yyyy-MM-dd}", new { @class = "form-control", @id = "so_date", @type = "date", @Value = System.DateTime.Now.ToString("yyyy-MM-dd"), @readonly = "readonly" })
                                            }
                                            @*<input type="date" class="form-control" id="so_date" name="so_date" readonly="readonly">*@
                                            @*@Html.HiddenFor(model => model.SO_dt, new { @id = "hd_SO_dt" })*@
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.SourceType </label>
                                            @if (DisableH)
                                            {
                                                @Html.DropDownListFor(model => model.SO_SourceType, new SelectList(new List<SelectListItem> {
                                               new SelectListItem {Text="Direct",Value="D" },
                                               new SelectListItem {Text="Quotation",Value="Q" },
                                           }, "Value", "Text"
                                             ), new { @class = "form-control", @id = "src_type", @disabled = "disabled", @name = "src_type", onchange = "OnChangeOrderType()" })
                                                @Html.ValidationMessageFor(model => model.SO_SourceType, String.Empty, new { @style = "color:red;!important", @id = "vmsrc_type" })

                                            }
                                            else
                                            {
                                                @Html.DropDownListFor(model => model.SO_SourceType, new SelectList(new List<SelectListItem> {
                                               new SelectListItem {Text="Direct",Value="D" },
                                              new SelectListItem {Text="Quotation",Value="Q" },
                                           }, "Value", "Text"
                                             ), new { @class = "form-control", @id = "src_type", @name = "src_type", onchange = "OnChangeOrderType()" })
                                                @Html.ValidationMessageFor(model => model.SO_SourceType, String.Empty, new { @style = "color:red;!important", @id = "vmsrc_type" })
                                            }
                                            @Html.HiddenFor(m => m.SO_SourceType, new { @id = "Hdn_src_type" })

                                            @*<select class="form-control" id="src_type" onchange="OnChangeOrderType();">
                                                    <option value="D">Direct</option>
                                                    <option value="Q">Quotation</option>
                                                </select>*@
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.CustomerName <span class="required">*</span></label>
                                            @if (DisableH)
                                            {
                                                @Html.DropDownListFor(model => model.SO_CustID, new SelectList(Model.CustNameList, "Cust_id", "Cust_name"), new { @class = "form-control", @id = "CustomerName", @disabled = "disabled", @onchange = "OnChangeCustomer(this)" })
                                            }
                                            else
                                            {
                                                @Html.DropDownListFor(model => model.SO_CustID, new SelectList(Model.CustNameList, "Cust_id", "Cust_name"), new { @class = "form-control", @id = "CustomerName", @onchange = "OnChangeCustomer(this)" })
                                            }
                                            @*<select class="form-control" id="CustomerName" onchange="OnChangeCustomer(this)">
                                                    <option value="0">---Select---</option>
                                                </select>*@
                                            @Html.HiddenFor(m => m.SO_CustID, new { @id = "Hdn_CustomerName" })
                                            @Html.HiddenFor(model => model.SO_CustName, new { @id = "Hdn_SoCustName" })
                                            <span id="SpanCustNameErrorMsg" class="error_message"></span>
                                            <input type="hidden" id="CustNameList" value='@Url.Action("GetAutoCompleteSearchCustList", "LSODetail")' />
                                            <span id="SpanCustPricePolicy" hidden>@Model.SpanCustPricePolicy</span>
                                            <span id="SpanCustPriceGroup" hidden>@Model.SpanCustPriceGroup</span>
                                        </div>
                                        <div class="col-md-3 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.Customer @Resource.Alias</label>
                                            @if (DisableH)
                                            {
                                                @Html.TextBoxFor(model => model.cust_alias, new { @id = "cust_alias", @class = "form-control", maxlength = "50", @placeholder = @Resource.Customer + ' ' + @Resource.Alias, disabled = "disabled" })

                                            }
                                            else
                                            {
                                                @Html.TextBoxFor(model => model.cust_alias, new { @id = "cust_alias", @class = "form-control", maxlength = "50", autocomplete = "off", @placeholder = @Resource.Customer + ' ' + @Resource.Alias, disabled = "disabled" })
                                            }
                                            @*<input class="form-control" id="CustomerAlias" maxlength="50" name="CustomerAlias" placeholder="@Resource.Customer" type="text" value="">*@
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.AvailableCreditLimit</label>
                                            @Html.TextBoxFor(model => model.SO_AvlCreditLimit, new
                                            {
                                                @class = "form-control col-sm-11 num_right",
                                                @id = "AvailableCreditLimit",
                                                @autocomplete = "off",
                                                @placeholder = "0000.00",
                                           @name = "AvailableCreditLimit",
                                                @type = "text",
                                                @readonly = "readonly"
                                            })
                                            @*<input id="AvailableCreditLimit" class="form-control col-sm-11 num_right" autocomplete="off" type="text" name="AvailableCreditLimit" placeholder="0000.00" onfocus="this.placeholder='Available Credit Limit'" disabled>*@
                                            <div class="col-sm-1 i_Icon">
                                                <button type="button" class="calculator available_credit_limit" data-toggle="modal" data-target="" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.CreditLimitDetail"> </button>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.Customer @Resource.ReferenceNumber</label>
                                            @if (DisableD)
                                            {
                                                @Html.TextBoxFor(model => model.SO_RefDocNo, new { @id = "ref_doc_no", @class = "form-control", @maxlength = "100", @autocomplete = "off", @type = "text", @readonly = "readonly", @name = "ref_doc_no", @placeholder = @Resource.Customer + " " + @Resource.ReferenceNumber })
                                            }
                                            else
                                            {
                                                @Html.TextBoxFor(model => model.SO_RefDocNo, new { @id = "ref_doc_no", @class = "form-control", @maxlength = "100", @autocomplete = "off", @type = "text", @name = "ref_doc_no", @placeholder = @Resource.Customer + " " + @Resource.ReferenceNumber })
                                            }
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <div class="col-md-11 col-sm-12 no-padding">
                                                <label class="col-form-label label-align" id="AddressInfo_BillAdd">
                                                    @Resource.BillingAddress
                                                </label>
                                                @Html.TextAreaFor(model => model.SO_BillingAddress, new { @id = "TxtBillingAddr", @class = "form-control remarksmessage", @maxlength = "100", @name = "BillingAddress", @placeholder = @Resource.BillingAddress, @readonly = "readonly" })
                                                @*<textarea id="TxtBillingAddr" class="form-control remarksmessage" name="BillingAddress" maxlength="100" placeholder="@Resource.BillingAddress" readonly></textarea>*@
                                                @Html.HiddenFor(m => m.SO_Bill_Add_Id, new { @id = "bill_add_id" })
                                                @*<input type="hidden" id="bill_add_id" />*@
                                            </div>
                                            <div class="col-sm-1 margin25 i_Icon">
                                                <button type="button" id="AddInfoBtnIcon" class="calculator available_credit_limit" onclick="OnClickbillingAddressIconBtn(event);" data-toggle="modal" data-target="#AddressInfo" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.AddressInformation">  </button>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-sm-12 ">
                                            <div class="col-md-11 col-sm-12 no-padding">
                                                <label class="col-form-label label-align" id="AddressInfo_ShipAdd">
                                                    @Resource.ShippingAddress
                                                </label>
                                                @Html.TextAreaFor(model => model.SO_ShippingAddress, new { @id = "TxtShippingAddr", @class = "form-control remarksmessage", @maxlength = "100", @name = "ShippingAddress", @placeholder = @Resource.ShippingAddress, @readonly = "readonly" })
                                                @*<textarea id="TxtShippingAddr" class="form-control remarksmessage" name="ShippingAddress" maxlength="100" placeholder=" @Resource.ShippingAddress" readonly></textarea>*@
                                                @Html.HiddenFor(m => m.SO_Shipp_Add_Id, new { @id = "ship_add_id" })
                                                @Html.HiddenFor(model => model.Ship_Gst_number, new { @id = "ship_add_gstNo" })
                                                @Html.HiddenFor(model => model.Ship_StateCode, new { @id = "Ship_StateCode" })
                                                @*<input type="hidden" id="ship_add_id" />*@
                                            </div>
                                            <div class="col-sm-1 margin25 i_Icon">
                                                <button type="button" id="AddInfoBtnIcon" class="calculator available_credit_limit" onclick="OnClickShippingAddressIconBtn(event);" data-toggle="modal" data-target="#AddressInfo" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.AddressInformation"> </button>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.Currency <span class="required">*</span></label>
                                            @if (DisableH)
                                            {
                                                @Html.DropDownListFor(model => model.SO_CurrencyID, new SelectList(Model.CurrencyList, "curr_id", "curr_val")
                                               , new { @class = "form-control", @id = "ddlCurrency", @disabled = "disabled" })
                                            }
                                            else
                                            {
                                                if (Model.DocumentMenuId == "105103145110")
                                                {
                                                    @Html.DropDownListFor(model => model.SO_CurrencyID, new SelectList(Model.CurrencyList, "curr_id", "curr_val")
                                                     , new { @class = "form-control", @id = "ddlCurrency", @onchange = "OnChangeCurrency();", @disabled = "disabled" })
                                                }
                                                else
                                                {
                                                    @Html.DropDownListFor(model => model.SO_CurrencyID, new SelectList(Model.CurrencyList, "curr_id", "curr_val")
                                                      , new { @class = "form-control", @id = "ddlCurrency", @onchange = "OnChangeCurrency();", @disabled = "disabled" })
                                                }
                                            }
                                            @Html.HiddenFor(m => m.SO_CurrencyID, new { @id = "Hdn_ddlCurrency" })
                                            @Html.HiddenFor(m => m.SO_Currency, new { @id = "Hdn_ddlCurrencyName" })
                                            @*<select class="form-control" id="ddlCurrency" disabled>
                                                    <option value="0">---Select--- </option>
                                                </select>*@
                                            <span id="SpanCustCurrErrorMsg" class="error_message"></span>
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.ExchangeRate <span class="required">*</span></label>
                                            @if (Model.DocumentMenuId == "105103145110")
                                            {
                                                if (DisableD)
                                                {
                                                    @Html.TextBoxFor(model => model.SO_ExRate, new { @id = "conv_rate", @class = "form-control num_right", @onkeypress = "return RateFloatValueonlyConvRate(this,event);", @autocomplete = "off", @type = "text", @name = "conv_rate", @placeholder = "0000.00", @readonly = "readonly" })
                                                }
                                                else
                                                {
                                                    if (Model.bcurrflag == "Y")
                                                    {
                                                        @Html.TextBoxFor(model => model.SO_ExRate, new { @id = "conv_rate", @class = "form-control num_right", @onkeypress = "return RateFloatValueonlyConvRate(this,event);", @autocomplete = "off", @type = "text", @name = "conv_rate", @placeholder = "0000.00", @readonly = "readonly" })
                                                    }
                                                    else
                                                    {
                                                        @Html.TextBoxFor(model => model.SO_ExRate, new { @id = "conv_rate", @class = "form-control num_right", @onchange = "OnchangeConvRate(event)", @onkeypress = "return RateFloatValueonlyConvRate(this,event);", @autocomplete = "off", @type = "text", @name = "conv_rate", @placeholder = "0000.00" })
                                                    }

                                                }
                                            }
                                            else
                                            {
                                                if (DisableH)
                                                {
                                                    @Html.TextBoxFor(model => model.SO_ExRate, new { @id = "conv_rate", @class = "form-control num_right", @onchange = "OnchangeConvRate(event)", @onkeypress = "return RateFloatValueonlyConvRate(this,event);", @autocomplete = "off", @type = "text", @name = "conv_rate", @placeholder = "0000.00", @readonly = "readonly" })
                                                }
                                                else
                                                {
                                                    @Html.TextBoxFor(model => model.SO_ExRate, new { @id = "conv_rate", @class = "form-control num_right", @onchange = "OnchangeConvRate(event)", @onkeypress = "return RateFloatValueonlyConvRate(this,event);", @autocomplete = "off", @type = "text", @name = "conv_rate", @placeholder = "0000.00" })
                                                }
                                            }


                                            @*<input id="conv_rate" class="form-control num_right" onchange="OnchangeConvRate(event)" onkeypress="return RateFloatValueonly(this,event);" autocomplete="off" type="text" name="conv_rate" disabled placeholder="0000.00">*@
                                            <span id="SpanExRateErrorMsg" class="error_message"></span>
                                        </div>
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.SalesPerson<span class="required"> *</span></label>
                                            @if (DisableD)
                                            {
                                                @Html.DropDownListFor(model => model.SO_SalePerson, new SelectList(Model.SalePersonList, "salep_id", "salep_name")
                                               , new { @class = "form-control", @id = "salesperson", @disabled = "disabled" })
                                            }
                                            else
                                            {
                                                @Html.DropDownListFor(model => model.SO_SalePerson, new SelectList(Model.SalePersonList, "salep_id", "salep_name")
                                               , new { @class = "form-control", @id = "salesperson", @onchange = "onchangesalesperson()" })
                                            }
                                            @Html.HiddenFor(m => m.SO_SalePerson1, new { @id = "Hdn_salesperson" })
                                            @Html.HiddenFor(m => m.SalesprsnName, new { @id = "Hdn_salespersnName" })
                                            @*<select class="form-control" id="salesperson">
                                                    <option value="0">---Select---</option>
                                                </select>*@
                                            @*<input type="hidden" id="salespersonList" value='@Url.Action("GetSalesPersonList", "LSODetail")' />*@
                                            @Html.ValidationMessageFor(model => model.SO_SalePerson, String.Empty, new { @style = "color:red;!important", @id = "SpanSalesPersonErrorMsg" })
                                            @*<span id="SpanSalesPersonErrorMsg" class="error_message"></span>*@
                                        </div>
                                        @*@if (Session["MenuDocumentId"] != null)*@
                                        @if (Model.MenuDocumentId != null)
                                        {
                                            if (Model.DocumentMenuId == "105103145110")
                                            {
                                                <div class="col-md-2 col-sm-12">
                                                    <label class="col-form-label label-align">@Resource.TradeTerms </label>
                                                    @if (DisableD)
                                                    {
                                                        @Html.DropDownListFor(model => model.trade_term, new SelectList(Model.TradeTermsList, "TrdTrms_id", "TrdTrms_val")
                                                       , new { @class = "form-control", @id = "trade_term", @disabled = "disabled" })
                                                    }
                                                    else
                                                    {
                                                        @Html.DropDownListFor(model => model.trade_term, new SelectList(Model.TradeTermsList, "TrdTrms_id", "TrdTrms_val")
                                                       , new { @class = "form-control", @id = "trade_term" })
                                                    }
                                                    @*<select class="form-control" id="trade_term">
                                                            <option value="FOB">FOB</option>
                                                            <option value="C&F">C&F</option>
                                                            <option value="CIF">CIF</option>
                                                        </select>*@
                                                </div>
                                            }
                                        }
                                        @*@if (Session["MenuDocumentId"] != null)*@
                                        @if (Model.MenuDocumentId != null)
                                        {
                                            if (Model.DocumentMenuId == "105103145110")
                                            {
                                                <div class="col-md-2 col-sm-12">
                                                    <label class="col-form-label label-align">@Resource.ExportFileNumber</label>
                                                    @if (DisableD)
                                                    {
                                                        @Html.TextBoxFor(model => model.SO_ExportFileNo
                                                           , new { @id = "exp_file_no", @class = "form-control", @readonly = "readonly", @autocomplete = "off", @maxlength = "50", @type = "text", @name = "exp_file_no", @placeholder = Resource.ExportFileNumber, @onblur = "this.placeholder='" + Resource.ExportFileNumber + "'" })
                                                    }
                                                    else
                                                    {
                                                        @Html.TextBoxFor(model => model.SO_ExportFileNo
                                                                       , new { @id = "exp_file_no", @class = "form-control", @autocomplete = "off", @maxlength = "50", @type = "text", @name = "exp_file_no", @placeholder = Resource.ExportFileNumber, @onblur = "this.placeholder='" + Resource.ExportFileNumber + "'" })
                                                    }

                                                    @*<input id="exp_file_no" class="form-control" autocomplete="off" maxlength="50" type="text" name="exp_file_no" placeholder="Export File Number" onblur="this.placeholder='Export File Number'">*@
                                                </div>
                                            }
                                        }
                                        @*@if (Session["MenuDocumentId"] != null)*@
                                        @if (Model.MenuDocumentId != null)
                                        {
                                            if (Model.DocumentMenuId == "105103145110")
                                            {
                                                <div class="col-md-2 col-sm-12">
                                                    <label class="col-form-label label-align">@Resource.CountryOfDestination </label>
                                                    @if (DisableD)
                                                    {
                                                        @Html.DropDownListFor(model => model.SO_Country, new SelectList(Model._CountryLists, "Cntry_id", "Cntry_val")
                                         , new { @class = "form-control", @id = "cntry_destination", @disabled = "disabled" })
                                                    }
                                                    else
                                                    {
                                                        @Html.DropDownListFor(model => model.SO_Country, new SelectList(Model._CountryLists, "Cntry_id", "Cntry_val")
                                            , new { @class = "form-control", @id = "cntry_destination" })
                                                    }
                                                    @*@Html.HiddenFor(m => m.CntryName, new { @id = "Hdn_CountryName" })
                                                        @Html.HiddenFor(model => model.CntryID, new { @id = "Hdn_CountryId" })*@
                                                    @*<select class="form-control" id="cntry_destination">
                                                            <option value="0">---Select---</option>
                                                        </select>*@
                                                    <input type="hidden" id="cntry_destinationList" value='@Url.Action("GetCountryList", "LSODetail")' />
                                                    <span id="Spancntry_destinationErrorMsg" class="error_message"></span>
                                                </div>
                                            }
                                        }
                                        @*@if (Session["MenuDocumentId"] != null)*@
                                        @if (Model.MenuDocumentId != null)
                                        {
                                            if (Model.DocumentMenuId == "105103145110")
                                            {
                                                <div class="col-md-2 col-sm-12">
                                                    <label class="col-form-label label-align">@Resource.PortOfDestination </label>
                                                    @if (DisableD)
                                                    {
                                                        @Html.TextBoxFor(model => model.SO_PortOfDest, new { @id = "PortOfDestination", @class = "form-control optional", @maxlength = "50", @autocomplete = "off", @name = "PortOfDestination", @type = "text", @readonly = "readonly", @placeholder = Resource.PortOfDestination, @onblur = "this.placeholder='" + Resource.PortOfDestination + "'" })
                                                    }
                                                    else
                                                    {
                                                        @Html.TextBoxFor(model => model.SO_PortOfDest, new { @id = "PortOfDestination", @class = "form-control optional", @maxlength = "50", @autocomplete = "off", @name = "PortOfDestination", @type = "text", @placeholder = Resource.PortOfDestination, @onblur = "this.placeholder='" + Resource.PortOfDestination + "'" })
                                                    }
                                                    <span id="spanItemName" class="error_message"></span>
                                                </div>
                                            }
                                        }
                                        <div class="col-md-2 col-sm-12">
                                            <label class="col-form-label label-align">@Resource.remarks</label>
                                            @if (DisableD)
                                            {
                                                @Html.TextAreaFor(model => model.SO_Remarks, new { @id = "SODetailRemarks", @class = "form-control remarksmessage", @maxlength = "100", @onmouseover = "OnMouseOver(this)", @autocomplete = "off", @name = "SODetailRemarks", @placeholder = Resource.remarks, @readonly = "readonly" })
                                            }
                                            else
                                            {
                                                @Html.TextAreaFor(model => model.SO_Remarks, new { @id = "SODetailRemarks", @class = "form-control remarksmessage", @maxlength = "100", @onmouseover = "OnMouseOver(this)", @autocomplete = "off", @name = "SODetailRemarks", @placeholder = Resource.remarks })
                                            }
                                        </div>
                                        @if (Model.SO_SourceType == "D")
                                        {


                                            if (DisableH)
                                            {

                                            }
                                            else
                                            {
                                                <div class="col-md-4 col-sm-12" id="div_replicateWith">
                                                    <label class="col-form-label label-align"> @Resource.ReplicateWith</label>
                                                    <select class="form-control" id="ddlReplicateWith" name="ReplicateWith" onchange="OnChanngReplicateWith()" @*onchange="ddlReplicateWith_onchange()"*@>
                                                    </select>
                                                    <button type="button" hidden="hidden" id="HdnReplicateBtn" data-toggle="modal" data-target="#SelectReplicateWithType" data-bs-backdrop data-keyboard="false"></button>
                                                    @Html.HiddenFor(model => model.ReplicateWith, new { @id = "hdn_ReplicateWith" })
                                                </div>
                                            }

                                        }

                                        @*<div class="clear"></div>*@
                                        <div id="Qtno" class="col-md-2 col-sm-12" style="display:@displayForQtsn1">
                                            <label class="col-form-label label-align">@Resource.QuotationNumber </label>
                                            @*@if (DisableD)*@ @*/*commented by Hina on 12-06-2025 for single quotation*/*@
                                            @if (DisableH)
                                            {
                                                @Html.DropDownListFor(model => model.SO_SourceDocNo, new SelectList(Model.quotationsList, "SrcDocNo", "SrcDocNoVal")
                          , new { @class = "form-control", @id = "qt_number", @onchange = "OnChangeQuotNo(this)", @disabled = "disabled" })
                                            }
                                            else
                                            {
                                                @Html.DropDownListFor(model => model.SO_SourceDocNo, new SelectList(Model.quotationsList, "SrcDocNo", "SrcDocNoVal")
                                                                          , new { @class = "form-control", @id = "qt_number", @onchange = "OnChangeQuotNo(this)" })
                                            }
                                            @Html.HiddenFor(model => model.SO_SourceDocNo, new { @id = "Hdn_SO_SourceDocNo" })
                                            @*@Html.HiddenFor(m => m.CntryName, new { @id = "Hdn_CountryName" })
                                                @*<select class="form-control" id="qt_number" onchange="OnChangeQuotNo(this)">
                                                        <option value="0">---Select---</option>
                                                    </select>*@
                                            <span id="SpanQTNoErrorMsg" class="error_message"></span>
                                        </div>
                                        <div id="Qtdt" class="col-md-2 col-sm-12" style="display:@displayForQtsn1">
                                            <label class="col-form-label label-align">@Resource.QuotationDate</label>
                                            @Html.TextBoxFor(model => model.SO_SourceDocDate, "{0:yyyy-MM-dd}", new { @id = "qt_date", @type = "date", @class = "form-control date", @autocomplete = "off", @name = "src_doc_date", @placeholder = @Resource.SourceDocumentDate, @onblur = "this.placeholder='" + @Resource.SourceDocumentDate + "'", @readonly = "readonly" })
                                            @*<input id="qt_date" class="form-control" autocomplete="off" type="date" name="src_doc_date" placeholder="Source Document Date" onblur="this.placeholder='Source Document Date'" disabled>*@
                                        </div>
                                        <div class="col-md-2 col-sm-12" id="Div_RequirementArea" style="display:none;">
                                            <label class="col-form-label label-align">@Resource.RequirementArea <span class="required">*</span></label>
                                            @if ((Model.DocumentStatus != "D" && Model.Amend != "Amend") || DisableD)
                                            {
                                                @Html.DropDownListFor(model => model.req_area, new SelectList(Model._requirementAreaLists, "req_id", "req_val"), new { @class = "form-control", disabled = "disabled", id = "ddlRequiredArea" })
                                                @Html.ValidationMessageFor(model => model.req_area, String.Empty, new { @style = "color:red;!important", @id = "vmRequiredArea" })
                                                @Html.HiddenFor(model => model.req_area, new { @id = "hdRequiredArea" })

                                            }
                                            else
                                            {
                                                @Html.DropDownListFor(model => model.req_area, new SelectList(Model._requirementAreaLists, "req_id", "req_val"), new { @class = "form-control", onchange = "onChangeRequiredArea()", id = "ddlRequiredArea" })
                                                @Html.ValidationMessageFor(model => model.req_area, String.Empty, new { @style = "color:red;!important", @id = "vmRequiredArea" })
                                                @Html.HiddenFor(model => model.req_area, new { @id = "hdRequiredArea" })

                                            }


                                        </div>
                                        @{
                                            var displayaddQt = "none";
                                            //if (!DisableD && Model.SO_SourceType == "Q")@*/*commented by Hina on 12-06-2025 for single quotation*/*@
                                            if (!DisableH && Model.SO_SourceType == "Q")
                                            {
                                                displayaddQt = "";
                                            }
                                        }
                                        <div id="AddQt" class="col-md-1 col-sm-12 margin25" style="display:@displayaddQt">
                                            <a href="#">
                                                <div class="plus_icon1"><i class="fa fa-plus" id="BtnAddQtDt" onclick="AddItemDetail()" title="Populate Item Detail"></i></div>
                                            </a>
                                        </div>
                                        <div class="col-md-55 col-sm-12" id="Div_Cancelledremarks" style="display:none">
                                            <label class="col-form-label label-align">
                                                @Resource.Cancellation   @Resource.remarks <span class="required"> *</span>
                                            </label>
                                            @if (DisableH)
                                            {
                                                @Html.TextAreaFor(model => model.CancelledRemarks, new
                                           {
                                               @id = "Cancelledremarks",
                                               @class = "form-control remarksmessage",
                                               @maxlength = "499"
                                               ,
                                               @name = "message",
                                               @placeholder = @Resource.Cancellation + " " + @Resource.remarks,
                                               @disabled = "disabled",
                                               @onchange = "onchangeCancelledRemarks()"
                                           })
                                            }
                                            else
                                            {
                                                @Html.TextAreaFor(model => model.CancelledRemarks, new
                                           {
                                               @id = "Cancelledremarks",
                                               @class = "form-control remarksmessage",
                                               @maxlength = "499"
                                               ,
                                               @name = "message",
                                               @placeholder = @Resource.Cancellation + " " + @Resource.remarks,
                                               @onchange = "onchangeCancelledRemarks()"
                                           })

                                            }
                                            @Html.ValidationMessageFor(model => model.CancelledRemarks, String.Empty, new { @style = "color:red;!important", @id = "SpanCancelledRemarks" })

                                        </div>

                                        <div class="card-box table-responsive dy_table">
                                            <div class="col-md-12">
                                                <div class="price_item_detail">
                                                    <div class="tableFixHead height30VH">
                                                        <h2 class="col-md-9 col-sm-12 no-padding mt-3">@Resource.ItemDetail</h2>
                                                        <div class="col-md-3 col-sm-12 no-padding num_right mt-3 mb-2"><label class="label pt-1 col-md-4 col-sm-12 num_right pr-0" for="SearchItmDetailsTbl">@Resource.Search @Resource.Item : </label><input type="text" class="form-control col-md-7 col-sm-12" id="SearchItmDetailsTbl" onkeyup="FilterItemDetail(event)" /> <a class="pl_excel" href="#" onclick=" return ExportItemsToExcel()"><i class="fa fa-file-excel-o mt-1" aria-hidden="true" title="@Resource.Export @Resource.Data"></i></a></div>                                               @*<div class="col-md-1 col-sm-12 no-padding num_right "></div>*@
                                                        @{
                                                            var displayaddRow = "none";
                                                            if (!DisableD && Model.SO_SourceType == "D" && Model.SO_no != null)
                                                            {
                                                                displayaddRow = "";
                                                            }
                                                            else
                                                            {
                                                                //DisableD = true;
                                                                //if (Model.SO_no == null)
                                                                //{
                                                                //    displayaddRow = "none";
                                                                //}
                                                            }
                                                        }
                                                        @Html.HiddenFor(model => model.Itemdetails, new { @id = "hdItemDetailList" })
                                                        @Html.HiddenFor(model => model.ItemTaxdetails, new { @id = "hdTaxDetailList" })
                                                        @Html.HiddenFor(model => model.ItemOCTaxdetails, new { @id = "hdOCTaxDetailList" })
                                                        @Html.HiddenFor(model => model.ItemOCdetails, new { @id = "hdOCDetailList" })
                                                        @Html.HiddenFor(model => model.ItemDelSchdetails, new { @id = "hdDelSchDetailList" })
                                                        @Html.HiddenFor(model => model.ItemTermsdetails, new { @id = "hdTermsDetailList" })
                                                        @{ string displaynoneinDomestic = Model.DocumentMenuId == "105103125" ? "none" : "";}

                                                        @if (ViewBag.VBRoleList != null)
                                                        {
                                                            foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                            {
                                                                if (Row["feature_id"].ToString() == "105103125010" || Row["feature_id"].ToString() == "105103145110010")
                                                                {

                                                                    <input hidden="hidden" value="true" id="SaleHistoryFeatureId" />
                                                                }
                                                            }
                                                        }
                                                        <table id="SOItmDetailsTbl" class="table table-bordered width2500 itmfrz">
                                                            <thead>
                                                                <tr class="headings">
                                                                    <th width="1%"> &nbsp;</th>
                                                                    <th width="1%">@Resource.SrNo</th>
                                                                    <th width="7%" style="display: @displayForQtsn;" id="hQTNOrow">@Resource.Quotation <br /> @Resource.Number</th>
                                                                    <th width="4%" style="display: @displayForQtsn;" id="hQTDTrow">@Resource.Quotation <br /> @Resource.Date</th>
                                                                    <th width="13%" class="itmStick">
                                                                        <div class="col-md-3 col-sm-12"> </div>
                                                                        <div class="col-md-5 col-sm-12">
                                                                            <span class="item_add">
                                                                                @Resource.ItemName <span class="required">*</span>
                                                                            </span><a href="#">
                                                                                <div class="plus_icon1" style="display:@displayaddRow;"> <i class="fa fa-plus" id="BtnAddItem" onclick="AddNewRow()" title="@Resource.AddNew"></i> </div>
                                                                            </a>
                                                                        </div>
                                                                        <div class="col-md-4 col-sm-12"> </div>
                                                                    </th>
                                                                    <th width="3%" title="@Resource.UnitOfMeasure"> @Resource.UOM</th>
                                                                    <th width="5%">@Resource.AvailableStock <br /> @Resource.InBase</th>

                                                                    <th width="5%">
                                                                        <div class="col-md-10 col-sm-12">
                                                                            <span class="item_add">
                                                                                @Resource.Order @Resource.Quantity <span class="required">*</span>
                                                                            </span>
                                                                        </div>
                                                                        <div class="col-md-2 col-sm-12 i_Icon"><button type="button" id="TrackingDetail" class="calculator available_credit_limit" onclick="GetTrackingDetails();" data-toggle="modal" data-target="#TrackingDetail" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.Tracking @Resource.Detail"> </button></div>
                                                                    </th>
                                                                    @if (Model.DocumentMenuId == "105103125")
                                                                    {
                                                                        <th width="5%">@Resource.FOC <br /> @Resource.Quantity</th>
                                                                    }
                                                                    @if (Model.DocumentMenuId == "105103125")
                                                                    {
                                                                        <th width="3%"> @Resource.MRP <span class="required">*</span></th>
                                                                        <th width="4%">@Resource.MRPDiscount <br />  @Resource.InPercentage</th>
                                                                    }
                                                                    <th width="5%">@Resource.Rate</th>
                                                                    <th width="3%">@Resource.Discount <br /> @Resource.InPercentage</th>
                                                                    <th width="3%">@Resource.Discount <br /> @Resource.InAmount</th>
                                                                    <th width="3%">@Resource.Discount <br /> @Resource.Value</th>
                                                                    <th width="4%">@Resource.Gross <br /> @Resource.Value</th>
                                                                    <th width="4%" style="display:@displaynoneinDomestic">@Resource.Assessable  <br />@Resource.Value <span class="required">*</span></th>
                                                                    @if (Model.DocumentMenuId == "105103125")
                                                                    {
                                                                        //if (Model.SO_SourceType == "D")
                                                                        //{
                                                                        <th width="3%" hidden @*id="ThFoc"*@>FOC</th>
                                                                        //}

                                                                        <th width="2%">@Resource.TaxExempted</th>
                                                                        if (ViewBag.GstApplicable == "Y")
                                                                        {
                                                                            <th width="3%">@Resource.Manual @Resource.GST</th>
                                                                        }
                                                                    }
                                                                    <th width="6%">@Resource.Tax <br />    @Resource.Amount</th>
                                                                    <th width="3%">@Resource.Other <br /> @Resource.Charges</th>
                                                                    <th width="3%" style="display:@displaynoneinDomestic">@Resource.NetValue <br /> @Resource.InSpecific</th>

                                                                    <th width="4%">@Resource.NetValue <br /> @Resource.InBase</th>
                                                                    <th width="2%">@Resource.Force<br /> @Resource.Closed</th>
                                                                    <th width="11%">@Resource.remarks</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @if (ViewBag.ItemDetailsList != null)
                                                                {
                                                                    var disabled = "";
                                                                    var grey = "0%";
                                                                    if (DisableD || Model.SO_no == null || Model.SO_SourceType == "Q")
                                                                    {
                                                                        disabled = "disabled";
                                                                        grey = "100%";
                                                                    }

                                                                    var RowId = 0;

                                                                    var FClose_Dsbl = "disabled";
                                                                    if (Model.Command == "Edit" && (Model.SOOrderStatus == "PP" || Model.SOOrderStatus == "PS" || Model.SOOrderStatus == "PN"))
                                                                    {
                                                                        FClose_Dsbl = "";
                                                                    }

                                                                    foreach (DataRow dr in ViewBag.ItemDetailsList.Rows)
                                                                    {

                                                                        AssVal = AssVal + Convert.ToDecimal(dr["item_ass_val"]);
                                                                        RowId = RowId + 1;
                                                                        var mrp = dr["mrp"].ToString();
                                                                        var mrp_disc = dr["mrp_disc"].ToString();
                                                                        if (string.IsNullOrEmpty(mrp))
                                                                        {
                                                                            mrp = "0";
                                                                        }
                                                                        if (string.IsNullOrEmpty(mrp_disc))
                                                                        {
                                                                            mrp_disc = "0";
                                                                        }
                                                                        var subitmDisable = "";
                                                                        if (dr["sub_item"].ToString() != "Y")
                                                                        {
                                                                            subitmDisable = "disabled";
                                                                        }
                                                                        var focDisable = "";
                                                                        var foc = dr["foc"].ToString();
                                                                        if (foc == "Y")
                                                                        {
                                                                            focDisable = "disabled";
                                                                        }
                                                                        var SrcDisable = "";
                                                                        if (Model.SO_SourceType == "Q")
                                                                        {
                                                                            SrcDisable = "disabled";
                                                                        }
                                                                        var ppPolicy = "";
                                                                        if (Model.SpanCustPricePolicy == "M")
                                                                        {
                                                                            ppPolicy = "none";
                                                                        }
                                                                        <tr id="R1">
                                                                            @if (DisableD)
                                                                            {
                                                                                <td class=" red center"> <i class="fa fa-trash" style="filter: grayscale(@grey)" aria-hidden="true" id="delBtnIcon" title="@Resource.Delete"></i></td>
                                                                            }
                                                                            else
                                                                            {
                                                                                <td class=" red center"> <i class="deleteIcon fa fa-trash" aria-hidden="true" id="delBtnIcon" title="@Resource.Delete"></i></td>
                                                                            }

                                                                            <td id="SRNO_" class="sr_padding">@RowId</td>
                                                                            <td style="display: none;"><input type="hidden" id="SNohiddenfiled" value="@RowId" /></td>
                                                                            <td style="display: none;"><input type="hidden" id="hfItemID" value="@dr["item_id"].ToString()" /></td>
                                                                            <td style="display: @displayForQtsn;" id="QTNOrow"><input id="QuotationNumber" value="@dr["src_doc_number"].ToString()" class="form-control" autocomplete="off" type="text" name="QuotationNumber" placeholder="ABV2342DG" onblur="this.placeholder='ABV2342DG'" disabled></td>
                                                                            <td style="display: @displayForQtsn;" id="QTDTrow"><input id="QuotationDate" value="@dr["src_doc_date"].ToString()" class="form-control" autocomplete="off" type="date" name="QuotationDate" placeholder="16-10-2021" onblur="this.placeholder='16-10-2021'" disabled></td>
                                                                            <td class="itmStick">
                                                                                <div class="col-md-10 col-sm-12 lpo_form no-padding"><select class="form-control" id="@("SOItemListName"+RowId)" @disabled name="@("SOItemListName"+RowId)" onchange="OnChangeSOItemName(1,event)"><option value="@dr["item_id"]">@dr["item_name"]</option></select><span id="@("SOItemListNameError")" class="error-message is-visible"></span></div>
                                                                                <div class="col-md-2 col-sm-12 no-padding">
                                                                                    <div class="col-md-4 col-sm-12 i_Icon"><button type="button" id="ItmInfoBtnIcon" class="calculator available_credit_limit" onclick="OnClickIconBtn(event);" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title=" @Resource.ItemInformation"> </button></div>
                                                                                    <div class="col-md-4 col-sm-12 no-padding"><button type="button" id="BuyerInfoIcon" class="calculator" onclick="OnClickBuyerInfoIconBtn(event);" data-toggle="modal" data-target="#CustomerInformation" data-backdrop="static" data-keyboard="false"> <i class="fa fa-user" aria-hidden="true" data-toggle="" title="@Resource.CustomerInformation"></i> </button></div>
                                                                                    <div class="col-md-4 col-sm-12 no-padding">

                                                                                        @if (ViewBag.VBRoleList != null)
                                                                                        {
                                                                                            foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                                                            {
                                                                                                if (Row["feature_id"].ToString() == "105103125010" || Row["feature_id"].ToString() == "105103145110010")
                                                                                                {
                                                                                                    <button type="button" id="SaleHistory" class="calculator" onclick="OnClickHistoryIconBtn(event);" data-toggle="modal" data-target="#SaleHistory" data-backdrop="static" data-keyboard="false">
                                                                                                        <i class="fa fa-history" aria-hidden="true" data-toggle="" title="@Resource.SaleHistory"></i>
                                                                                                    </button>

                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <input id="UOM" class="form-control" autocomplete="off" value="@dr["uom_name"]" type="text" name="UOM" placeholder="@Resource.UOM" disabled><input id="UOMID" value="@dr["uom_id"]" type="hidden" />
                                                                                <input id="ItemHsnCode" value="@dr["hsn_code"]" type="hidden" />
                                                                                <input id="ItemtaxTmplt" value="@dr["tmplt_id"]" type="hidden" />
                                                                                <input id="ItemType" value="@dr["SrvcType"]" type="hidden" />
                                                                                <input id="Price_list_no" value="@dr["price_list_no"]" type="hidden" />
                                                                            </td>
                                                                            <td>
                                                                                <div class="col-sm-8 lpo_form no-padding">
                                                                                    <input id="AvailableStockInBase" class="form-control date num_right" value="@Convert.ToDecimal(dr["Avlstock"]).ToString(ViewBag.QtyDigit)" autocomplete="off" type="text" name="AvailableStockInBase" placeholder="0000.00" disabled>
                                                                                </div>
                                                                                <div class="col-sm-2 i_Icon no-padding" id="div_SubItemAvlQty">
                                                                                    <button type="button" id="SubItemAvlQty" @subitmDisable class="calculator subItmImg" data-toggle="modal" onclick="return GetSubItemAvlStock(event)" data-target="#SubItemStock" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                                </div>
                                                                                <div class="col-sm-2 i_Icon"><button type="button" id="StkDtlBtnIcon" class="calculator available_credit_limit" onclick="OnClickStkDtlIconBtn(event)" data-toggle="modal" data-target="#ItemStockLotBatchSrWise" @*data-target="#PartialSOStockDetail"*@ data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title=" @Resource.StockDetail"> </button></div>
                                                                                <input id="ReservedStockInBase" value="@dr["br_res_stk_bs"]" type="hidden" />
                                                                                <input id="RejectedStockInBase" value="@dr["br_rej_stk_bs"]" type="hidden" />
                                                                                <input id="ReworkableStockInBase" value="@dr["br_rwk_stk_bs"]" type="hidden" />
                                                                                <input id="TotalStock" value="@dr["total_stk"]" type="hidden" />
                                                                            </td>
                                                                            <td>
                                                                                <div class="col-sm-9 lpo_form no-padding">
                                                                                    <input id="ord_qty_spec" onpaste="return CopyPasteData(event)" class="form-control date num_right" @disabled value="@Convert.ToDecimal(dr["ord_qty_spec"]).ToString(ViewBag.QtyDigit)" autocomplete="off" onchange="OnChangeSOItemQty(event)" onkeypress="return AmountFloatQty(this,event);" type="text" name="ord_qty_spec" placeholder="0000.00"><span id="ord_qty_specError" class="error-message is-visible"></span>
                                                                                </div>
                                                                                <div class="col-sm-3 i_Icon no-padding" id="div_SubItemOrderQty">
                                                                                    <input hidden type="text" id="sub_item" value="@dr["sub_item"].ToString()" />
                                                                                    <button type="button" id="SubItemOrderQty" @subitmDisable class="calculator subItmImg" onclick="return SubItemDetailsPopUp('Quantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                                </div>
                                                                            </td>
                                                                            @if (Model.DocumentMenuId == "105103125")
                                                                            {
                                                                                <td>
                                                                                    <div class="col-sm-9 lpo_form no-padding">
                                                                                        <input id="foc_qty" onpaste="return CopyPasteData(event)" onchange="OnChangeFocQty(event)" class="form-control date num_right" @(dr["schm_id"].ToString() != "" ? "disabled" : disabled) value="@Convert.ToDecimal(dr["foc_qty"]).ToString(ViewBag.QtyDigit)" autocomplete="off" onkeypress="return AmountFloatQty(this,event);" type="text" name="ord_qty_spec" placeholder="0000.00"><span id="ord_qty_specError" class="error-message is-visible"></span>
                                                                                    </div>
                                                                                    <div class="col-sm-3 i_Icon no-padding" id="div_SubItemFocQty">
                                                                                        <button type="button" id="SubItemFocQty" @subitmDisable class="calculator subItmImg" onclick="return SubItemDetailsPopUp('FocQuantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                                    </div>
                                                                                </td>
                                                                            }

                                                                            @if (Model.DocumentMenuId == "105103125")
                                                                            {
                                                                                <td>
                                                                                    <div class="lpo_form">
                                                                                        @if (Model.SpanCustPricePolicy == "P")
                                                                                        {
                                                                                            <input id="MRP" value="@Convert.ToDecimal(mrp).ToString(ViewBag.RateDigit)" disabled class="form-control num_right" autocomplete="off" type="text" name="MRP" onchange="OnchangeMRP(event)" onkeypress="return RateFloatValueonly(this,event);" placeholder="0000.00">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input id="MRP" @focDisable value="@Convert.ToDecimal(mrp).ToString(ViewBag.RateDigit)" onpaste="return CopyPasteData(event)" @disabled class="form-control num_right" autocomplete="off" type="text" name="MRP" onchange="OnchangeMRP(event)" onkeypress="return RateFloatValueonly(this,event);" placeholder="0000.00">
                                                                                        }
                                                                                        <span id="item_mrpError" class="error-message is-visible"></span>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="lpo_form">
                                                                                        @if (Model.SpanCustPricePolicy == "P")
                                                                                        {
                                                                                            <input id="MRPDiscount" value="@Convert.ToDecimal(mrp_disc).ToString("0.00")" disabled class="form-control num_right" autocomplete="off" type="text" name="MRPDiscount" onchange="OnchangeMRPDisc(event)" onkeypress="return FloatValuePerOnly(this,event);" placeholder="0000.00">
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <input id="MRPDiscount" @focDisable value="@Convert.ToDecimal(mrp_disc).ToString("0.00")" onpaste="return CopyPasteData(event)" @disabled class="form-control num_right" autocomplete="off" type="text" name="MRPDiscount" onchange="OnchangeMRPDisc(event)" onkeypress="return FloatValuePerOnly(this,event);" placeholder="0000.00">
                                                                                        }
                                                                                        <span id="MRPDiscountError" class="error-message is-visible"></span>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="col-md-10 no-padding">
                                                                                        <input id="item_rate" class="form-control date num_right" disabled value="@Convert.ToDecimal(dr["item_rate"]).ToString(ViewBag.RateDigit)" onchange="OnChangeSOItemRate(event)" autocomplete="off" onkeypress="return RateFloatValueonly(this,event);" type="text" name="item_rate" placeholder="0000.00">
                                                                                    </div>
                                                                                    <div class="col-md-2 no-padding i_Icon" style="display: @ppPolicy;">
                                                                                        <button type="button" id="PriceListDetail" class="calculator available_credit_limit" onclick="GetPriceListDetails(event);" data-toggle="modal" data-target="#PriceListDetail" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.PriceList @Resource.Detail"> </button>
                                                                                    </div>

                                                                                </td>
                                                                            }
                                                                            else
                                                                            {
                                                                                <td><input id="item_rate" @focDisable class="form-control date num_right" @disabled value="@Convert.ToDecimal(dr["item_rate"]).ToString(ViewBag.RateDigit)" onchange="OnChangeSOItemRate(event)" autocomplete="off" onkeypress="return RateFloatValueonly(this,event);" type="text" name="item_rate" placeholder="0000.00"></td>
                                                                            }


                                                                            <td>
                                                                                <div class="lpo_form">
                                                                                    @if (Convert.ToDecimal(dr["item_disc_amt"]) > 0)
                                                                                    {
                                                                                        <input id="item_disc_perc" class="form-control date num_right" onpaste="return CopyPasteData(event)" readonly value="@Convert.ToDecimal(dr["item_disc_perc"]).ToString("0.00")" onchange="OnChangeSOItemDiscountPerc(event)" onkeypress="return FloatValuePerOnly(this,event);" autocomplete="off" type="text" name="item_disc_perc" placeholder="0000.00">
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        string disable_item_disc_perc = disabled;
                                                                                        if (!string.IsNullOrEmpty(Model.OrderDiscountInPercentage))
                                                                                        {
                                                                                            if (Convert.ToDecimal(Model.OrderDiscountInPercentage) > Convert.ToDecimal(0))
                                                                                            {
                                                                                                disable_item_disc_perc = "readonly";
                                                                                            }
                                                                                        }
                                                                                        <input id="item_disc_perc" @focDisable class="form-control date num_right" onpaste="return CopyPasteData(event)" @disable_item_disc_perc value="@Convert.ToDecimal(dr["item_disc_perc"]).ToString("0.00")" onchange="OnChangeSOItemDiscountPerc(event)" onkeypress="return FloatValuePerOnly(this,event);" autocomplete="off" type="text" name="item_disc_perc" placeholder="0000.00">
                                                                                    }
                                                                                    <span id="item_disc_percError" class="error-message is-visible"></span>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <div class="lpo_form">
                                                                                    @if (Convert.ToDecimal(dr["item_disc_perc"]) > 0)
                                                                                    {
                                                                                        <input id="item_disc_amt" readonly onpaste="return CopyPasteData(event)" class="form-control date num_right" value="@Convert.ToDecimal(dr["item_disc_amt"]).ToString(ViewBag.ValDigit)" onchange="OnChangeSOItemDiscountAmt(event)" autocomplete="off" onkeypress="return AmtFloatValueonly(this,event);" type="text" name="item_disc_amt" placeholder="0000.00">
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        string disable_item_disc_amt = disabled;
                                                                                        if (!string.IsNullOrEmpty(Model.OrderDiscountInAmount))
                                                                                        {
                                                                                            if (Convert.ToDecimal(Model.OrderDiscountInAmount) > Convert.ToDecimal(0))
                                                                                            {
                                                                                                disable_item_disc_amt = "readonly";
                                                                                            }
                                                                                        }
                                                                                        <input id="item_disc_amt" @focDisable class="form-control date num_right" onpaste="return CopyPasteData(event)" @disable_item_disc_amt value="@Convert.ToDecimal(dr["item_disc_amt"]).ToString(ViewBag.ValDigit)" onchange="OnChangeSOItemDiscountAmt(event)" autocomplete="off" onkeypress="return AmtFloatValueonly(this,event);" type="text" name="item_disc_amt" placeholder="0000.00">
                                                                                    }
                                                                                    <span id="item_disc_amtError" class="error-message is-visible"></span>
                                                                                </div>
                                                                            </td>
                                                                            <td><input id="item_disc_val" class="form-control date num_right" autocomplete="off" value="@Convert.ToDecimal(dr["item_disc_val"]).ToString(ViewBag.ValDigit)" type="text" name="item_disc_val" placeholder="0000.00" disabled></td>
                                                                            <td><input id="item_gr_val" class="form-control date num_right" autocomplete="off" value="@Convert.ToDecimal(dr["item_gr_val"]).ToString(ViewBag.ValDigit)" type="text" name="item_gr_val" placeholder="0000.00" disabled></td>

                                                                            <td style="display:@displaynoneinDomestic"><div class="lpo_form"><input id="item_ass_val" onpaste="return CopyPasteData(event)" class="form-control date num_right" disabled value="@Convert.ToDecimal(dr["item_ass_val"]).ToString(ViewBag.ValDigit)" autocomplete="off" type="text" onkeypress="return Ass_valFloatValueonly(this,event);" onchange="OnChangeAssessAmt(event)" name="item_ass_val" placeholder="0000.00"><span id="item_ass_valError" class="error-message is-visible"></span></div></td>
                                                                            @if (Model.DocumentMenuId == "105103125")
                                                                            {
                                                                                //if (Model.SO_SourceType == "D")
                                                                                //{
                                                                                <td class="qt_to" hidden>
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        @if (DisableD)
                                                                                        {
                                                                                            if (dr["foc"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" @disabled checked class="custom-control-input  margin-switch" onclick="OnClickFOCCheckBox(event)" id="FOC">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" @disabled class="custom-control-input margin-switch" onclick="OnClickFOCCheckBox(event)" id="FOC">
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (dr["foc"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" @SrcDisable checked class="custom-control-input margin-switch" onclick="OnClickFOCCheckBox(event)" id="FOC">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" @SrcDisable class="custom-control-input margin-switch" onclick="OnClickFOCCheckBox(event)" id="FOC">
                                                                                            }
                                                                                        }
                                                                                        <label class="custom-control-label" for="" style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                                //}

                                                                                <td class="qt_to">
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        @if (DisableD)
                                                                                        {
                                                                                            if (dr["tax_expted"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" @disabled checked class="custom-control-input  margin-switch" onclick="OnClickTaxExemptedCheckBox(event)" id="TaxExempted">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" @disabled class="custom-control-input margin-switch" onclick="OnClickTaxExemptedCheckBox(event)" id="TaxExempted">
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (dr["tax_expted"].ToString() == "Y")
                                                                                            {
                                                                                                <input type="checkbox" @focDisable checked class="custom-control-input  margin-switch" onclick="OnClickTaxExemptedCheckBox(event)" id="TaxExempted">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <input type="checkbox" @focDisable class="custom-control-input margin-switch" onclick="OnClickTaxExemptedCheckBox(event)" id="TaxExempted">
                                                                                            }
                                                                                        }
                                                                                        <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                                if (ViewBag.GstApplicable == "Y")
                                                                                {
                                                                                    <td class="qt_to">
                                                                                        <div class="custom-control custom-switch sample_issue">
                                                                                            @if (DisableD)
                                                                                            {
                                                                                                if (dr["manual_gst"].ToString() == "Y")
                                                                                                {
                                                                                                    <input type="checkbox" @disabled checked class="custom-control-input  margin-switch" onclick="OnClickManualGSTCheckBox(event)" id="ManualGST">
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    <input type="checkbox" @disabled class="custom-control-input  margin-switch" onclick="OnClickManualGSTCheckBox(event)" id="ManualGST">
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (dr["manual_gst"].ToString() == "Y")
                                                                                                {
                                                                                                    <input type="checkbox" @focDisable checked class="custom-control-input  margin-switch" onclick="OnClickManualGSTCheckBox(event)" id="ManualGST">
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    <input type="checkbox" @focDisable class="custom-control-input  margin-switch" onclick="OnClickManualGSTCheckBox(event)" id="ManualGST">
                                                                                                }
                                                                                            }
                                                                                            <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                        </div>
                                                                                    </td>
                                                                                }
                                                                            }
                                                                            <td>
                                                                                <div class="col-sm-10 lpo_form no-padding"> <input id="item_tax_amt" class="form-control num_right" value="@Convert.ToDecimal(dr["item_tax_amt"]).ToString(ViewBag.ValDigit)" autocomplete="off" type="text" name="item_tax_amt" placeholder="0000.00" disabled> </div>
                                                                                @if (dr["tax_expted"].ToString() == "Y")
                                                                                {
                                                                                    <div class="col-sm-2 lpo_form no-padding"><button type="button" disabled class="calculator" id="BtnTxtCalculation" onclick="OnClickTaxCalculationBtn(event)" data-toggle="modal" data-target="#ItemCalculate" data-backdrop="static" data-keyboard="false"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TaxCalculator"></i></button></div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <div class="col-sm-2 lpo_form no-padding"><button type="button" @focDisable class="calculator" id="BtnTxtCalculation" onclick="OnClickTaxCalculationBtn(event)" data-toggle="modal" data-target="#ItemCalculate" data-backdrop="static" data-keyboard="false"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TaxCalculator"></i></button></div>
                                                                                }
                                                                            </td>
                                                                            <td><input id="item_oc_amt" class="form-control date num_right" autocomplete="off" value="@Convert.ToDecimal(dr["item_oc_amt"]).ToString(ViewBag.ValDigit)" type="text" name="item_oc_amt" placeholder="0000.00" disabled></td>
                                                                            <td style="display:@displaynoneinDomestic"><input id="item_net_val_spec" class="form-control date num_right" autocomplete="off" value="@Convert.ToDecimal(dr["item_net_val_spec"]).ToString(ViewBag.ValDigit)" type="text" name="item_net_val_spec" placeholder="0000.00" disabled></td>
                                                                            <td><input id="item_net_val_bs" class="form-control date num_right" autocomplete="off" value="@Convert.ToDecimal(dr["item_net_val_bs"]).ToString(ViewBag.ValDigit)" type="text" name="item_net_val_bs" placeholder="0000.00" disabled></td>
                                                                            <td>
                                                                                <div class="custom-control custom-switch sample_issue">
                                                                                    @if (dr["force_close"].ToString() == "Y")
                                                                                    {
                                                                                        <input type="checkbox" checked class="custom-control-input margin-switch" id="ItmFClosed" disabled>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="checkbox" class="custom-control-input margin-switch" onchange="CheckedItemWiseFClose()" id="ItmFClosed" @FClose_Dsbl>
                                                                                    }

                                                                                    <label class="custom-control-label" for="ItmFClosed" style="padding: 3px 0px;"> </label>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                @if (DisableD)
                                                                                {
                                                                                    <textarea id="remarks" class="form-control remarksmessage" name="remarks" maxlength="1500" onmouseover="OnMouseOver(this.value)" autocomplete="off" disabled placeholder="@Resource.remarks">@dr["it_remarks"]</textarea>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <textarea id="remarks" class="form-control remarksmessage" name="remarks" maxlength="1500" onmouseover="OnMouseOver(this.value)" autocomplete="off" placeholder="@Resource.remarks">@dr["it_remarks"]</textarea>
                                                                                }
                                                                            </td>
                                                                        </tr>

                                                                    }

                                                                    Model.SO_AssessValue = AssVal.ToString(ViewBag.ValDigit);
                                                                }
                                                                else
                                                                {
                                                                    <tr id="R1">
                                                                        @if (DisableD)
                                                                        {
                                                                            <td class=" red center"> <i class="fa fa-trash" style="filter: grayscale(100%)" aria-hidden="true" id="delBtnIcon" title="@Resource.Delete"></i></td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td class=" red center"> <i class="deleteIcon fa fa-trash" aria-hidden="true" id="delBtnIcon" title="@Resource.Delete"></i></td>
                                                                        }
                                                                        <td id="SRNO_" class="sr_padding">1</td>
                                                                        <td style="display: none;"><input type="hidden" id="SNohiddenfiled" value="1" /></td>
                                                                        <td style="display: none;"><input type="hidden" id="hfItemID" /></td>
                                                                        <td style="display: @displayForQtsn;" id="QTNOrow"><input id="QuotationNumber" class="form-control" autocomplete="off" type="text" name="QuotationNumber" placeholder="ABV2342DG" onblur="this.placeholder='ABV2342DG'" disabled></td>
                                                                        <td style="display: @displayForQtsn;" id="QTDTrow"><input id="QuotationDate" class="form-control" autocomplete="off" type="date" name="QuotationDate" placeholder="16-10-2021" onblur="this.placeholder='16-10-2021'" disabled></td>
                                                                        <td class="itmStick">
                                                                            <div class="col-md-10 col-sm-12 lpo_form no-padding"><select class="form-control" disabled id="SOItemListName1" name="SOItemListName1" onchange="OnChangeSOItemName(1,event)"></select><span id="SOItemListNameError" class="error-message is-visible"></span></div>
                                                                            <div class="col-md-2 col-sm-12 no-padding">
                                                                                <div class="col-md-4 col-sm-12 i_Icon"><button type="button" id="ItmInfoBtnIcon" class="calculator available_credit_limit" onclick="OnClickIconBtn(event);" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title=" @Resource.ItemInformation"> </button></div>
                                                                                <div class="col-md-4 col-sm-12 no-padding"><button type="button" id="BuyerInfoIcon" class="calculator" onclick="OnClickBuyerInfoIconBtn(event);" data-toggle="modal" data-target="#CustomerInformation" data-backdrop="static" data-keyboard="false"> <i class="fa fa-user" aria-hidden="true" data-toggle="" title="@Resource.CustomerInformation"></i> </button></div>
                                                                                <div class="col-md-4 col-sm-12 no-padding">

                                                                                    @if (ViewBag.VBRoleList != null)
                                                                                    {
                                                                                        foreach (System.Data.DataRow Row in ViewBag.VBRoleList.Rows)
                                                                                        {

                                                                                            if (Row["feature_id"].ToString() == "105103125010" || Row["feature_id"].ToString() == "105103145110010")
                                                                                            {
                                                                                                <button type="button" id="SaleHistory" class="calculator" onclick="OnClickHistoryIconBtn(event);" data-toggle="modal" data-target="#SaleHistory" data-backdrop="static" data-keyboard="false">
                                                                                                    <i class="fa fa-history" aria-hidden="true" data-toggle="" title="@Resource.SaleHistory"></i>
                                                                                                </button>

                                                                                            }
                                                                                        }
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <input id="UOM" class="form-control" autocomplete="off" type="text" name="UOM" placeholder="@Resource.UOM" disabled><input id="UOMID" type="hidden" />
                                                                            <input id="ItemHsnCode" type="hidden" />
                                                                            <input id="ItemtaxTmplt" type="hidden" />
                                                                            <input id="ItemType" type="hidden" />
                                                                            <input id="Price_list_no" type="hidden" />
                                                                        </td>
                                                                        <td>
                                                                            <div class="col-sm-8 lpo_form no-padding">
                                                                                <input id="AvailableStockInBase" class="form-control date num_right" autocomplete="off" type="text" name="AvailableStockInBase" placeholder="0000.00" disabled>
                                                                            </div>
                                                                            <div class="col-sm-2 i_Icon no-padding" id="div_SubItemAvlQty">
                                                                                <button type="button" id="SubItemAvlQty" disabled class="calculator subItmImg" data-toggle="modal" onclick="return GetSubItemAvlStock(event)" data-target="#SubItemStock" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                            </div>
                                                                            <div class="col-sm-2 i_Icon"><button type="button" id="StkDtlBtnIcon" class="calculator available_credit_limit" onclick="OnClickStkDtlIconBtn(event)" data-toggle="modal" data-target="#ItemStockLotBatchSrWise" @*data-target="#PartialSOStockDetail"*@ data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title=" @Resource.StockDetail"> </button></div>
                                                                            <input id="ReservedStockInBase" type="hidden" />
                                                                            <input id="RejectedStockInBase" type="hidden" />
                                                                            <input id="ReworkableStockInBase" type="hidden" />
                                                                            <input id="TotalStock" type="hidden" />
                                                                        </td>

                                                                        <td>
                                                                            <div class="col-sm-9 lpo_form no-padding">
                                                                                <input id="ord_qty_spec" onpaste="return CopyPasteData(event)" disabled class="form-control date num_right" autocomplete="off" onchange="OnChangeSOItemQty(event)" onkeypress="return AmountFloatQty(this,event);" type="text" name="ord_qty_spec" placeholder="0000.00"><span id="ord_qty_specError" class="error-message is-visible"></span>
                                                                            </div>
                                                                            <div class="col-sm-3 i_Icon no-padding" id="div_SubItemOrderQty">
                                                                                <input hidden type="text" id="sub_item" value="" />
                                                                                <button type="button" id="SubItemOrderQty" disabled class="calculator subItmImg" onclick="return SubItemDetailsPopUp('Quantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                            </div>
                                                                        </td>
                                                                        @if (Model.DocumentMenuId == "105103125")
                                                                        {
                                                                            <td>
                                                                                <div class="col-sm-9 lpo_form no-padding">
                                                                                    <input id="foc_qty" onpaste="return CopyPasteData(event)" onchange="OnChangeFocQty(event)" class="form-control date num_right" disabled value="" autocomplete="off" onkeypress="return AmountFloatQty(this,event);" type="text" name="ord_qty_spec" placeholder="0000.00"><span id="ord_qty_specError" class="error-message is-visible"></span>
                                                                                </div>
                                                                                <div class="col-sm-3 i_Icon no-padding" id="div_SubItemFocQty">
                                                                                    <button type="button" id="SubItemFocQty" disabled class="calculator subItmImg" onclick="return SubItemDetailsPopUp('FocQuantity',event)" data-toggle="modal" data-target="#SubItem" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/subItem.png" alt="" title="@Resource.SubItem @Resource.Detail"> </button>
                                                                                </div>
                                                                            </td>
                                                                        }

                                                                        @if (Model.DocumentMenuId == "105103125")
                                                                        {
                                                                            <td><div class="lpo_form"><input id="MRP" value="" onpaste="return CopyPasteData(event)" class="form-control num_right" autocomplete="off" type="text" name="MRP" onchange="OnchangeMRP(event)" onkeypress="return RateFloatValueonly(this,event);" placeholder="0000.00" disabled=""><span id="item_mrpError" class="error-message is-visible"></span></div></td>
                                                                            <td>
                                                                                <div class="lpo_form">
                                                                                    <input id="MRPDiscount" value="" onpaste="return CopyPasteData(event)" class="form-control num_right" autocomplete="off" type="text" name="MRPDiscount" onchange="OnchangeMRPDisc(event)" onkeypress="return FloatValuePerOnly(this,event);" placeholder="0000.00" disabled=""><span id="MRPDiscountError" class="error-message is-visible"></span>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <div class="col-md-10 no-padding">
                                                                                    <input id="item_rate" disabled class="form-control date num_right" maxlength="10" onchange="OnChangeSOItemRate(event)" autocomplete="off" onkeypress="return RateFloatValueonly(this,event);" type="text" name="item_rate" placeholder="0000.00">
                                                                                </div>
                                                                                <div class="col-md-2 no-padding i_Icon" id="PriceListDetailDiv">
                                                                                    <button type="button" id="PriceListDetail" class="calculator available_credit_limit" onclick="GetPriceListDetails(event);" data-toggle="modal" data-target="#PriceListDetail" data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="@Resource.PriceList @Resource.Detail"> </button>
                                                                                </div>
                                                                            </td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td> <input id="item_rate" disabled class="form-control date num_right" maxlength="10" onchange="OnChangeSOItemRate(event)" autocomplete="off" onkeypress="return RateFloatValueonly(this,event);" type="text" name="item_rate" placeholder="0000.00"></td>
                                                                        }

                                                                        <td>
                                                                            <div class="lpo_form">
                                                                                <input id="item_disc_perc" class="form-control date num_right" onpaste="return CopyPasteData(event)" disabled onchange="OnChangeSOItemDiscountPerc(event)" onkeypress="return FloatValuePerOnly(this,event);" autocomplete="off" type="text" name="item_disc_perc" placeholder="0000.00"> <span id="item_disc_percError" class="error-message is-visible"></span>
                                                                            </div>
                                                                        </td>
                                                                        <td> <div class="lpo_form"><input id="item_disc_amt" disabled onpaste="return CopyPasteData(event)" class="form-control date num_right" onchange="OnChangeSOItemDiscountAmt(event)" autocomplete="off" onkeypress="return AmtFloatValueonly(this,event);" type="text" name="item_disc_amt" placeholder="0000.00"><span id="item_disc_amtError" class="error-message is-visible"></span></div></td>
                                                                        <td><input id="item_disc_val" class="form-control date num_right" autocomplete="off" type="text" name="item_disc_val" placeholder="0000.00" disabled></td>
                                                                        <td><input id="item_gr_val" class="form-control date num_right" autocomplete="off" type="text" name="item_gr_val" placeholder="0000.00" disabled></td>
                                                                        <td style="display:@displaynoneinDomestic"><div class="lpo_form"><input id="item_ass_val" disabled onpaste="return CopyPasteData(event)" class="form-control date num_right" autocomplete="off" type="text" onkeypress="return Ass_valFloatValueonly(this,event);" onchange="OnChangeAssessAmt(event)" name="item_ass_val" placeholder="0000.00"><span id="item_ass_valError" class="error-message is-visible"></span></div></td>
                                                                        @if (Model.DocumentMenuId == "105103125")
                                                                        {
                                                                            if (Model.SO_SourceType == "D")
                                                                            {
                                                                                <td class="qt_to" hidden>
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        <input type="checkbox" class="custom-control-input margin-switch" onclick="OnClickFOCCheckBox(event)" id="FOC">
                                                                                        <label class="custom-control-label" for="" style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                            }

                                                                            <td class="qt_to">
                                                                                <div class="custom-control custom-switch sample_issue">
                                                                                    <input type="checkbox" disabled class="custom-control-input margin-switch" onclick="OnClickTaxExemptedCheckBox(event)" id="TaxExempted">
                                                                                    <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                </div>
                                                                            </td>
                                                                            if (ViewBag.GstApplicable == "Y")
                                                                            {
                                                                                <td class="qt_to">
                                                                                    <div class="custom-control custom-switch sample_issue">
                                                                                        <input type="checkbox" disabled class="custom-control-input  margin-switch" onclick="OnClickManualGSTCheckBox(event)" id="ManualGST">
                                                                                        <label class="custom-control-label" disabled for="" style="padding: 3px 0px;"> </label>
                                                                                    </div>
                                                                                </td>
                                                                            }
                                                                        }
                                                                        <td><div class="col-sm-10 lpo_form no-padding"> <input id="item_tax_amt" class="form-control num_right" autocomplete="off" type="text" name="item_tax_amt" placeholder="0000.00" disabled> </div> <div class="col-sm-2 lpo_form no-padding"><button type="button" class="calculator" id="BtnTxtCalculation" onclick="OnClickTaxCalculationBtn(event)" data-toggle="modal" data-target="#ItemCalculate" data-backdrop="static" data-keyboard="false"><i class="fa fa-calculator" aria-hidden="true" title="@Resource.TaxCalculator"></i></button></div> </td>
                                                                        <td><input id="item_oc_amt" class="form-control date num_right" autocomplete="off" type="text" name="item_oc_amt" placeholder="0000.00" disabled></td>
                                                                        <td style="display:@displaynoneinDomestic"><input id="item_net_val_spec" class="form-control date num_right" autocomplete="off" type="text" name="item_net_val_spec" placeholder="0000.00" disabled></td>
                                                                        <td><input id="item_net_val_bs" class="form-control date num_right" autocomplete="off" type="text" name="item_net_val_bs" placeholder="0000.00" disabled></td>
                                                                        <td><div class="custom-control custom-switch sample_issue"><input type="checkbox" class="custom-control-input margin-switch" onchange="CheckedItemWiseFClose()" id="ItmFClosed" disabled><label class="custom-control-label" for="ItmFClosed" style="padding: 3px 0px;"> </label></div></td>
                                                                        <td><textarea id="remarks" class="form-control remarksmessage" onmouseover="OnMouseOver(this.value)" autocomplete="off" disabled name="remarks" maxlength="1500" placeholder="@Resource.remarks"></textarea></td>
                                                                    </tr>
                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <table class="table table-bordered po_total_th" style="margin-top:10px; margin-bottom:0px;">
                                                    <thead>
                                                        <tr>
                                                            <th width="12%" class="right_aligh text_normal">
                                                                @Resource.GrossValue
                                                                @Html.TextBoxFor(model => model.SO_GrossValue, new { @id = "TxtGrossValue", @class = "form-control tax_cal text_bold", @autocomplete = "off", @type = "text", @name = "SO_GrossValue", @placeholder = "0000.00", @readonly = "readonly" })
                                                                @*<input id="TxtGrossValue" class="form-control tax_cal text_bold" autocomplete="off" type="text" name="SO_GrossValue" placeholder="0000.00" disabled>*@
                                                            </th>
                                                            <th width="12%" class="right_aligh text_normal">
                                                                @Resource.Order @Resource.Discount @Resource.InPercentage
                                                                @Html.TextBoxFor(model => model.OrderDiscountInPercentage, new { @id = "OrderDiscountInPercentage", @class = "form-control tax_cal text_bold", maxlength = "", autocomplete = "off", type = "text", onchange = "OnchangeDiscInPerc(event)", @disabled = "disabled", onkeypress = "return FloatValuePercDiscOnly(this,event);", name = "OrderDiscountInPercentage", placeholder = "0000.00" })
                                                                @*<input id="OrderDiscountInPercentage" class="form-control tax_cal text_bold" autocomplete="off" maxlength="2" type="text" onchange="OnchangeDisc(event)" onkeypress="return FloatValuePerOnly(this,event);" name="OrderDiscountInPercentage" placeholder="0000.00">*@
                                                            </th>
                                                            <th width="13%" class="right_aligh text_normal">
                                                                @Resource.Order @Resource.Discount @Resource.InAmount
                                                                @Html.TextBoxFor(model => model.OrderDiscountInAmount, new { @id = "OrderDiscountInAmount", @class = "form-control tax_cal text_bold", autocomplete = "off", type = "text", onchange = "OnchangeDiscInAmt(event)", @disabled = "disabled", onkeypress = "return DiscFloatValueonly(this,event);", name = "OrderDiscountInAmount", placeholder = "0000.00" })
                                                                @*<input id="OrderDiscountInAmount" class="form-control tax_cal text_bold" autocomplete="off" type="text" name="OrderDiscountInAmount" placeholder="0000.00" >*@
                                                            </th>
                                                            <th width="12%" class="right_aligh text_normal" style="display:@displaynoneinDomestic">
                                                                @Resource.AssessableValue
                                                                @Html.TextBoxFor(model => model.SO_AssessValue, new { @id = "TxtAssessableValue", @class = "form-control tax_cal text_bold", @autocomplete = "off", @type = "text", @name = "SO_AssessableValue", @placeholder = "0000.00", @readonly = "readonly" })
                                                                @*<input id="TxtAssessableValue" class="form-control tax_cal text_bold" autocomplete="off" type="text" name="SO_AssessableValue" placeholder="0000.00" disabled>*@
                                                            </th>
                                                            <td style="display: none;"><input type="hidden" id="TotalPackedQty" /></td>
                                                            <th width="10%" class="right_aligh text_normal">
                                                                @Resource.TaxAmount
                                                                @Html.TextBoxFor(model => model.SO_TaxValue, new { @id = "TxtTaxAmount", @class = "form-control tax_cal text_bold", @autocomplete = "off", @type = "text", @name = "SO_TaxAmount", @placeholder = "0000.00", @readonly = "readonly" })
                                                                @Html.HiddenFor(model => model.SO_DiscountValue, new { @id = "TxtDiscountAmount" })
                                                                @*<input id="TxtTaxAmount" class="form-control tax_cal text_bold" autocomplete="off" type="text" name="SO_TaxAmount" placeholder="0000.00" disabled>*@
                                                            </th>
                                                            <th width="12%" class="right_aligh text_normal">
                                                                @Resource.OtherCharges  <button type="button" id="BtnOC_Amount" class="calculator" data-toggle="modal" onclick="OnClickOtherChargeBtn();" data-target="#OtherChargesCalculator" data-backdrop="static" data-keyboard="false" style="float:right;">@*<img src="~/Content/Images/Calculator.png" width="16" height="16" title="@Resource.OtherChargesCalculator" />*@<i class="fa fa-calculator" aria-hidden="true" title="@Resource.OtherChargesCalculator"></i></button>
                                                                @Html.TextBoxFor(model => model.SO_OtherCharge, new { @id = "SO_OtherCharges", @class = "form-control tax_cal text_bold", @autocomplete = "off", @type = "text", @name = "SO_OtherCharges", @placeholder = "0000.00", @readonly = "readonly" })
                                                                @*<input id="SO_OtherCharges" class="form-control tax_cal text_bold" autocomplete="off" type="text" name="SO_OtherCharges" placeholder="0000.00" disabled>*@
                                                            </th>
                                                            <th width="15%" class="right_aligh text_normal" style="display:@displaynoneinDomestic">
                                                                @Resource.NetOrderValue @Resource.InSpecific
                                                                @Html.TextBoxFor(model => model.SO_NetOrderValue_InSep, new { @id = "NetOrderValueSpe", @class = "form-control tax_cal text_bold", @autocomplete = "off", @type = "text", @name = "SO_NetOrderValueSpe", @placeholder = "0000.00", @readonly = "readonly" })
                                                                @*<input id="NetOrderValueSpe" class="form-control tax_cal text_bold" autocomplete="off" type="text" name="SO_NetOrderValueSpe" placeholder="0000.00" disabled>*@
                                                            </th>
                                                            <th width="14%" class="right_aligh text_normal">
                                                                @Resource.NetOrderValue @Resource.InBase
                                                                @Html.TextBoxFor(model => model.SO_NetOrderValue_InBase, new { @id = "NetOrderValueInBase", @class = "form-control tax_cal text_bold", @autocomplete = "off", @type = "text", @name = "SO_NetOrderValueInBase", @placeholder = "0000.00", @readonly = "readonly" })
                                                                @*<input id="NetOrderValueInBase" class="form-control tax_cal text_bold" autocomplete="off" type="text" name="SO_NetOrderValueInBase" placeholder="0000.00" disabled>*@
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                </table>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            @Html.Partial("~/Areas/Common/Views/Comn_PartialDeliveryAndScheduleDetail.cshtml")
                            @Html.Partial("~/Areas/Common/Views/Comn_PartialTaxAndOtherChargeDetail_New.cshtml")
                            @*<section class="panel panel-default">
                                    <div class="panel-heading" role="tab" id="headingFour">
                                        <h4 class="panel-title"> <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour"> @Resource.TaxAndOtherCharges <span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span> </a> </h4>
                                    </div>
                                    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
                                        <div class="panel-body">
                                            <table width="100%">
                                                <tr>
                                                    <td>
                                                        <div class="table-responsive">
                                                            <div id="" class="col-md-6 col-sm-12" style="margin-top:10px;">
                                                                <table class="table table-striped jambo_table bulk_action" id="SO_ItemTaxAmountList">
                                                                    <thead>
                                                                        <tr class="headings">
                                                                            <th class="column-title">@Resource.TaxName</th>
                                                                            <th class="column-title num_right">@Resource.Amount</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    </tbody>
                                                                    <tfoot>
                                                                        <tr class="total">
                                                                            <td colspan="1"><strong> @Resource.TotalTax</strong></td>
                                                                            <td align="right"><strong> <span id="SO_ItemTaxAmountTotal"></span></strong></td>
                                                                        </tr>
                                                                    </tfoot>
                                                                </table>
                                                            </div>
                                                            <div id="" class="col-md-6 col-sm-12" style="margin-top:10px;">
                                                                <table class="table table-striped jambo_table bulk_action" id="SO_OtherChargeList">
                                                                    <thead>
                                                                        <tr class="headings">
                                                                            <th class="column-title">@Resource.OtherCharges</th>
                                                                            <th class="column-title no-link last" style="text-align: right;"><span class="nobr">@Resource.Amount</span> </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    </tbody>
                                                                    <tfoot>
                                                                        <tr style="background-color: #e4e4e4;">
                                                                            <td><strong>@Resource.TotalOtherCharges</strong></td>
                                                                            <td align="right"><strong><span id="SO_OtherChargeTotal"></span></strong></td>
                                                                        </tr>
                                                                    </tfoot>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </section>*@
                            @Html.Partial("~/Areas/Common/Views/Comn_PartialTermsAnConditionDetailModel.cshtml")
                            @*/*------------------Attachment Start----------------*/*@
                            @Html.Partial("~/Areas/Common/Views/Comn_PartialAttatchmentDetail.cshtml")
                            @Html.HiddenFor(model => model.attatchmentdetail, new { @id = "hdn_Attatchment_details" })
                            @*/*------------------Attachment End----------------*/*@
                        </article>
                    </div>
                </div>
            </div>
        </div>
    }
}
<script type="text/javascript">
    function LSO_ErrorPage() {
        debugger;
        try {
            window.location.href = "@Url.Action("ErrorPage", "LSODetail")";
        } catch (err) {
            console.log("ErrorPage Error : " + err.message);
        }
    }
</script>
