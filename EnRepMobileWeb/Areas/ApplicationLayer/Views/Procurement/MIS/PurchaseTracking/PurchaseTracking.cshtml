@model EnRepMobileWeb.MODELS.ApplicationLayer.Procurement.MIS.PurchaseTracking.PurchaseTrackingModel
@using EnRepMobileWeb.Resources;
@using System.Data
@if (Session["UserId"] == null)
{
    Response.Redirect("~/Login");
}
@{
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}
@*<style>
    .SourceType {
        height: 28px;
    }

    button.multiselect {
        width: 100% !important;
        max-width: 100% !important;
    }
</style>*@
<script src="~/Content/Css/jquery/dist/jquery.min.js"></script>
<script src="~/Content/Scripts/ApplicationLayer/Procurement/MIS/PurchaseTracking/PurchaseTrackingJS.js"></script>
<title>@Model.Title</title>
@using (Html.BeginForm("PurchaseTrackingActionCommands", "PurchaseTracking", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="row">
        <!-- Delivery Schedule -->
        <div id="PTDeliverySchedule" class="modal fade" role="dialog">
            <div class="modal-dialog" style=" max-width:700px;">
                <!-- Modal content-->
                <div id="ddldeliverysch">
                    @Html.Partial("~/Areas/Common/Views/Comn_PartialMISOrderDeliverySchedule.cshtml")
                </div>
            </div>
        </div>
        <div class="col-md-12 col-sm-12 ">
            <div class="x_panel mar_pad1 ">
                <div class="x_content mar_pad1">
                    <h2 class="col-md-6 col-sm-12 heading_left_padding ">@ViewBag.MenuPageName</h2>
                    <div class="col-md-1 col-sm-12 text-right">
                        <label class="col-form-label label-align">@Resource.Branch</label>
                    </div>
                    <div class="col-md-3 col-sm-12 pl-0 multiselectBranch">
                        <div id="div_ddl_brlist">
                            @Html.Partial("~/Areas/Common/Views/Comn_PartialBranchList.cshtml")
                        </div>
                        <span class="error_message" id="span_br" style="display: none;"></span>
                        @Html.HiddenFor(model => model.hdbr_id, new { @id = "Hdn_brlist" })
                    </div>
                    @*<div id="" class="col-md-3 col-sm-12 no-margin">
            <div class="col-md-6 col-sm-12 no-margin" style="text-align:right;">
                <label class="col-form-label label-align">@Resource.ReportType</label>
            </div>
            <div class="col-md-6 col-sm-12 no-margin no-padding ">
                <select class="form-control" id="rpt_type" name="ReportType" onchange="OnChangeReportTypeddl()">
                    <option value="SU">Summary</option>
                    <option value="DE">Detailed</option>
                </select>
            </div>
        </div>*@
                    <div id="" class="col-md-2 col-sm-12 no-margin no-padding ">
                        <div class="col-md-5 col-sm-12 no-margin no-padding ">
                            <label class="col-form-label label-align">@Resource.Order @Resource.Type</label>
                        </div>
                        <div class="col-md-7 col-sm-12 no-margin no-padding ">
                            <select class="form-control" id="OrderType" name="OrderType" onchange="OnChangeStockByddl();">
                                <option value="A" selected="selected">All Orders</option>
                                <option value="P">Pending Orders</option>
                                <option value="O">Overdue Orders</option>
                            </select>
                            @Html.HiddenFor(m => m.OrderType1, new { @id = "hdnOrdertype1" })
                            @Html.HiddenFor(m => m.OldOrderType1, new { @id = "hdnOrdertype1_old" })
                            @Html.HiddenFor(m => m.SearchValue, new { @id = "HdnSearchValue" })
                            @Html.HiddenFor(m => m.sortColumn, new { @id = "HdnsortColumn" })
                            @Html.HiddenFor(m => m.sortColumnDir, new { @id = "HdnsortColumnDir" })
                        </div>
                    </div>
                    <div class="x_title pad_mar ">
                        <div class="col-md-12 col-sm-12 icon_tool padding_zero">
                            <form class="available_stock pad_mar" action="" method="post" novalidate="">
                                <div class="col-md-12 col-sm-12 no-padding">
                                    <div class="col-md-2 col-sm-12">
                                        <label class="col-form-label label-align">@Resource.Order @Resource.Type </label>
                                        <select id="ddlOrderType" class="form-control" name="OrderType" onchange="BindOrderNumberList();" multiple>
                                            @*<option selected="selected" value="0">---All---</option>*@
                                            <option value="D">Domestic</option>
                                            <option value="I">Import</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2 col-sm-12" hidden="hidden" @* field hidden by Suraj Maurya on 18-07-2025 as discussed with vishal sir this field is not required *@>
                                        <label class="col-form-label label-align">@Resource.Item @Resource.Type </label>
                                        <select id="ddlItemType" class="form-control" name="ItemType">
                                            <option selected="selected" value="0">---All---</option>
                                            <option value="C">Consumable</option>
                                            <option value="S">Stockable</option>
                                        </select>
                                    </div>

                                    <div style="display:none" class="col-md-2 col-sm-12 pl-0">
                                        <label class="col-form-label label-align">@Resource.Order @Resource.Date </label>
                                        <input class="form-control" id="txtOrderDate" max="2023-09-12" name="OrderDate" disabled onchange="" type="text" value="2023-09-01">
                                    </div>
                                    <div class="col-md-3 col-sm-12 pl-0">
                                        <label class="col-form-label label-align">@Resource.SupplierName </label>
                                        @Html.DropDownListFor(model => model.SuppId, new SelectList(Model.SuppliersList, "SuppId", "SuppName"),
                                                 new { @class = "form-control", @id = "ddlSuppliersList", @name = "SuppliersList", onchange = "BindOrderNumberList();", @multiple = "multiple" })
                                    </div>
                                    <div class="col-md-2 col-sm-12">
                                        <label class="col-form-label label-align">@Resource.SupplierCategory </label>
                                        @Html.DropDownListFor(model => model.category, new SelectList(Model.categoryLists, "Cat_id", "Cat_val"),
                                       new { @class = "form-control", @id = "SupplierCategory", @name = "SupplierCategory", @multiple = "multiple" })
                                    </div>
                                    <div class="col-md-2 col-sm-12">
                                        <label class="col-form-label label-align">@Resource.SupplierPortfolio </label>
                                        @Html.DropDownListFor(model => model.portFolio, new SelectList(Model.portFolioLists, "Port_id", "Port_val"),
                                       new { @class = "form-control", @id = "SupplierPortfolio", @name = "SupplierPortfolio", @multiple = "multiple" })
                                    </div>
                                    <div class="col-md-2 col-sm-12 pl-0">
                                        <label class="col-form-label label-align">@Resource.OrderNumber </label>
                                        @Html.DropDownListFor(model => model.OrderNo, new SelectList(Model.PoNumberList, "po_Value", "OrderNumber"),
                                                new { @class = "form-control", @id = "ddlOrderNumberlist", @name = "OrderNo", @multiple = "multiple" })
                                    </div>

                                    <div class="clear"></div>
                                    <div class="col-md-3 col-sm-12">
                                        <label class="col-form-label label-align">@Resource.ItemName </label>
                                        @Html.DropDownListFor(model => model.ItemId, new SelectList(Model.ItemsList, "ItemId", "ItemName"),
                                               new { @class = "form-control", @id = "ddlItemsList", @name = "ItemsList"/*, @multiple = "multiple" */})
                                    </div>


                                    <div class="col-md-2 col-sm-12">
                                        <label class="col-form-label label-align">@Resource.Currency </label>
                                        @Html.DropDownListFor(model => model.CurrId, new SelectList(Model.Currencylist, "curr_id", "curr_name"),
                                              new { @class = "form-control", @id = "ddlCurrencylist", @name = "Currencylist", onchange = "BindOrderNumberList();", @multiple = "multiple" })
                                    </div>
                                    <div class="col-md-2 col-sm-12 pl-0">
                                        <label class="col-form-label label-align">
                                            @Resource.FromDate
                                        </label>
                                        @Html.TextBoxFor(model => model.FromDate, new { @class = "form-control", @id = "txtFromdate", @type = "date", @max = DateTime.Now.ToString("yyyy-MM-dd") })
                                        <input id="hdFromdate" name="FromDate" type="hidden" value="2021-04-01">
                                        <span id="PaymentDate" class="sr-only">(success)</span>
                                    </div>
                                    <div class="col-md-2 col-sm-12 pl-0">
                                        <label class="col-form-label label-align">
                                            @Resource.ToDate
                                        </label>
                                        @Html.TextBoxFor(model => model.ToDate, new { @class = "form-control", @id = "txtTodate", @placeholder = "dd-MM-yyyy", @type = "date", @max = DateTime.Now.ToString("yyyy-MM-dd") })
                                        <span id="PaymentDate" class="sr-only">(success)</span>
                                    </div>

                                    <div class="col-md-1 col-sm-12 pl-0">
                                        <button type="button" class="btn btn-primary btn-sm margintop20" id="BtnSearch" onclick="GetPOTrackingMisDetails();"><i class="fa fa-search" aria-hidden="true"></i></button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12 col-sm-12 ">
            <div class="x_panel mar_pad1 ">
                <div class="x_content mar_pad1">
                    <div class="card-box table-responsive dy_table">
                        @Html.HiddenFor(m => m.Filters, new { @id = "hdnFiltersData" })
                        <div class="sticky-table sticky-ltr-cells sb-container container-example1">
                            <div id="MISpoTrackingDetails">
                                @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/PartialMisPOTrackingDetails.cshtml")
                            </div>

                            <div id="MISpoTrackingDetailsPending" style="display:none;">
                                @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/PartialMisPOTrackingDetailsPending.cshtml")
                            </div>
                            <div id="MISpoTrackingDeatilOverdue" style="display:none;">
                                @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/PartialMisPOTrackingOverdue.cshtml")
                            </div>
                            <div id="MISpoTrackingSummary" style="display:none;">
                                @Html.Partial("~/Areas/ApplicationLayer/Views/Shared/PartialMisPOTrackingSummary.cshtml")
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<!-- page content end -->
