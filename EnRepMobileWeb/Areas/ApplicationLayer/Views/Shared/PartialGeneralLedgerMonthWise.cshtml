@using EnRepMobileWeb.Resources;
@using System.Data;
@{
    var rowId = 0;
}
<script src="~/Content/Scripts/Common/CommonPartialJS.js"></script>
<script src="~/Content/Scripts/ApplicationLayer/FinancialAccountingAndControl/MIS/TrialBalance/Tree/javascript.js"></script>
<div>
    <div id="div_trialbalsummary">
        <table id="tree-table" class="table table-hover table-bordered rowhighlighttbl width1900 itmfrz">
            <thead>
                <tr class="Tree1stCh">
                    <th width="16%"> &nbsp;</th>
                    <th width="10%" class="itmStick">@Resource.GLVoucher <br /> @Resource.Number</th>
                    <th width="7%">@Resource.GLVoucher <br /> @Resource.Date</th>
                    <th width="25%">@Resource.Narration</th>
                    <th width="7%">@Resource.Opening <br /> @Resource.Balance</th>
                    <th width="7%">@Resource.Balance <br /> @Resource.Type</th>
                    <th width="7%">@Resource.Debit</th>
                    <th width="7%">@Resource.Credit</th>
                    <th width="7%">@Resource.Closing <br /> @Resource.Balance</th>
                    <th width="7%">@Resource.Balance <br /> @Resource.Type</th>
                </tr>
            </thead>
            <tbody>
                @if (ViewBag.mnthwise != null && ViewBag.glwise != null && ViewBag.docwise != null)
                {
                    foreach (DataRow mrow in ViewBag.mnthwise.Rows)
                    {
                        var mdataid = mrow["mnth"].ToString();

                        <tr data-id="@mdataid" data-parent="0" data-level="1" class="Tree1stCh">
                            <td data-column="name"><span class="treegrid-indent" style="width:15px"></span>@mrow["mnthname"]</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td class="num_right">@mrow["opamt"]</td>
                            <td>@mrow["optype"]</td>
                            <td class="num_right">@mrow["dramt"]</td>
                            <td class="num_right">@mrow["cramt"]</td>
                            <td class="num_right">@mrow["closingamt"]</td>
                            <td>@mrow["closingtype"]</td>
                        </tr>
                        foreach (DataRow drow in ViewBag.docwise.Rows)
                        {
                            var docmid = drow["mnth"].ToString();
                            if (docmid == mdataid)
                            {
                                <tr data-id="@drow["glid"]_@drow["rowid"]" data-parent="@mdataid" data-level="2" style="display: table-row;">
                                    <td data-column="name"><span class="treegrid-indent" style="width:15px"></span>&nbsp;</td>
                                    <td class="ItmNameBreak itmStick tditemfrz">
                                        <div class="col-sm-10 no-padding">@drow["vouno"]</div>
                                        <div class="col-sm-2 i_Icon">
                                            <button type="button" id="VoucherDetail" class="calculator" onclick="OnclickVouDetailsIconBtn(event);" data-toggle="modal" data-target="#VoucherDetailMW" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/iIcon1.png" alt="" title="@Resource.VoucherDetail"> </button>
                                        </div>
                                        <input type="hidden" id="hdn_vouno" value="@drow["vouno"]" />
                                    </td>
                                    <td><span id="spn_voudt">@drow["vou_dt"] </span><input type="hidden" id="hdn_voudt" value="@drow["voudt"]" /> </td>
                                    <td id="td_narr">@drow["narr"]</td>
                                    <td class="num_right">@drow["opamt"]</td>
                                    <td>@drow["optype"]</td>
                                    <td class="num_right">@drow["dramt"]</td>
                                    <td class="num_right">@drow["cramt"]</td>
                                    <td class="num_right">@drow["closingamt"]</td>
                                    <td>@drow["closingtype"]</td>
                                </tr>
                            }
                        }
                        @*foreach (DataRow grow in ViewBag.glwise.Rows)
                        {
                            var gldataid = mrow["mnth"].ToString() + grow["mnth"].ToString() + '_' + grow["rowid"].ToString();
                            var glmid = grow["mnth"].ToString();
                            if (glmid == mdataid)
                            {
                                <tr data-id="@gldataid" data-parent="@mdataid" data-level="2" class="Tree2ndCh" style="display: none;">
                                    <td data-column="name"><span class="treegrid-indent" style="width:15px"></span>@grow["glname"]</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td class="num_right">@grow["opamt"]</td>
                                    <td>@grow["optype"]</td>
                                    <td class="num_right">@grow["dramt"]</td>
                                    <td class="num_right">@grow["cramt"]</td>
                                    <td class="num_right">@grow["closingamt"]</td>
                                    <td>@grow["closingtype"]</td>
                                </tr>

                                foreach (DataRow drow in ViewBag.docwise.Rows)
                                {
                                    var docmid = drow["mnth"].ToString();
                                    if (docmid == mdataid)
                                    {
                                        <tr data-id="@drow["glid"]_@drow["rowid"]" data-parent="@gldataid" data-level="3" style="display: table-row;">
                                            <td data-column="name"><span class="treegrid-indent" style="width:15px"></span>&nbsp;</td>
                                            <td>
                                                <div class="col-sm-10 no-padding">@drow["vouno"]</div>
                                                <div class="col-sm-2 i_Icon">
                                                    <button type="button" id="VoucherDetail" class="calculator" onclick="OnclickVouDetailsIconBtn(event);" data-toggle="modal" data-target="#VoucherDetailMW" data-backdrop="static" data-keyboard="false"><img src="/Content/Images/iIcon1.png" alt="" title="@Resource.VoucherDetail"> </button>
                                                </div>
                                                <input type="hidden" id="hdn_vouno" value="@drow["vouno"]" />
                                            </td>
                                            <td><span id="spn_voudt">@drow["vou_dt"] </span><input type="hidden" id="hdn_voudt" value="@drow["voudt"]" /> </td>
                                            <td>@drow["narr"]</td>
                                            <td class="num_right">@drow["opamt"]</td>
                                            <td>@drow["optype"]</td>
                                            <td class="num_right">@drow["dramt"]</td>
                                            <td class="num_right">@drow["cramt"]</td>
                                            <td class="num_right">@drow["closingamt"]</td>
                                            <td>@drow["closingtype"]</td>
                                        </tr>
                                    }
                                }
                            }
                        }*@
                    }
                }
            </tbody>
        </table>
    </div>
</div>
