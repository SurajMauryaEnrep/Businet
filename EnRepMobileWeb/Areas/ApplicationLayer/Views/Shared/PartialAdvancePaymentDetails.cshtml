@*/*Used in Account Receivable and Account Payable*/*@
@using EnRepMobileWeb.Resources;
@using System.Data
@{
    decimal amt = 0;
    decimal adjustAmt = 0;
    decimal pendingAmt = 0;

    string IsNull(string inStr, string outStr)
    {
        return string.IsNullOrEmpty(inStr) ? outStr : inStr;
    }
}
@*<script src="~/Content/Scripts/Common/CommonJS.js"></script>
    <script src="~/Content/Css/jquery/dist/jquery.min.js"></script>*@
<script src="~/Content/Scripts/Common/CommonPartialJS.js"></script>
<div class="modal-content" id="">
    <div class="modal-header">
        <h2>@Resource.Advance @Resource.Payment @Resource.Detail</h2>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>
    <div class="modal-body pop_top">
        @if (ViewBag.DocID == "105104135122")
        {
            <div class="row">
                <div class="col-md-4 col-sm-12">
                    <label class="col-form-label label-align">
                        @Resource.EntityName
                    </label>
                    <input id="EntityName" class="form-control" autocomplete="off" type="text" name="EntityName" placeholder="@Resource.EntityName" disabled="">
                </div>
                <div class="col-md-2 col-sm-12">
                    <label class="col-form-label label-align">
                        @Resource.Currency
                    </label>
                    <input id="Currency" class="form-control" autocomplete="off" type="text" name="Currency" placeholder="@Resource.Currency" disabled="">
                </div>
            </div>
        }
            <div class="card-box table-responsive dy_table margin10">
                <div id="" class="sticky-table sticky-ltr-cells sb-container container-example1 OrderHistory height30VH pop_csv">
                    <table id="TblAdvPmt" class="table table-striped table-bordered rowhighlighttbl" style="width:100%">
                        <thead>
                            @if (ViewBag.DocID == "105104135122")
                            {
                                <tr class="sticky-header">
                                    <th width="4%"> @Resource.SrNo</th>
                                    <th width="16%">@Resource.Voucher @Resource.Number</th>
                                    <th width="16%">@Resource.Voucher @Resource.Date</th>
                                    <th width="16%">@Resource.Voucher @Resource.Type</th>
                                    <th width="16%">@Resource.Amount</th>
                                </tr>
                            }
                            else
                            {
                                <tr class="sticky-header">
                                    <th width="4%"> @Resource.SrNo</th>
                                    <th width="16%">@Resource.Voucher @Resource.Number</th>
                                    <th width="16%">@Resource.Voucher @Resource.Date</th>
                                    <th width="16%">@Resource.Voucher @Resource.Type</th>
                                    <th width="16%">@Resource.Currency </th>
                                    <th width="16%">@Resource.Amount</th>
                                    <th width="16%">@Resource.AdjustedAmount</th>
                                    <th width="16%">@Resource.Pending @Resource.Amount</th>
                                </tr>
                            }

                        </thead>
                        <tbody>
                            @if (ViewBag.DocID == "105104135122")
                            {
                                if (ViewBag.AdvancesPayment != null)
                                {
                                    var rowNo = 1;
                                    foreach (var dtr in ViewBag.AdvancesPayment)
                                    {
                                        <tr>
                                            <td>@rowNo</td>
                                            <td id="Adv_AP_VouNo">@dtr.vou_no</td>
                                            <td id="Adv_AP_VouDate">@dtr.vou_date</td>
                                            <td id="Adv_AP_VouType">@dtr.vou_type</td>
                                            <td class="num_right" id="Adv_AP_amt_sp">@dtr.pend_amt</td>
                                        </tr>
                                        rowNo = rowNo + 1;
                                    }
                                }
                            }
                            else
                            {
                                if (ViewBag.AdvanceAmountDetail != null)
                                {
                                    var rowNo = 1;
                                    foreach (System.Data.DataRow dtr in ViewBag.AdvanceAmountDetail.Rows)
                                    {
                                        <tr>
                                            <td>@rowNo</td>
                                            <td id="Adv_AP_VouNo">@dtr["VouNo"].ToString()</td>
                                            <td id="Adv_AP_VouDate">@dtr["VouDate"].ToString()</td>
                                            <td id="Adv_AP_VouType">@dtr["VouType"].ToString()</td>
                                            <td id="">@ViewBag.CurrName</td>@*add by shubham maurya on 08-01-2026*@
                                            <td class="num_right" id="Adv_AP_amt_sp">@dtr["amt_sp"].ToString()</td>
                                            <td class="num_right" id="Adv_AP_adj_amt">@dtr["adj_amt"].ToString()</td>
                                            <td class="num_right" id="Adv_AP_pend_amt">
                                                @dtr["pend_amt"].ToString()
                                            </td>
                                        </tr>
                                        //amt = amt + Convert.ToDecimal(IsNull(@dtr["amt_sp"].ToString(),"0"));
                                        //adjustAmt = adjustAmt + Convert.ToDecimal(@dtr["adj_amt"]);
                                        //pendingAmt = pendingAmt + Convert.ToDecimal(IsNull(@dtr["pend_amt"].ToString(),"0"));
                                        rowNo = rowNo + 1;
                                    }
                                }
                            }

                        </tbody>
                        <tfoot>
                            @if (ViewBag.AdvanceAmountDetailTotal != null)
                            {
                                foreach (System.Data.DataRow dtr in ViewBag.AdvanceAmountDetailTotal.Rows)
                                {
                            <tr class="total">
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                @*add by shubham maurya on 08-01-2026*@
                                <td><strong>@Resource.Total</strong></td>
                                <td class="num_right"><strong>@dtr["amt_sp"].ToString()</strong></td>
                                <td class="num_right"><strong>@dtr["adj_amt"].ToString()</strong></td>
                                <td class="num_right"><strong>@dtr["pend_amt"].ToString()</strong></td>
                            </tr>
                                }
                            }
                            @if (ViewBag.DocID == "105104135122")
                            {
                                if (ViewBag.AdvancesPayment != null && ViewBag.AdvancesPayment.Count > 0)
                                {
                                    <tr class="total">
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td><strong>@Resource.Total</strong></td>
                                        <td class="num_right"><strong>@ViewBag.AdvancesPayment[0].Totalpendamt</strong></td>
                                    </tr>
                                }
                            }
                            @*<tr class="total">
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td>Total</td>
                                <td class="num_right">@amt</td>
                                <td class="num_right">@adjustAmt</td>
                                <td class="num_right">@pendingAmt</td>
                            </tr>*@
                        </tfoot>
                    </table>
                    <table id="Hdn_TblAdvPmt" hidden="hidden" class="table table-striped table-bordered rowhighlighttbl" style="width:100%">
                        <thead>
                            <tr class="sticky-header">
                                <th width="4%"> @Resource.SrNo</th>
                                <th width="16%">@Resource.Voucher @Resource.Number</th>
                                <th width="16%">@Resource.Voucher @Resource.Date</th>
                                <th width="16%">@Resource.Voucher @Resource.Type</th>
                                <th width="16%">@Resource.Amount</th>
                                <th width="16%">@Resource.AdjustedAmount</th>
                                <th width="16%">@Resource.Pending @Resource.Amount</th>
                            </tr>
                        </thead>
                        <tbody>

                            @if (ViewBag.AdvanceAmountDetail != null)
                            {
                                var rowNo = 1;
                                foreach (System.Data.DataRow dtr in ViewBag.AdvanceAmountDetail.Rows)
                                {
                                    <tr>
                                        <td>@rowNo</td>
                                        <td id="Adv_AP_VouNo">@dtr["VouNo"].ToString()</td>
                                        <td id="Adv_AP_VouDate">@dtr["VouDate"].ToString()</td>
                                        <td id="Adv_AP_VouType">@dtr["VouType"].ToString()</td>
                                        <td class="num_right" id="Adv_AP_amt_sp">@dtr["amt_sp"].ToString()</td>
                                        <td class="num_right" id="Adv_AP_adj_amt">@dtr["adj_amt"].ToString()</td>
                                        <td class="num_right" id="Adv_AP_pend_amt">
                                            @dtr["pend_amt"].ToString()
                                        </td>
                                    </tr>
                                    //amt = amt + Convert.ToDecimal(IsNull(@dtr["amt_sp"].ToString(),"0"));
                                    //adjustAmt = adjustAmt + Convert.ToDecimal(@dtr["adj_amt"]);
                                    //pendingAmt = pendingAmt + Convert.ToDecimal(IsNull(@dtr["pend_amt"].ToString(),"0"));
                                    rowNo = rowNo + 1;
                                }
                            }
                        </tbody>
                        <tfoot>
                            @if (ViewBag.AdvanceAmountDetailTotal != null)
                            {
                                foreach (System.Data.DataRow dtr in ViewBag.AdvanceAmountDetailTotal.Rows)
                                {
                                    <tr class="total">
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td><strong>@Resource.Total</strong></td>
                                        <td class="num_right"><strong>@dtr["amt_sp"].ToString()</strong></td>
                                        <td class="num_right"><strong>@dtr["adj_amt"].ToString()</strong></td>
                                        <td class="num_right"><strong>@dtr["pend_amt"].ToString()</strong></td>
                                    </tr>
                                }
                            }
                            @*<tr class="total">
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td>Total</td>
                                <td class="num_right">@amt</td>
                                <td class="num_right">@adjustAmt</td>
                                <td class="num_right">@pendingAmt</td>
                            </tr>*@
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" id="CloseBtn">@Resource.Close</button>
    </div>
</div>



