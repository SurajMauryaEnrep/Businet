@using EnRepMobileWeb.Resources;
@{
    //string ValDigit = "0.";
    //var VD = Convert.ToInt32(Session["ValDigit"].ToString());
    //for (var i = 0; i < VD; i++)
    //{
    //    ValDigit += "0";
    //}
    //decimal total = 0;
}
<style>
    #datatable-buttons_wrapper .btn-group a:nth-child(3) {
        display: inline-block;
        position: absolute;
    }
</style>
<script src="~/Content/Scripts/Common/CommonPartialJS.js"></script>
@*<div class="card-box table-responsive dy_table margin15">
    <div id="" class="sticky-table sticky-ltr-cells sb-container container-example1">*@
@if (ViewBag.flag == "OrderWiseSummary")
{
    <table id="DataTable1" class="table table-striped width2500 rowhighlighttbl itmfrz" cellspacing="0" width="100%">
        <thead>
            <tr class="sticky-header">
                <th width="3%">@Resource.SrNo</th>
                <th width="5%" class="itmStick">@Resource.Order <br /> @Resource.Number </th>
                <th width="5%">@Resource.Order <br /> @Resource.Date</th>
                <th width="5%">@Resource.Customer @Resource.ReferenceNumber</th>
                <th width="11%">@Resource.Customer <br /> @Resource.Name</th>
                <th width="5%">@Resource.RegionName</th>
                <th width="5%">@Resource.Order  @Resource.Type</th>
                <th width="5%">@Resource.Currency</th>
                <th hidden="hidden"></th>
                <th width="9%">@Resource.Sales <br /> @Resource.Representative</th>
                <th width="3%">@Resource.Category</th>
                <th width="3%">@Resource.Portfolio</th>
                <th width="3%">@Resource.Customer @Resource.Zone</th>
                <th width="3%">@Resource.Customer @Resource.Group</th>
                <th>@Resource.State</th>
                <th>@Resource.City</th>
                <th hidden="hidden"></th>
                <th width="5%">@Resource.GrossValue <br /> @Resource.InSpecific</th>
                <th width="5%">@Resource.GrossValue <br /> @Resource.InBase</th>
                <th width="5%">@Resource.TaxAmount <br /> @Resource.InSpecific</th>
                <th width="5%">@Resource.TaxAmount <br /> @Resource.InBase</th>
                <th width="6%">@Resource.OtherCharges <br /> @Resource.InSpecific</th>
                <th width="6%">@Resource.OtherCharges<br /> @Resource.InBase</th>
                <th width="5%">@Resource.Order @Resource.Amount  <br /> @Resource.InSpecific </th>
                <th width="5%">@Resource.Order @Resource.Amount  <br /> @Resource.InBase </th>
                <th width="5%">@Resource.ApprovedOn</th>
            </tr>
        </thead>
        <tbody id="">
            @if (ViewBag.OrderDetailList != null)
            {
                var srno = 1;
                foreach (System.Data.DataRow dr in ViewBag.OrderDetailList.Rows)
                {
            <tr>
                <td>@srno</td>
                <td id="txtOrd_no" class="ItmNameBreak itmStick tditemfrz">@dr["app_so_no"].ToString()</td>
                <td>@dr["so_dt1"].ToString()</td>
                <td>@dr["ref_doc_no"].ToString()</td>
                <td>@dr["cust_name"].ToString()</td>
                <td>@dr["cust_region"].ToString()</td>
                <td>@dr["sale_type"].ToString()</td>
                <td class="center">@dr["curr_symbol"].ToString()</td>
                <td hidden="hidden" id="txtCurr_id">@dr["curr_id"].ToString()</td>
                <td>@dr["sale_per"].ToString()</td>
                <td>@dr["cust_catg"].ToString()</td>
                <td>@dr["cust_port"].ToString()</td>
                <td>@dr["cust_zone"].ToString()</td>
                <td>@dr["cust_group"].ToString()</td>
                <td>@dr["cust_state"].ToString()</td>
                <td>@dr["cust_city"].ToString()</td>
                <td hidden="hidden" id="txtOrd_dt">@dr["so_dt"].ToString()</td>
                <td class="num_right" id="txt_SaleAmtSpec">@dr["sale_amount_spec"].ToString()</td>
                <td class="num_right" id="txt_SaleAmt">@dr["sale_amount_bs"].ToString()</td>
                <td class="num_right" id="txt_TaxAmtSpec">@dr["tax_amt_spec"].ToString()</td>
                <td class="num_right" id="txt_TaxAmt">@dr["tax_amt_bs"].ToString()</td>
                <td class="num_right" id="txt_OcAmtSpec">@dr["oc_amt_spec"].ToString()</td>
                <td class="num_right" id="txt_OcAmt">@dr["oc_amt_bs"].ToString()</td>
                <td class="num_right" id="txt_InvoiceAmtSpec">
                    <div class="col-sm-11"><span id=""> @dr["Order_amt_spec"].ToString()</span></div>
                    <div class="col-sm-1 i_Icon">
                        <button type="button" id="InvoiceDetail" class="calculator iButton" onclick="OnclickOrderAmount(event)" data-toggle="modal" data-target="#InvoiceDetail" data-backdrop="static" data-keyboard="false">  <img src="~/Content/Images/iIcon1.png" alt="" title="@Resource.InvoiceDetail" /> @*<i class="fa fa-info" aria-hidden="true" title="@Resource.InvoiceDetail"></i>*@ </button>
                    </div>
                </td>
                <td class="num_right" id="txt_InvoiceAmt">
                    <div class="col-sm-11"><span id=""> @dr["Order_amt_bs"].ToString()</span></div>
                    <div class="col-sm-1 i_Icon">
                        <button type="button" id="InvoiceDetail" class="calculator iButton" onclick="OnclickOrderAmount(event)" data-toggle="modal" data-target="#InvoiceDetail" data-backdrop="static" data-keyboard="false">  <img src="~/Content/Images/iIcon1.png" alt="" title="@Resource.InvoiceDetail" /> @*<i class="fa fa-info" aria-hidden="true" title="@Resource.InvoiceDetail"></i>*@ </button>
                    </div>
                </td>
                <td class="num_right">@dr["app_dt"].ToString()</td>
            </tr>
                    srno = srno + 1;
                }
            }
        </tbody>
        <tfoot>
            @if (ViewBag.OrderWiseSummaryTotal != null)
            {
                foreach (System.Data.DataRow dr in ViewBag.OrderWiseSummaryTotal.Rows)
                {
            <tr class="total">
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td hidden="hidden">&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td hidden="hidden">&nbsp;</td>
                <td align="right"><strong>Total</strong></td>
                <td class="num_right"><strong>@dr["sale_amount_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["sale_amount_bs"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["tax_amt_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["tax_amt_bs"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["oc_amt_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["oc_amt_bs"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["Order_amt_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["Order_amt_bs"].ToString()</strong></td>
                <td>&nbsp;</td>
            </tr>
                }
            }

            @*<tr class="total">
                    <td colspan="4" align="right"><strong>Total</strong></td>
                    <td class="num_right"><strong>${parseFloat(IsnullDT(SaleAmt)).toFixed(ValDigit)}</strong></td>
                    <td class="num_right"><strong>${parseFloat(IsnullDT(TaxAmt)).toFixed(ValDigit)}</strong></td>
                    <td class="num_right"><strong>${parseFloat(IsnullDT(OcAmt)).toFixed(ValDigit)}</strong></td>
                    <td class="num_right"><strong>${parseFloat(IsnullDT(InvAmtBs)).toFixed(ValDigit)}</strong></td>
                    <td class="num_right"><strong>${parseFloat(IsnullDT(InvAmtSpcs)).toFixed(ValDigit)}</strong></td>

                </tr>*@
        </tfoot>
    </table>
}
else
{
    <table id="DataTable1" class="table table-striped width3200 rowhighlighttbl itmfrz" cellspacing="0" width="100%">
        <thead>
            <tr class="sticky-header">
                <th width="2%">@Resource.SrNo</th>
                <th width="5%" class="itmStick">@Resource.Order <br /> @Resource.Number </th>
                <th width="3%">@Resource.Order <br /> @Resource.Date</th>
                <th width="5%">@Resource.Customer @Resource.ReferenceNumber</th>
                <th width="5%">@Resource.Customer <br /> @Resource.Name</th>
                <th width="4%">@Resource.RegionName</th>
                <th width="4%">@Resource.Order  @Resource.Type</th>
                <th width="3%">@Resource.Currency</th>
                <th hidden="hidden"></th>
                <th width="7%">@Resource.Sales <br /> @Resource.Representative</th>
                <th width="3%">@Resource.Category</th>
                <th width="3%">@Resource.Portfolio</th>
                <th width="3%">@Resource.Customer @Resource.Zone</th>
                <th width="3%">@Resource.Customer @Resource.Group</th>
                <th>@Resource.State</th>
                <th>@Resource.City</th>
                <th hidden="hidden"></th>
                <th width="9%">@Resource.ItemName</th>
                <th width="3%">@Resource.UOM</th>
                <th width="5%">@Resource.Order <br /> @Resource.Quantity</th>
                <th width="5%">@Resource.Price <br /> @Resource.InSpecific </th>
                <th width="5%">@Resource.Price <br /> @Resource.InBase </th>
                <th width="5%">@Resource.GrossValue <br /> @Resource.InSpecific</th>
                <th width="5%">@Resource.GrossValue <br /> @Resource.InBase</th>
                <th width="5%">@Resource.TaxAmount <br /> @Resource.InSpecific</th>
                <th width="5%">@Resource.TaxAmount <br /> @Resource.InBase</th>
                <th width="5%">@Resource.OtherCharges <br /> @Resource.InSpecific </th>
                <th width="5%">@Resource.OtherCharges <br /> @Resource.InBase </th>
                <th width="5%" class="width-110">@Resource.Order @Resource.Amount  <br /> @Resource.InSpecific </th>
                <th width="5%">@Resource.Order @Resource.Amount  <br /> @Resource.InBase </th>
            </tr>
        </thead>
        <tbody id="">
            @if (ViewBag.OrderDetailList != null)
            {
                var srno = 1;
                foreach (System.Data.DataRow dr in ViewBag.OrderDetailList.Rows)
                {
            <tr>
                <td>@srno</td>
                <td id="td_app_so_no" class="ItmNameBreak itmStick tditemfrz">@dr["app_so_no"].ToString()</td>
                <td>@dr["so_dt1"].ToString()</td>
                <td>@dr["ref_doc_no"].ToString()</td>
                <td>@dr["cust_name"].ToString()</td>
                <td>@dr["cust_region"].ToString()</td>
                <td>@dr["sale_type"].ToString()</td>
                <td class="center">@dr["curr_symbol"].ToString()</td>
                <td hidden="hidden" id="txtCurr_id">@dr["curr_id"].ToString()</td>
                <td>@dr["sale_per"].ToString()</td>
                <td>@dr["cust_catg"].ToString()</td>
                <td>@dr["cust_port"].ToString()</td>
                <td>@dr["cust_zone"].ToString()</td>
                <td>@dr["cust_group"].ToString()</td>
                <td>@dr["cust_state"].ToString()</td>
                <td>@dr["cust_city"].ToString()</td>
                <td hidden="hidden" id="txtOrd_dt">@dr["so_dt"].ToString()</td>
                <td>
                    <div class="col-sm-11 i_Icon"><span id="">@dr["item_name"].ToString()</span></div>
                    <input hidden="hidden" id="Hdn_item_id" value="@dr["item_id"].ToString()">
                    <div class="col-sm-1 i_Icon">
                        <button type="button" id="" class="calculator" onclick="OnClickIconBtn(event)" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false">
                            <img src="/Content/Images/iIcon1.png" alt="" title="Item Information">
                        </button>
                    </div>
                </td>
                <td>@dr["uom_alias"].ToString()</td>
                <td class="num_right">
                    <div class="col-md-10 col-sm-12 no-padding num_right ">
                        @dr["item_qty"].ToString()
                    </div>
                    <div class="col-sm-2  i_Icon no-padding">
                        <button type="button" id="OrderDeliverySchedule" class="calculator" onclick="OnclickDeliverySchedule(event);" data-toggle="modal" data-target="#MISOrderDeliverySchedule " data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="Delivery Schedule">  </button>
                    </div>
                </td>
                <td class="num_right">@dr["item_rate_spec"].ToString()</td>
                <td class="num_right">@dr["item_rate_bs"].ToString()</td>
                <td class="num_right">@dr["item_gr_val_spec"].ToString()</td>
                <td class="num_right">@dr["item_gr_val_bs"].ToString()</td>
                <td class="num_right">@dr["item_tax_amt_spec"].ToString()</td>
                <td class="num_right">@dr["item_tax_amt_bs"].ToString()</td>
                <td class="num_right">@dr["item_oc_amt_spec"].ToString()</td>
                <td class="num_right">@dr["item_oc_amt_bs"].ToString()</td>
                <td class="num_right">@dr["item_net_val_spec"].ToString()</td>
                <td class="num_right">@dr["item_net_val_bs"].ToString()</td>
            </tr>
                    srno = srno + 1;
                }
            }

            @*<tr>
                    <td>02</td>
                    <td>32AMBPG7773M015</td>
                    <td>MEA</td>
                    <td>Domestic</td>
                    <td>INR</td>
                    <td hidden="hidden">&nbsp;</td>
                    <td>Dilip</td>
                    <td>B1/01/24/DSO0000186</td>
                    <td>20-01-2024</td>
                    <td hidden="hidden">&nbsp;</td>
                    <td>
                        <div class="col-sm-11 i_Icon"><span id="">1014</span></div>
                        <input hidden="hidden" id="Hdn_item_id" value="ITM0002314">
                        <div class="col-sm-1 i_Icon">
                            <button type="button" id="" class="calculator" onclick="OnClickIconBtn(event)" data-toggle="modal" data-target="#ItemInfo" data-backdrop="static" data-keyboard="false">
                                <img src="/Content/Images/iIcon1.png" alt="" title="Item Information">
                            </button>
                        </div>
                    </td>
                    <td>Pcs</td>
                    <td class="num_right">
                        <div class="col-md-10 col-sm-12 no-padding num_right ">
                            15.000
                        </div>
                        <div class="col-sm-2  i_Icon no-padding">
                            <button type="button" id="OrderDeliverySchedule" class="calculator" onclick="OnclickDeliverySchedule(event);" data-toggle="modal" data-target="#MISOrderDeliverySchedule " data-backdrop="static" data-keyboard="false"> <img src="/Content/Images/iIcon1.png" alt="" title="Delivery Schedule">  </button>
                        </div>
                    </td>
                    <td class="num_right">1199.0000</td>
                    <td class="num_right">1199.0000</td>
                    <td class="num_right">15826.8000</td>
                    <td class="num_right">15826.8000</td>
                    <td class="num_right">2848.8200</td>
                    <td class="num_right">2848.8200</td>
                    <td class="num_right">0.0000</td>
                    <td class="num_right">0.0000</td>
                    <td class="num_right">18675.6200</td>
                    <td class="num_right">18675.6200</td>
                </tr>*@
        </tbody>
        <tfoot>
            @if (ViewBag.OrderWiseDetailTotal != null)
            {
                foreach (System.Data.DataRow dr in ViewBag.OrderWiseDetailTotal.Rows)
                {
            <tr class="total">
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td hidden="hidden">&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td hidden="hidden">&nbsp;</td>
                <td>&nbsp;</td>
                <td align="right"><strong>Total</strong></td>
                <td class="num_right"><strong>@dr["item_qty"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_rate_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_rate_bs"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_gr_val_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_gr_val_bs"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_tax_amt_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_tax_amt_bs"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_oc_amt_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_oc_amt_bs"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_net_val_spec"].ToString()</strong></td>
                <td class="num_right"><strong>@dr["item_net_val_bs"].ToString()</strong></td>
            </tr>
                }
            }
        </tfoot>
    </table>
}





@*</div>
    </div>*@
@{
    if (Model.ODFilter != null)
    {
        if (Model.ODFilter == "ODFilter")
        {
            @Scripts.Render("~/Content/Scripts/DataTableRefreshJs")
            @Scripts.Render("~/Content/Scripts/DatatablesJs")
            Model.ODFilter = null;
            <script>
                $(document).ready(function () {
                    $(".dataTables_filter input").attr('onkeyup', 'CalculateAmtOnSearchInput("datatable-buttons",8)');
                    $(".dataTables_filter input").attr('onmouseout', 'CalculateAmtOnSearchInput("datatable-buttons",8)');
                    CalculateAmtOnSearchInput("datatable-buttons", 8);
                });
            </script>
        }
    }
}

