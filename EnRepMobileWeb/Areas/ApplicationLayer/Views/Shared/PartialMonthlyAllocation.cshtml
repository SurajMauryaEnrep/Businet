@model  EnRepMobileWeb.MODELS.ApplicationLayer.FinancialAccountingAndControl.FinanceBudget.FinanceBudgetModel
@using EnRepMobileWeb.Resources;
@{
    var i = 0;
    var GlAccId = Model.Acc_Id;
    //double Total = Convert.ToDouble(Model.TotalAmount);commented by sm on 4-12-2024
    var Total = Model.TotalAmount;
    var DisFlaf = Model.DisableFlag;
    var PeriodFlag = Model.PeriodFlag;
    var Reso = "";

    if (PeriodFlag == "M")
    {
        Reso = Resource.Monthly;
    }
    else
    {
        Reso = Resource.Quarterly;
    }

}
<div class="modal-content">
    <div class="modal-header">
        <h2>@Reso @Resource.Allocation</h2>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>
    <div>
        <table class="table table-striped margin5" hidden="hidden" id="tblhdn">
            <tbody>
                @if (Model.ListAlls != null)
                {
                    foreach (var Mon in Model.ListAlls)
                    {
                        <tr>
                            <td id="hdn_GlId">@Model.Acc_Id</td>
                            <td id="hdn_type">@Mon.alltype</td>
                            <td id="hdn_Month">@Mon.allmonths</td>
                            <td id="hdn_Period">@Mon.allperiod</td>
                            <td id="hdn_BudAmt">@Mon.allamount</td>
                            <td id="hdn_TotalAmt">@Model.TotalAmount</td>
                            <td id="hdn_Sqno">@Mon.Sqno</td>
                            <td id="hdn_qtr_sno">@Mon.qtr_sno</td>
                        </tr>
                    }

                }

            </tbody>
        </table>
    </div>
    <div class="modal-body pop_top">
        @*<div class="col-md-4 col-sm-12" style="padding-left:0px;">
                <label class="col-form-label label-align">@Resource.RequirementArea</label>
                <input id="RequirementArea" class="form-control" autocomplete="off" type="text" name="RequirementArea" placeholder="@Resource.RequirementArea" disabled="">
            </div>*@
        <input type="hidden" id="PeriodFlag" value="" />
        <div class="col-md-4 col-sm-12" style="padding-left:0px;">
            <label class="col-form-label label-align">@Resource.FinancialYear</label>
            <input id="MonFinancialYear" class="form-control " autocomplete="off" type="text" name="FinancialYear" placeholder="@Resource.FinancialYear" disabled>
        </div>
        <div class="col-md-4 col-sm-12" style="padding-left:0px;">
            <label class="col-form-label label-align ">@Resource.Budget @Resource.Amount</label>
            <input id="MonBudgetAmount" class="form-control num_right" autocomplete="off" type="text" name="BudgetAmount" placeholder="0000.00" disabled>
        </div>
        <div class="card-box table-responsive dy_table margin15 price_item_detail">
            <div id="" class="sticky-table sticky-ltr-cells sb-container container-example1 OrderHistory height30VH">
                <table id="tblMonthlyAlloc" data-order="" class="table table-striped table-bordered rowhighlighttbl" style="width:100%">
                    <thead>
                        <tr class="sticky-header">
                            <th width="10%"> @Resource.SrNo</th>
                            <th width="30%">@Resource.Month</th>
                            <th width="30%">@Resource.Period</th>
                            <th width="30%">@Resource.Budget @Resource.Amount</th>

                        </tr>
                    </thead>
                    <tbody>

                        @if (Model.Monthlists != null)
                        {
                            if (Model.Monthlists.Count > 0)
                            {

                                foreach (var Month in Model.Monthlists)
                                {
                                    <tr>
                                        <td class="sorting_1 pl-2" id="Sqno">@Month.Sqn</td>
                                        <td id="Mon_month" class="pl-2">@Month.month</td>
                                        <td id="Mon_period" class="pl-2">@Month.monPeriod</td>
                                        @if ((DisFlaf != "" && DisFlaf == "Ey") || PeriodFlag == "Q")
                                        {
                                            <td>
                                                <input id="Mon_Amt" value="@Month.monAmount" class="form-control num_right" autocomplete="off" type="text" name="" placeholder="0000.00" readonly>
                                                <input type="hidden" id="hdnqtr_sno" value="@Month.qtr_sno" />
                                            </td>
                                        }
                                        else
                                        {
                                            <td>
                                                <input id="Mon_Amt" value="@Month.monAmount" onchange="onchangePARBudgetAmt(event,'MonthlyAlloc','Mon')"
                                                       onkeypress="return onkeypressBudgetAmount(this,event)" onkeyup="ValidateOnkeypressAmt(event,'MonthlyAlloc','Mon')"
                                                       class="form-control num_right" autocomplete="off" type="text" name="" placeholder="0000.00">
                                                <span class="error_message" id="Spn_Amt" style="position:relative;"></span>
                                                <input type="hidden" id="hdnqtr_sno" value="@Month.qtr_sno" />
                                            </td>
                                        }
                                    </tr>
                                }
                            }
                        }


                    </tbody>

                    <tfoot>
                        <tr class="total">
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td class="font-weight-bold num_right">@Resource.Total</td>
                            @*<td class="num_right" id="Mon_TotalAmt">@string.Format("{0:0.00}", Total.ToString("N"))</td>*@
                            <td class="num_right" id="Mon_TotalAmt">@Total</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
    <div class="modal-footer">

        @if ((DisFlaf == "Ey" && DisFlaf != "") || PeriodFlag == "Q")
        {
            <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal">@Resource.Close</button>
        }
        else
        {
            <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" id="Mon_SaveExitBtn" onclick="onclickBtnSaveExit('@PeriodFlag', @GlAccId,'MonthlyAlloc')">@Resource.SaveAndExit</button>
            <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" id="" onclick="">@Resource.DiscardAndExit</button>
        }
    </div>
</div>
